# DOMä¸äº‹ä»¶
DOMæ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå…¨ç§°ä¸ºDocument Object Modelã€‚DOMç”¨ä¸€ä¸ªé€»è¾‘æ ‘æ¥è¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ ‘çš„æ¯ä¸ªåˆ†æ”¯ç»ˆç‚¹éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ç€å¯¹è±¡ã€‚
DOMæä¾›äº†å¯¹æ–‡æ¡£ç»“æ„åŒ–çš„è¡¨è¿°ï¼Œé€šè¿‡ç»‘å®šä¸åŒçš„äº‹ä»¶å¯ä»¥æ”¹å˜æ–‡æ¡£çš„ç»“æ„ã€æ ·å¼å’Œå†…å®¹ï¼Œä»è€Œèƒ½å®ç°â€œåŠ¨æ€â€çš„é¡µé¢ã€‚
## DOMé€‰æ‹©å™¨
### ä¼ ç»ŸåŸç”ŸJavaScripté€‰æ‹©å™¨
ä¸ºäº†èƒ½æ›´ç›´è§‚åœ°çœ‹åˆ°DOMé€‰æ‹©å™¨çš„æ•ˆæœï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªHTMLé¡µé¢ï¼Œç„¶åé€šè¿‡DOMé€‰æ‹©å™¨å®šä½å…ƒç´ ï¼Œæ”¹å˜å¯¹åº”çš„å±•ç¤ºå†…å®¹ã€‚

HTMLé¡µé¢ä¸­ä¸»è¦æ˜¯å®šä¹‰ä¸€ç³»åˆ—çš„ul-liæ ‡ç­¾ï¼Œç„¶åé€šè¿‡DOMé€‰æ‹©å™¨å®šä½liåå¹¶æ“ä½œå®ƒä»¬ï¼Œåˆå§‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
```html
<ul>
    <li>èŠ‚ç‚¹1.1</li>
    <li>èŠ‚ç‚¹1.2</li>
    <li>èŠ‚ç‚¹1.3</li>
    <li>èŠ‚ç‚¹1.4</li>
    <li>èŠ‚ç‚¹1.5</li>
    <li>èŠ‚ç‚¹1.6</li>
    <li>èŠ‚ç‚¹1.7</li>
</ul>
<ul>
    <li>èŠ‚ç‚¹2.1</li>
    <li>èŠ‚ç‚¹2.2</li>
    <li>èŠ‚ç‚¹2.3</li>
    <li>èŠ‚ç‚¹2.4</li>
    <li>èŠ‚ç‚¹2.5</li>
    <li>èŠ‚ç‚¹2.6</li>
    <li>èŠ‚ç‚¹2.7</li>
</ul>
```
#### é€šè¿‡idå®šä½
```html
<!-- idå”¯ä¸€ -->
<ul>
    <li id="one">èŠ‚ç‚¹1.1</li>
    <li id="one">èŠ‚ç‚¹1.2</li>
    <li>èŠ‚ç‚¹1.3</li>
    <li>èŠ‚ç‚¹1.4</li>
</ul>
```
å½“å…·æœ‰ç›¸åŒidçš„å…ƒç´ æ—¶ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ èƒ½è¢«åŒ¹é…åˆ°å¤–ï¼Œå…¶ä»–å…ƒç´ éƒ½ä¼šè¢«å¿½ç•¥ã€‚
```js
document.getElementById('one').innerText; // èŠ‚ç‚¹1.1
```
#### é€šè¿‡classå®šä½
> getElementsByClassName()å‡½æ•°ï¼Œé€šè¿‡ç±»åå®šä½å…ƒç´ ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„HTMLCollectionå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ç»“æ„ã€‚
```html
<li class="one">èŠ‚ç‚¹1.2</li>
<li class="one">èŠ‚ç‚¹1.3</li>
```
```js
document.getElementsByClassName('one');
// è¿”å›å€¼ä¸ºä¸€ä¸ªHTMLCollectionå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„ä¸¤ä¸ªliå…ƒç´ å€¼ã€‚
HTMLCollection(2) [li.one, li.one]
 - 0: li.one
 - 1: li.one
 - length: 2
 - __proto__:  HTMLCollection
```
#### é€šè¿‡nameå±æ€§å®šä½
> getElementsByName()å‡½æ•°ï¼Œé€šè¿‡å…ƒç´ çš„nameå±æ€§è¿›è¡Œå®šä½ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„NodeListå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ç»“æ„ã€‚
```html
<ul>
    <li id="one">èŠ‚ç‚¹1.1</li>
    <li name="node">èŠ‚ç‚¹1.4</li>
    <li name="node">èŠ‚ç‚¹1.5</li>
</ul>
<ul>
    <li name="node">èŠ‚ç‚¹2.1</li>
    <li>èŠ‚ç‚¹2.2</li>
</ul>
```

```js
document.getElementsByName('node');
// è¿”å›çš„å€¼ä¸ºä¸€ä¸ªNodeListå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„nameå±æ€§ä¸ºâ€œnodeâ€çš„å…ƒç´ ã€‚
NodeList(3) [li, li, li]
 - 0: li
 - 1: li
 - 2: li
 - length: 3
 -  __proto__:  NodeList
```
#### é€šè¿‡æ ‡ç­¾åå®šä½
> getElementsByTagName()å‡½æ•°ï¼Œé€šè¿‡æ ‡ç­¾åå®šä½å…ƒç´ ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„HTMLCollectionå¯¹è±¡ã€‚
```js
// é€šè¿‡æ ‡ç­¾åè·å–é¡µé¢ä¸Šçš„ä¸¤ä¸ªulå…ƒç´ ã€‚
document.getElementsByTagName('ul');
// è¿”å›å€¼ä¸ºä¸€ä¸ªHTMLCollectionå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„ä¸¤ä¸ªulå…ƒç´ å€¼ã€‚
HTMLCollection(2) [ul, ul]
- 0: ul
- 1: ul
- length: 2
- __proto__: HTMLCollection
```
### æ–°å‹çš„querySelectoré€‰æ‹©å™¨å’ŒquerySelectorAllé€‰æ‹©å™¨
ä½¿ç”¨ä¼ ç»Ÿçš„idã€nameã€classç­‰é€‰æ‹©å™¨æ¥æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œåªèƒ½è°ƒç”¨documentå…·æœ‰çš„å‡½æ•°ï¼Œåœ¨æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„å­å…ƒç´ æ—¶ä¸å¤ªæ–¹ä¾¿ã€‚
#### querySelectoré€‰æ‹©å™¨
> querySelectoré€‰æ‹©å™¨è¿”å›çš„æ˜¯åœ¨åŸºå‡†å…ƒç´ ä¸‹ï¼Œé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚

è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
element = baseElement.querySelector(selectors);
```
å…¶ä¸­ï¼Œ
- baseElementæ˜¯åŸºå‡†å…ƒç´ ï¼Œè¿”å›çš„å…ƒç´ å¿…é¡»æ˜¯åŒ¹é…åˆ°çš„åŸºå‡†å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚è¯¥åŸºå‡†å…ƒç´ å¯ä»¥ä¸ºDocumentï¼Œä¹Ÿå¯ä»¥ä¸ºåŸºæœ¬çš„Elementã€‚
- selectorsæ˜¯ä¸€ä¸ªæ ‡å‡†çš„CSSé€‰æ‹©å™¨ï¼Œè€Œä¸”å¿…é¡»æ˜¯åˆæ³•çš„é€‰æ‹©å™¨ï¼Œå¦åˆ™ä¼šå¼•èµ·è¯­æ³•é”™è¯¯ã€‚
- è¿”å›å€¼ä¸ºåŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚åŒ¹é…çš„è¿‡ç¨‹ä¸­ä¸ä»…ä»…é’ˆå¯¹åŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ ï¼Œå®é™…ä¸Šä¼šéå†æ•´ä¸ªæ–‡æ¡£ç»“æ„ï¼ŒåŒ…æ‹¬åŸºå‡†å…ƒç´ å’Œå®ƒçš„åä»£å…ƒç´ ä»¥å¤–çš„å…ƒç´ ã€‚å®é™…å¤„ç†è¿‡ç¨‹æ˜¯é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ¹é…å…ƒç´ çš„åˆå§‹åˆ—è¡¨ï¼Œç„¶ååˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦ä¸ºåŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå±äºåŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ å°†ä¼šè¢«è¿”å›ã€‚
```html
<div>
  <h5>Original content</h5>
  <span>outside span</span>
  <p class="content">
    inside paragraph
    <span>inside span</span>
    inside paragraph
  </p>
</div>
```

```js
// è·å–på…ƒç´ çš„ç¬¬ä¸€ä¸ªspanå…ƒç´ ã€‚
document.querySelector('p span').innerText; // inside span
// è·å–classä¸ºcontentçš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªspanå…ƒç´ ã€‚
document.querySelector('.content span').innerText; // inside span
// è·å–ç¬¬ä¸€ä¸ªspanæˆ–è€…h5å…ƒç´ ã€‚
document.querySelector('h5, span').innerText // Original content
```
ç„¶åé€šè¿‡ä»¥ä¸‹è¿™æ®µä»£ç æ¥éªŒè¯ä¸Šè¿°è¿”å›å€¼çš„åŒ¹é…è¿‡ç¨‹ã€‚
```js
var baseElement = document.querySelector("p");
console.log(baseElement.querySelector("div span").innerText); // inside span
```
ç¬¬ä¸€è¡Œä»£ç è·å–çš„åŸºå‡†å…ƒç´ ä¸ºpå…ƒç´ ï¼Œç¬¬äºŒè¡Œä»£ç ä¸­çš„é€‰æ‹©å™¨ä¸ºâ€œdiv spanâ€ã€‚è™½ç„¶åœ¨på…ƒç´ ä¸­æ²¡æœ‰divå…ƒç´ ï¼Œå´ä¾æ—§èƒ½åŒ¹é…åˆ°spanå…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºåœ¨åŒ¹é…è¿‡ç¨‹ä¼šä¼˜å…ˆæ‰¾å‡ºdivå…ƒç´ ä¸‹spanå…ƒç´ çš„é›†åˆï¼Œç„¶ååˆ¤æ–­spanå…ƒç´ æ˜¯å¦å±äºpå…ƒç´ çš„å­å…ƒç´ ï¼Œæœ€åè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„spanå…ƒç´ å€¼ã€‚

#### querySelectorAllé€‰æ‹©å™¨
> querySelectorAllé€‰æ‹©å™¨ä¸querySelectoré€‰æ‹©å™¨ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºquerySelectorAllé€‰æ‹©å™¨ä¼šè¿”å›åŸºå‡†å…ƒç´ ä¸‹åŒ¹é…åˆ°çš„æ‰€æœ‰å­å…ƒç´ çš„é›†åˆã€‚

è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
elementList = baseElement.querySelectorAll(selectors);
// å®ƒåŒæ ·åŒ…å«åŸºå‡†å…ƒç´ ä¸é€‰æ‹©å™¨ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªNodeListçš„é›†åˆã€‚
```

```html
<div>
    <h5>Original content</h5>
    <span>outside span</span>
    <p class="content">
        inside paragraph
        <span>inside span</span>
        inside paragraph
    </p>
</div>
```

```js
// è·å–æ‰€æœ‰çš„spanå…ƒç´ ã€‚
document.querySelectorAll('span');
// å…¶è¿”å›å€¼å¦‚ä¸‹æ‰€ç¤ºã€‚
NodeList(2) [span, span]
 - 0: span
 - 1: span
 - length: 2
 - __proto__:  NodeList
```
querySelectorAllé€‰æ‹©å™¨åŒ¹é…è¿‡ç¨‹ä¸querySelectoré€‰æ‹©å™¨ä¸€æ ·ï¼Œä¼˜å…ˆè·å–æ‰€æœ‰åŒ¹é…å…ƒç´ çš„é›†åˆï¼Œç„¶ååˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦å±äºåŸºå‡†å…ƒç´ ã€‚å¦‚æœå±äºåˆ™è¿”å›ç»“æœï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªNodeListå¯¹è±¡ã€‚

ç†è§£querySelectorAllé€‰æ‹©å™¨åŒ¹é…å…ƒç´ çš„è¿‡ç¨‹ã€‚
```html
<div id="my-id">
    <img id="inside">
    <div class="lonely"></div>
    <div class="outer">
        <div class="inner"></div>
    </div>
</div>
<script>
    var firstArr = document.querySelectorAll('#my-id div div');
        var secondArr = document.querySelector('#my-id').querySelectorAll('div div');
    console.log(firstArr);
    console.log(secondArr);
</script>
```
ä¸Šé¢ä»£ç çš„ä¸»è¦ç›®çš„æ˜¯æ‰¾å‡ºåœ¨idä¸ºâ€œmy-idâ€å…ƒç´ çš„å­divä¸­å­divå…ƒç´ çš„é›†åˆã€‚åˆ†åˆ«ä½¿ç”¨ä¸¤ç§å†™æ³•è·å–åˆ°äº†firstArrå’ŒsecondArrä¸¤ä¸ªå€¼ã€‚
æé—®ï¼šfirstArrå’ŒsecondArrè¿”å›çš„NodeListå€¼æ˜¯å¦æ˜¯ä¸€æ ·çš„ï¼Ÿç­”æ¡ˆï¼šä¸ä¸€æ ·ã€‚å®é™…ä¸Šå®ƒä»¬è¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
firstArr   NodeList [div.inner]
        - 0: div.inner
        - length: 1
        - __proto__: NodeList
secondArr  NodeList(3) [div.lonely, div.outer, div.inner]
        - 0: div.lonely
        - 1: div.outer
        - 2: div.inner
        - length: 3
        - __proto__: NodeList
```
å¯ä»¥çœ‹å‡ºfirstArrè¡¨ç¤ºçš„NodeListå¯¹è±¡çš„é•¿åº¦ä¸º1ï¼Œè€ŒsecondArrè¡¨ç¤ºçš„NodeListå¯¹è±¡çš„é•¿åº¦ä¸º3ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

é’ˆå¯¹firstArrï¼ŒquerySelectorAllé€‰æ‹©å™¨çš„è°ƒç”¨æ–¹æ˜¯documentï¼Œåˆ™åŸºå‡†å…ƒç´ ä¸ºdocumentï¼›æ‰§è¡ŒCSSé€‰æ‹©å™¨ï¼ŒåŒ¹é…åˆ°çš„å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚
```html
<div class="inner"></div>
```
è¯¥å…ƒç´ å±äºdocumentä¸­çš„å­å…ƒç´ ï¼Œæœ€ç»ˆè¿”å›ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
NodeList [div.inner]
```

é’ˆå¯¹secondArrï¼Œå…ˆé€šè¿‡querySelectoré€‰æ‹©å™¨ç¡®å®šåŸºå‡†å…ƒç´ æ˜¯idä¸ºâ€œmy-idâ€çš„å…ƒç´ ï¼Œç„¶åæ‰§è¡ŒCSSé€‰æ‹©å™¨ï¼Œé€‰æ‹©å™¨çš„å†…å®¹æ˜¯åŒ¹é…divå…ƒç´ ä¸­çš„å­divå…ƒç´ ã€‚
HTMLä»£ç å¯¹åº”çš„æ–‡æ¡£ç»“æ„å†…ï¼Œæœ‰3ä¸ªå…ƒç´ æ˜¯åŒ¹é…çš„ã€‚
- idä¸ºâ€œmy-idâ€çš„divå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚`<div class="lonely"></div>`
- idä¸ºâ€œmy-idâ€çš„divå…ƒç´ çš„ç¬¬äºŒä¸ªå­èŠ‚ç‚¹ã€‚ `<div class="outer">...</div>`
- classä¸ºâ€œouterâ€çš„divå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚`<div class="inner"></div>`

ç´§æ¥ç€åˆ¤æ–­è¿™3ä¸ªåŒ¹é…çš„å…ƒç´ æ˜¯å¦ä¸ºåŸºå‡†å…ƒç´ çš„å­å…ƒç´ ï¼Œå‘ç°å®ƒä»¬éƒ½æ˜¯å¤„äºåŸºå‡†å…ƒç´ å†…éƒ¨çš„ï¼Œæœ€ç»ˆè¿™3ä¸ªå€¼æ„æˆä¸€ä¸ªNodeListé›†åˆè¿”å›ã€‚
```js
NodeList(3) [div.lonely, div.outer, div.inner]
```
##### ç‰¹ä¾‹ğŸ‘ğŸ‘ğŸ‘
> ä¸€ä¸ªé¡µé¢æ˜¯ä¸å…è®¸æœ‰ç›¸åŒidçš„å…ƒç´ çš„ã€‚å¦‚æœå‡ºç°äº†ç›¸åŒçš„idï¼Œåˆ™æ— æ³•é€šè¿‡getElementById()å‡½æ•°è·å–åˆ°é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ä»¥å¤–çš„å…ƒç´ ã€‚å¯¹äºquerySelectorAllé€‰æ‹©å™¨æ¥è¯´å´æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚å°†idé€‰æ‹©å™¨ä¼ å…¥querySelectorAllé€‰æ‹©å™¨ä¸­åï¼Œå¯ä»¥é€šè¿‡idè·å–å¤šä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œç„¶åé€šè¿‡ç´¢å¼•è·å–ç‰¹å®šçš„å€¼ã€‚
```html
<div>
    <p id="first">æ–‡æœ¬1</p>
    <p id="first">æ–‡æœ¬2</p>
    <p id="first">æ–‡æœ¬3</p>
    <p id="first">æ–‡æœ¬4</p>
</div>
<script>
    console.log(document.querySelectorAll('#first').length);  // 4
    console.log(document.querySelectorAll('#first')[3].innerText); // æ–‡æœ¬4
</script>
```
> è™½ç„¶querySelectorAllé€‰æ‹©å™¨ä¹Ÿå¯ä»¥å¤„ç†å‡ºç°ç›¸åŒidçš„æƒ…å†µï¼ŒæŒ‰ç…§HTMLç¼–å†™çš„è§„èŒƒï¼Œ**ç»å¯¹ä¸å…è®¸**ä¸€ä¸ªé¡µé¢å‡ºç°ç›¸åŒidçš„å…ƒç´ ã€‚
## HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡
ä¸åŒçš„DOMé€‰æ‹©å™¨ï¼Œå®ƒä»¬çš„è¿”å›å€¼æœ‰äº›æ˜¯NodeListå¯¹è±¡ï¼Œæœ‰äº›æ˜¯HTMLCollectionå¯¹è±¡ã€‚é‚£ä¹ˆå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

ä¸‹é¢è¿™æ®µä»£ç ï¼Œä¸»è¦æ˜¯å¯¹childrenå±æ€§å’ŒchildNodeså±æ€§çš„è°ƒç”¨ã€‚
```html
<div id="main">
    <p class="first">first</p>
    <p class="second">second<span>content</span></p>
</div>
<script>
    var main = document.getElementById("main");
    console.log(main.children);
    console.log(main.childNodes);
</script>
```
å¾—åˆ°çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
HTMLCollection(2) [p.first, p.second]
 - 0: p.first
 - 1: p.second
 - length: 2
 -  __proto__:  HTMLCollection
NodeList(5) [text, p.first, text, p.second, text]
 - 0: text
 - 1: p.first
 - 2: text
 - 3: p.second
 - 4: text
 - length: 5
 -  __proto__:  NodeList
```
### HTMLCollectionå¯¹è±¡
HTMLCollectionå¯¹è±¡å…·æœ‰lengthå±æ€§ï¼Œè¿”å›é›†åˆçš„é•¿åº¦ï¼Œå¯ä»¥é€šè¿‡item()å‡½æ•°å’ŒnamedItem()å‡½æ•°æ¥è®¿é—®ç‰¹å®šçš„å…ƒç´ ã€‚
#### item()å‡½æ•°
å¯ä»¥è°ƒç”¨item()å‡½æ•°ï¼Œé€šè¿‡åºå·æ¥è·å–ç‰¹å®šçš„æŸä¸ªèŠ‚ç‚¹ï¼Œè¶…è¿‡ç´¢å¼•åˆ™è¿”å›â€œnullâ€ã€‚
```html
<div id="main">
    <p class="first">first</p>
    <p class="second">second</p>
    <p class="third">third</p>
    <p class="four">four</p>
</div>
<script>
    var main = document.getElementById("main").children;
    console.log(main.item(0)); // <p class="first">first</p>
    console.log(main.item(2)); // <p class="third">third</p>
</script>
```
#### namedItem()å‡½æ•°
ç”¨æ¥è¿”å›ä¸€ä¸ªèŠ‚ç‚¹ã€‚
é¦–å…ˆé€šè¿‡idå±æ€§å»åŒ¹é…ï¼Œç„¶åå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°åˆ™ä½¿ç”¨nameå±æ€§åŒ¹é…ï¼Œå¦‚æœè¿˜æ²¡æœ‰åŒ¹é…åˆ°åˆ™è¿”å›â€œnullâ€ã€‚å½“å‡ºç°é‡å¤çš„idæˆ–è€…nameå±æ€§æ—¶ï¼Œåªè¿”å›åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå€¼ã€‚
```html
<form id="main">
    <input type="text" id="username">
    <input type="text" name="username">
    <input type="text" name="password">
</form>
<script>
    var main = document.getElementById("main").children;
    console.log(main.namedItem('username')); // <input type="text" id="username">
</script>
```
### NodeListå¯¹è±¡
> NodeListå¯¹è±¡ä¹Ÿå…·æœ‰lengthå±æ€§ï¼Œè¿”å›é›†åˆçš„é•¿åº¦ï¼Œä¹ŸåŒæ ·å…·æœ‰item()å‡½æ•°ï¼Œé€šè¿‡ç´¢å¼•å®šä½å­å…ƒç´ çš„ä½ç½®ã€‚åŒHTMLCollectionã€‚

### HTMLCollectionå¯¹è±¡å’ŒNodeListå¯¹è±¡çš„å®æ—¶æ€§
> ä¸¤è€…å¹¶ä¸æ˜¯å†å²æ–‡æ¡£çŠ¶æ€çš„é™æ€å¿«ç…§ï¼Œè€Œæ˜¯å…·æœ‰**å®æ—¶æ€§**çš„ã€‚å¯¹DOMæ ‘æ–°å¢æˆ–è€…åˆ é™¤ä¸€ä¸ªç›¸å…³èŠ‚ç‚¹ï¼Œéƒ½ä¼šç«‹åˆ»åæ˜ åœ¨HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡ä¸­ã€‚

HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡éƒ½åªæ˜¯ç±»æ•°ç»„ç»“æ„ï¼Œå¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨æ•°ç»„çš„å‡½æ•°ã€‚
è€Œé€šè¿‡call()å‡½æ•°å’Œapply()å‡½æ•°å¤„ç†ä¸ºçœŸæ­£çš„æ•°ç»„åï¼Œå®ƒä»¬å°±è½¬å˜ä¸ºä¸€ä¸ªçœŸæ­£çš„**é™æ€å€¼**äº†ï¼Œä¸ä¼šå†åŠ¨æ€åæ˜ DOMçš„å˜åŒ–ã€‚
```html
<form id="main">
    <input type="text" id="username">
    <input type="text" name="password">
</form>
<script>
    // è·å–HTMLCollection
    var mainChildren = document.getElementById('main').children;
        console.log(mainChildren.length);  // 2

    // æ–°å¢ä¸€ä¸ªinputå…ƒç´ 
    var newInput = document.createElement('input');
    main.appendChild(newInput);
    console.log(mainChildren.length);  // 3

    // é€šè¿‡call()å‡½æ•°å¤„ç†æˆæ•°ç»„ç»“æ„
    mainChildren = Array.prototype.slice.call(mainChildren, 0);
    mainChildren.splice(1, 1);
    console.log(mainChildren.length);  // 2

    // å†æ–°å¢ä¸€ä¸ªinputå…ƒç´ 
    var newInput2 = document.createElement('input');
    main.appendChild(newInput2);
    console.log(mainChildren.length);  // 2

</script>
```
NodeListå¯¹è±¡ä¸HTMLCollectionå¯¹è±¡ç›¸æ¯”ï¼Œå­˜åœ¨ä¸€äº›ç»†å¾®çš„å·®å¼‚ï¼Œä¸»è¦è¡¨ç°åœ¨ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°è·å–çš„NodeListå¯¹è±¡éƒ½æ˜¯å®æ—¶çš„ã€‚ä¾‹å¦‚é€šè¿‡querySelectorAll()å‡½æ•°è·å–çš„NodeListå¯¹è±¡å°±ä¸æ˜¯å®æ—¶çš„ã€‚
```html
<ul id="main">
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li>æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
</ul>
<script>
    // è·å–ul
    var main = document.getElementById('main');
    // è·å–lié›†åˆ
    var lis = document.querySelectorAll('ul li');
    // ç¬¬ä¸€æ¬¡è¾“å‡ºlié›†åˆé•¿åº¦ï¼Œå€¼ä¸º5
    console.log(lis.length);

    // æ–°å¢liå…ƒç´ 
    var newLi = document.createElement('li');
    var text = document.createTextNode('æ–‡æœ¬8');
    newLi.appendChild(text);
    main.appendChild(newLi);
    // å†æ¬¡è¾“å‡ºlié›†åˆé•¿åº¦ï¼Œå€¼ä¸º5
    console.log(lis.length);
    // é‡æ–°è·å–liçš„é›†åˆå¹¶è¾“å‡ºé•¿åº¦ï¼Œå€¼ä¸º6
    console.log(document.querySelectorAll('ul li').length);
</script>
```
ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¤è€…å…·æœ‰ä»¥ä¸‹çš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹ã€‚
#### ç›¸åŒç‚¹
- éƒ½æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œæœ‰lengthå±æ€§ï¼Œå¯ä»¥é€šè¿‡call()å‡½æ•°æˆ–apply()å‡½æ•°å¤„ç†æˆçœŸæ­£çš„æ•°ç»„ã€‚
- éƒ½æœ‰item()å‡½æ•°ï¼Œé€šè¿‡ç´¢å¼•å®šä½å…ƒç´ ã€‚
- éƒ½æ˜¯å®æ—¶æ€§çš„ï¼ŒDOMæ ‘çš„å˜åŒ–ä¼šåŠæ—¶åæ˜ åˆ°HTMLCollectionå¯¹è±¡å’ŒNodeListå¯¹è±¡ä¸Šï¼Œåªæ˜¯åœ¨æŸäº›å‡½æ•°è°ƒç”¨çš„è¿”å›ç»“æœä¸Šä¼šå­˜åœ¨å·®å¼‚ã€‚
#### ä¸åŒç‚¹
- HTMLCollectionå¯¹è±¡æ¯”NodeListå¯¹è±¡å¤šä¸ªnamedItem()å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡idæˆ–è€…nameå±æ€§å®šä½å…ƒç´ ã€‚
- HTMLCollectionå¯¹è±¡åªåŒ…å«å…ƒç´ çš„é›†åˆï¼ˆElementï¼‰ï¼Œå³å…·æœ‰æ ‡ç­¾åçš„å…ƒç´ ï¼›è€ŒNodeListå¯¹è±¡æ˜¯èŠ‚ç‚¹çš„é›†åˆï¼Œæ—¢åŒ…æ‹¬å…ƒç´ ï¼Œä¹ŸåŒ…æ‹¬èŠ‚ç‚¹ï¼Œä¾‹å¦‚textæ–‡æœ¬èŠ‚ç‚¹ã€‚

## å¸¸ç”¨çš„DOMæ“ä½œ
> æ–‡æ¡£æ ‘æ˜¯ç”±å„ç§ç±»å‹èŠ‚ç‚¹æ„æˆçš„é›†åˆï¼ŒDOMæ“ä½œå®é™…æ˜¯å¯¹æ–‡æ¡£ç»“æ„ä¸­èŠ‚ç‚¹çš„æ“ä½œã€‚
> æ–‡æ¡£ç»“æ„æ ‘ä¸­çš„èŠ‚ç‚¹ç±»å‹ä¼—å¤šï¼Œä½†æ˜¯æ“ä½œçš„ä¸»è¦èŠ‚ç‚¹ç±»å‹ä¸ºå…ƒç´ èŠ‚ç‚¹ã€å±æ€§èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<!DOCTYPE html>
<html>
<head>
    <title>æ–‡æ¡£æ ‡é¢˜</title>
</head>
<body>
  <a href="http://www.mianshiting.com">æˆ‘çš„é“¾æ¥</a>
  <h1>æˆ‘çš„æ ‡é¢˜</h1>
</body>
</html>
```
å¦‚æœå°†è¿™äº›èŠ‚ç‚¹ç”»æˆä¸€ä¸ªæ ‘çš„è¯:
[æ–‡æ¡£](./assets/drowio/document.drawio ':include :type=code')
- å…ƒç´ èŠ‚ç‚¹æ˜¯æ‹¥æœ‰ä¸€å¯¹å¼€é—­åˆæ ‡ç­¾çš„å…ƒç´ æ•´ä½“ï¼Œä¾‹å¦‚å¸¸è§çš„divã€ulã€liæ ‡ç­¾éƒ½æ˜¯å…ƒç´ èŠ‚ç‚¹ã€‚
  - `<div></div>ï¼Œ<ul></ul>ï¼Œ<li></li>`
- å±æ€§èŠ‚ç‚¹æ˜¯å…ƒç´ èŠ‚ç‚¹å…·æœ‰çš„å±æ€§ï¼Œä¾‹å¦‚aæ ‡ç­¾çš„hrefå±æ€§ã€‚
- æ–‡æœ¬èŠ‚ç‚¹æ˜¯DOMä¸­ç”¨äºå‘ˆç°æ–‡æœ¬å†…å®¹çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚h1æ ‡ç­¾å†…éƒ¨çš„â€œæˆ‘çš„æ ‡é¢˜â€ã€‚
- å…¶ä¸­å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹å­˜åœ¨çˆ¶å­å…³ç³»ï¼Œè€Œå…ƒç´ èŠ‚ç‚¹ä¸å±æ€§èŠ‚ç‚¹å¹¶ä¸å­˜åœ¨çˆ¶å­å…³ç³»ã€‚

### æ–°å¢èŠ‚ç‚¹
> ä¸¤ä¸ªæ­¥éª¤ï¼Œé¦–å…ˆæ˜¯æ–°å»ºèŠ‚ç‚¹ï¼Œç„¶åå°†èŠ‚ç‚¹æ·»åŠ è‡³æŒ‡å®šçš„ä½ç½®ã€‚
```html
<ul id="container">
    <li class="first">æ–‡æœ¬1</li>
    <li class="second">æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li id="target">æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
    <li>æ–‡æœ¬6</li>
</ul>
```
éœ€è¦å®Œæˆè¿™æ ·ä¸€ä¸ªæ“ä½œï¼šç¬¬ä¸€æ­¥ï¼Œåœ¨ulçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªliå…ƒç´ ï¼Œå…¶ç±»åä¸ºâ€œlastâ€ï¼Œå†…å®¹ä¸ºâ€œæ–°å¢æ–‡æœ¬1â€ï¼›ç¬¬äºŒæ­¥ï¼Œåœ¨æ–°å¢çš„liä¹‹å‰å†æ–°å¢ç¬¬äºŒä¸ªliï¼Œå†…å®¹ä¸ºâ€œæ–°å¢æ–‡æœ¬2â€ã€‚
```js
// 1ï¸âƒ£è·å–æŒ‡å®šå…ƒç´ ã€‚
var container = document.querySelector('#container');
// 2ï¸âƒ£æ–°å»ºåˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚
var newLiOne = document.createElement('li');
// 3ï¸âƒ£æ–°å»ºä¸€ä¸ªå±æ€§èŠ‚ç‚¹ï¼Œå¹¶è®¾ç½®å€¼ã€‚
var newLiAttr = document.createAttribute('class');
newLiAttr.value = 'last';
// 4ï¸âƒ£å°†å±æ€§èŠ‚ç‚¹ç»‘å®šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸Šã€‚
newLiOne.setAttributeNode(newLiAttr);
// 5ï¸âƒ£æ–°å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚
var newTextOne = document.createTextNode('æ–°å¢æ–‡æœ¬1');
// 6ï¸âƒ£å°†æ–‡æœ¬èŠ‚ç‚¹ä½œä¸ºå…ƒç´ èŠ‚ç‚¹çš„å­å…ƒç´ ã€‚
newLiOne.appendChild(newTextOne);
// 7ï¸âƒ£ä½¿ç”¨appendChild()å‡½æ•°å°†æ–°å¢å…ƒç´ èŠ‚ç‚¹æ·»åŠ è‡³æœ«å°¾ã€‚
container.appendChild(newLiOne);
// 8ï¸âƒ£æ–°åˆ›å»ºç¬¬äºŒä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚
var newTextTwo = document.createTextNode('æ–°å¢æ–‡æœ¬2');
// 9ï¸âƒ£æ–°åˆ›å»ºç¬¬äºŒä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚
var newTextTwo = document.createTextNode('æ–°å¢æ–‡æœ¬2');
// ğŸ”Ÿå°†æ–‡æœ¬èŠ‚ç‚¹ä½œä¸ºå…ƒç´ èŠ‚ç‚¹çš„å­å…ƒç´ ã€‚
newLiTwo.appendChild(newTextTwo);
// ğŸ”Ÿ+1ï¸âƒ£ä½¿ç”¨insertBefore()å‡½æ•°å°†èŠ‚ç‚¹æ·»åŠ è‡³ç¬¬ä¸€ä¸ªæ–°å¢èŠ‚ç‚¹çš„å‰é¢ã€‚
container.insertBefore(newLiTwo, newLiOne);
```
è‡³æ­¤ï¼Œå®ŒæˆæŒ‡å®šçš„ä¸¤ä¸ªæ–°å¢æ“ä½œã€‚

åœ¨æ–°å¢å±æ€§èŠ‚ç‚¹æ—¶ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ›´ç®€å•çš„setAttribute()å‡½æ•°ã€‚ä»¥ä¸Šé¢ä»£ç ä¸ºä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸€è¡Œä»£ç å®Œæˆä¸Šè¿°3ï¸âƒ£4ï¸âƒ£è¿™ä¸¤æ­¥å…±3è¡Œä»£ç çš„åŠŸèƒ½ã€‚
```js
newLiOne.setAttribute('class', 'last'); // ä¸å…¼å®¹IE8åŠæ›´æ—©çš„ç‰ˆæœ¬
```
### åˆ é™¤èŠ‚ç‚¹
åˆ é™¤èŠ‚ç‚¹çš„æ“ä½œå®é™…åŒ…å«åˆ é™¤å…ƒç´ èŠ‚ç‚¹ã€åˆ é™¤å±æ€§èŠ‚ç‚¹å’Œåˆ é™¤æ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<ul id="main">
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
</ul>
<a id="link" href="http://www.mianshiting.com">é¢è¯•å…</a>
```
1. åˆ é™¤ulçš„ç¬¬ä¸€ä¸ªliå…ƒç´ èŠ‚ç‚¹
åˆ é™¤ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹éœ€è¦è¿›è¡Œä¸‰æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ã€‚
var main = document.querySelector('#main');
// 2ï¸âƒ£è·å–å¾…åˆ é™¤èŠ‚ç‚¹ã€‚
// å¾…åˆ é™¤èŠ‚ç‚¹æ˜¯çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¾ˆå¤šäººå¯èƒ½ç›´æ¥æƒ³åˆ°çš„æ˜¯ä½¿ç”¨firstChildå±æ€§ï¼Œè¿™æ˜¯ä¸å¯å–çš„ã€‚firstChildå±æ€§å®é™…æ˜¯å–childNodeså±æ€§è¿”å›çš„NodeListå¯¹è±¡ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œåœ¨æ­¤ä¾‹ä¸­å®é™…ä¸ºä¸€ä¸ªæ¢è¡Œç¬¦ã€‚
// å¦‚æœéœ€è¦è·å–ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œåº”è¯¥ä½¿ç”¨firstElementChildå±æ€§ã€‚
var firstChild = main.firstElementChild;
// 3ï¸âƒ£é€šè¿‡çˆ¶èŠ‚ç‚¹ï¼Œè°ƒç”¨removeChild()å‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚
main.removeChild(firstChild);
```
2. åˆ é™¤aæ ‡ç­¾çš„hrefå±æ€§
åˆ é™¤ä¸€ä¸ªå…ƒç´ çš„å±æ€§éœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–è¯¥å…ƒç´ ã€‚
var link = document.querySelector('#link');
// 2ï¸âƒ£é€šè¿‡å…ƒç´ èŠ‚ç‚¹ï¼Œè°ƒç”¨removeAttribute()å‡½æ•°åˆ é™¤æŒ‡å®šå±æ€§èŠ‚ç‚¹ã€‚
link.removeAttribute('href');
```
3. åˆ é™¤ulæœ€åä¸€ä¸ªliå…ƒç´ çš„æ–‡æœ¬èŠ‚ç‚¹
åˆ é™¤ä¸€ä¸ªå…ƒç´ çš„æ–‡æœ¬èŠ‚ç‚¹éœ€è¦è¿›è¡Œä¸‰æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–å…ƒç´ èŠ‚ç‚¹ã€‚
// åœ¨è·å–æœ€åä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨çš„æ˜¯lastElementChildå±æ€§è€Œä¸æ˜¯lastChildå±æ€§ã€‚
var lastChild = main.lastElementChild;
// 2ï¸âƒ£è·å–æ–‡æœ¬èŠ‚ç‚¹ã€‚
// åœ¨è·å–æ–‡æœ¬èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ä½¿ç”¨çš„æ˜¯childNodeså±æ€§ï¼Œç„¶åå–è¿”å›çš„NodeListå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå€¼ã€‚ä¸èƒ½ä½¿ç”¨childrenå±æ€§ï¼Œå› ä¸ºchildrenå±æ€§è¿”å›çš„æ˜¯HTMLCollectionå¯¹è±¡ï¼Œè¡¨ç¤ºçš„æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å†…å®¹ã€‚
var textNode = lastChild.childNodes[0];
// 3ï¸âƒ£é€šè¿‡å…ƒç´ èŠ‚ç‚¹ï¼Œè°ƒç”¨removeChild()å‡½æ•°åˆ é™¤æŒ‡å®šçš„æ–‡æœ¬èŠ‚ç‚¹ã€‚
lastChild.removeChild(textNode);
// å…³äºåˆ é™¤æ–‡æœ¬èŠ‚ç‚¹è¿˜æœ‰ä¸€ç§æ¯”è¾ƒç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œé‚£å°±æ˜¯å°†å…ƒç´ èŠ‚ç‚¹çš„innerHTMLå±æ€§è®¾ç½®ä¸ºç©ºã€‚
lastChild.innerHTML = '';
```
åœ¨åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹æ—¶ï¼Œæ›´æ¨èä½¿ç”¨è®¾ç½®innerHTMLå±æ€§ä¸ºç©ºçš„æ–¹æ³•ã€‚
### ä¿®æ”¹èŠ‚ç‚¹
åŒ…å«ç€å¾ˆå¤šä¸åŒç±»å‹çš„æ“ä½œï¼ŒåŒ…æ‹¬ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹ã€ä¿®æ”¹å±æ€§èŠ‚ç‚¹å’Œä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<div id="main">
    <!-- æµ‹è¯•ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹ -->
    <div id="div1">æ›¿æ¢ä¹‹å‰çš„å…ƒç´ </div>
    <!-- æµ‹è¯•ä¿®æ”¹å±æ€§èŠ‚ç‚¹ -->
    <div id="div2" class="classA" style="color: green;">è¿™æ˜¯ä¿®æ”¹å±æ€§çš„èŠ‚ç‚¹</div>
    <!-- æµ‹è¯•ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ -->
    <div id="last">è¿™æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹å†…å®¹</div>
</div>
```
1. ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹

ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹çš„æ“ä½œä¸€èˆ¬æ˜¯ç›´æ¥å°†èŠ‚ç‚¹å…ƒç´ æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨replaceChild()å‡½æ•°æ¥å®ç°ã€‚replaceChild()å‡½æ•°çš„è°ƒç”¨æ–¹æ˜¯çˆ¶å…ƒç´ ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ–°å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå°†è¦è¢«æ›¿æ¢çš„æ—§å…ƒç´ ã€‚
```html
<script>
    // 1.è·å–çˆ¶å…ƒç´ ä¸å¾…æ›¿æ¢çš„å…ƒç´ 
    var main = document.querySelector('#main');
    var div1 = document.querySelector('#div1');
    // 2.åˆ›å»ºæ–°å…ƒç´ 
    var newDiv = document.createElement('div');
    var newText = document.createTextNode('è¿™æ˜¯æ–°åˆ›å»ºçš„æ–‡æœ¬');
    newDiv.appendChild(newText);
    // 3.ä½¿ç”¨æ–°å…ƒç´ æ›¿æ¢æ—§çš„å…ƒç´ 
    main.replaceChild(newDiv, div1);
</script>
```
2. ä¿®æ”¹å±æ€§èŠ‚ç‚¹
ä¿®æ”¹å±æ€§èŠ‚ç‚¹æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š
- ä¸€ç§æ˜¯é€šè¿‡getAttribute()å‡½æ•°å’ŒsetAttribute()å‡½æ•°è·å–å’Œè®¾ç½®å±æ€§èŠ‚ç‚¹å€¼ï¼›å¦ä¸€ç§æ˜¯ç›´æ¥ä¿®æ”¹å±æ€§åã€‚
- ç¬¬äºŒç§æ–¹å¼æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œç›´æ¥ä¿®æ”¹çš„å±æ€§åä¸å…ƒç´ èŠ‚ç‚¹ä¸­çš„å±æ€§åä¸ä¸€å®šæ˜¯ä¸€è‡´çš„ã€‚å°±åƒclassè¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå®ƒæ˜¯JavaScriptä¸­çš„å…³é”®å­—ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨classNameæ¥ä»£æ›¿ã€‚
```js
var div2 = document.querySelector('#div2');
// æ–¹æ³•1: é€šè¿‡setAttribute()å‡½æ•°è®¾ç½®
div2.setAttribute('class', 'classB');
// æ–¹æ³•2: ç›´æ¥ä¿®æ”¹å±æ€§åï¼Œæ³¨æ„ä¸èƒ½ç›´æ¥ç”¨classï¼Œéœ€è¦ä½¿ç”¨className
div2.className = 'classC';

// æ–¹æ³•1: é€šè¿‡setAttribute()å‡½æ•°è®¾ç½®
div2.setAttribute('style', 'color: red;');
// æ–¹æ³•2: ç›´æ¥ä¿®æ”¹å±æ€§å
div2.style.color = 'blue';
```
3. ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹
ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ä¸åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹ä¸€æ ·ï¼Œå°†innerHTMLå±æ€§ä¿®æ”¹ä¸ºéœ€è¦çš„æ–‡æœ¬å†…å®¹å³å¯ã€‚
```js
var last = document.querySelector('#last');
// ç›´æ¥ä¿®æ”¹innerHTMLå±æ€§
last.innerHTML = 'è¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹';
//å¦‚æœè®¾ç½®çš„innerHTMLå±æ€§å€¼ä¸­åŒ…å«HTMLå…ƒç´ ï¼Œåˆ™ä¼šè¢«è§£æ
//ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡ŒéªŒè¯
last.innerHTML = '<p style="color: red">è¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹</p>';
//åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“åï¼Œå¯ä»¥çœ‹åˆ°â€œè¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹â€ä¸ºçº¢è‰²
```
## äº‹ä»¶æµ
åœ¨æµè§ˆå™¨ä¸­ï¼ŒJavaScriptå’ŒHTMLä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å»å®ç°çš„ï¼Œå¸¸ç”¨çš„äº‹ä»¶æœ‰ä»£è¡¨é¼ æ ‡å•å‡»çš„clickäº‹ä»¶ã€ä»£è¡¨åŠ è½½çš„loadäº‹ä»¶ã€ä»£è¡¨é¼ æ ‡æŒ‡é’ˆæ‚¬æµ®çš„mouseoveräº‹ä»¶ã€‚
åœ¨äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šç›¸å¯¹åº”åœ°è§¦å‘ç»‘å®šåœ¨å…ƒç´ ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä»¥å¤„ç†å¯¹åº”çš„æ“ä½œã€‚

é€šå¸¸ä¸€ä¸ªé¡µé¢ä¼šç»‘å®šå¾ˆå¤šçš„äº‹ä»¶ï¼Œé‚£ä¹ˆå…·ä½“çš„äº‹ä»¶è§¦å‘é¡ºåºæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

è¿™å°±ä¼šæ¶‰åŠäº‹ä»¶æµçš„æ¦‚å¿µï¼Œäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚äº‹ä»¶å‘ç”Ÿåä¼šåœ¨ç›®æ ‡èŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§ç‰¹å®šçš„é¡ºåºä¼ æ’­ï¼Œè·¯å¾„ç»è¿‡çš„èŠ‚ç‚¹éƒ½ä¼šæ¥æ”¶åˆ°äº‹ä»¶ã€‚

é€šè¿‡ä¸‹é¢çš„åœºæ™¯æ¥ç›´è§‚åœ°æƒ³è±¡ä¸€ä¸‹äº‹ä»¶çš„æµè½¬é¡ºåºã€‚

é¡µé¢ä¸Šæœ‰ä¸€ä¸ªtableè¡¨æ ¼ï¼Œåˆ†åˆ«åœ¨tableè¡¨æ ¼ã€tbodyè¡¨æ ¼ä½“ã€trè¡Œã€tdå•å…ƒæ ¼ä¸Šç»‘å®šäº†clickäº‹ä»¶ã€‚å‡å¦‚æˆ‘åœ¨tdä¸Šæ‰§è¡Œäº†å•å‡»çš„æ“ä½œï¼Œé‚£ä¹ˆå°†ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„äº‹ä»¶æµå‘¢ï¼Ÿ

- ç¬¬ä¸€ç§äº‹ä»¶ä¼ é€’é¡ºåºæ˜¯å…ˆè§¦å‘æœ€å¤–å±‚çš„tableå…ƒç´ ï¼Œç„¶åå‘å†…ä¼ æ’­ï¼Œä¾æ¬¡è§¦å‘tbodyã€trä¸tdå…ƒç´ ã€‚
- ç¬¬äºŒç§äº‹ä»¶ä¼ é€’é¡ºåºå…ˆè§¦å‘ç”±æœ€å†…å±‚çš„tdå…ƒç´ ï¼Œç„¶åå‘å¤–ä¼ æ’­ï¼Œä¾æ¬¡è§¦å‘trã€tbodyä¸tableå…ƒç´ ã€‚
- ç¬¬ä¸€ç§äº‹ä»¶ä¼ é€’é¡ºåºå¯¹åº”çš„æ˜¯æ•è·å‹äº‹ä»¶æµï¼Œç¬¬äºŒç§äº‹ä»¶ä¼ é€’é¡ºåºå¯¹åº”çš„æ˜¯å†’æ³¡å‹äº‹ä»¶æµã€‚

ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶æµå®é™…åŒ…å«äº†3ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·é˜¶æ®µ>äº‹ä»¶ç›®æ ‡é˜¶æ®µ>äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚
ä¸Šè¿°ä¸¤ç§ç±»å‹çš„äº‹ä»¶æµå®é™…å¯¹åº”å…¶ä¸­çš„äº‹ä»¶æ•è·é˜¶æ®µä¸äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚

### äº‹ä»¶æ•è·é˜¶æ®µ
äº‹ä»¶æ•è·é˜¶æ®µçš„ä¸»è¦è¡¨ç°æ˜¯ä¸å…·ä½“çš„èŠ‚ç‚¹å…ˆæ¥æ”¶äº‹ä»¶ï¼Œç„¶å**é€çº§å‘ä¸‹ä¼ æ’­**ï¼Œæœ€å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚

> Window > Document > html > body > table >tbody > tr > tdã€‚

å¦‚å›¾ï¼š
![catch]('../../assets/img/event_catch.jpg')

### äº‹ä»¶ç›®æ ‡é˜¶æ®µ
äº‹ä»¶ç›®æ ‡é˜¶æ®µè¡¨ç¤ºäº‹ä»¶åˆšå¥½ä¼ æ’­åˆ°ç”¨æˆ·äº§ç”Ÿè¡Œä¸ºçš„å…ƒç´ ä¸Šï¼Œå¯èƒ½æ˜¯äº‹ä»¶æ•è·çš„æœ€åä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå¯èƒ½æ˜¯äº‹ä»¶å†’æ³¡çš„ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚

### äº‹ä»¶å†’æ³¡é˜¶æ®µ
äº‹ä»¶å†’æ³¡é˜¶æ®µçš„ä¸»è¦è¡¨ç°æ˜¯æœ€å…·ä½“çš„å…ƒç´ å…ˆæ¥æ”¶äº‹ä»¶ï¼Œç„¶å**é€çº§å‘ä¸Šä¼ æ’­**ï¼Œä¸å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶äº‹ä»¶

> td > tr > tbody > table > body > html > Document >Windowã€‚

```html
<table border="1">
    <tbody>
        <tr>
            <td>è¿™æ˜¯tdçš„å…ƒç´ </td>
        </tr>
    </tbody>
</table>
<!-- ç„¶åä¾æ¬¡ç»™tableã€tbodyã€trã€tdç»‘å®šclickäº‹ä»¶ã€‚ -->
<script>
    var table = document.querySelector('table');
    var tbody = document.querySelector('tbody');
    var tr = document.querySelector('tr');
    var td = document.querySelector('td');

    table.addEventListener('click', function () {
        console.log('tableè§¦å‘');
    });
    tbody.addEventListener('click', function () {
        console.log('tbodyè§¦å‘');
    });
    tr.addEventListener('click', function () {
        console.log('trè§¦å‘');
    });
    td.addEventListener('click', function () {
        console.log('tdè§¦å‘');
    });
</script>
```
1ï¸âƒ£ä½¿ç”¨addEventListener()å‡½æ•°ç»‘å®šçš„äº‹ä»¶åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå³**ç¬¬ä¸‰ä¸ªå‚æ•°é»˜è®¤ä¸ºfalseæ—¶ï¼ŒæŒ‰ç…§`å†’æ³¡å‹`äº‹ä»¶æµå¤„ç†**ã€‚

å½“å•å‡»tdå•å…ƒæ ¼å…ƒç´ æ—¶
```js
tdè§¦å‘
trè§¦å‘
tbodyè§¦å‘
tableè§¦å‘
// ä»tdå…ƒç´ å¼€å§‹å‘å¤–ä¾æ¬¡ä¼ æ’­ï¼Œç»ç”±trã€tbodyï¼Œæœ€ç»ˆåˆ°è¾¾tableå…ƒç´ ã€‚
```

2ï¸âƒ£ä½¿ç”¨addEventListener()å‡½æ•°åŒæ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›é€ å‡ºæ•è·å‹äº‹ä»¶æµï¼Œåªéœ€è¦å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueå³å¯ã€‚
```js
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, true);

tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, true);

tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, true);
```
å½“å•å‡»tdå•å…ƒæ ¼å…ƒç´ æ—¶
```js
tableè§¦å‘
tbodyè§¦å‘
trè§¦å‘
tdè§¦å‘
// ä»tableå…ƒç´ å¼€å§‹å‘å†…ä¾æ¬¡ä¼ æ’­ï¼Œç»ç”±tbodyã€trï¼Œæœ€ç»ˆåˆ°è¾¾tdå…ƒç´ ã€‚
```

> ä»¥ä¸Šçš„ä¸¤ç§ç±»å‹å…¨éƒ¨éƒ½æ˜¯æŒ‰ç…§æ•è·æ€§äº‹ä»¶æµæˆ–å†’æ³¡å‹äº‹ä»¶æµå¤„ç†çš„ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¿®æ”¹å…¶ä¸­çš„ä»»æ„ä¸¤ç§ä¸ºä¸åŒçš„æ¨¡å¼ä»¥è¾¾åˆ°æ··åˆå‹äº‹ä»¶æµï¼Œç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ

å‡å¦‚å°†tableä¸trè®¾ç½®ä¸ºäº‹ä»¶æ•è·ç±»å‹ï¼Œå°†tbodyä¸tdè®¾ç½®ä¸ºäº‹ä»¶å†’æ³¡ç±»å‹ï¼Œå¾—åˆ°çš„ä»£ç å¦‚ä¸‹ã€‚
```js
// äº‹ä»¶æ•è·
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, false);

// äº‹ä»¶æ•è·
tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, false);
```
å½“å•å‡»tdå…ƒç´ æ—¶ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
tableè§¦å‘
trè§¦å‘
tdè§¦å‘
tbodyè§¦å‘
```
å‘ç°äº‹ä»¶è§¦å‘æ—¶ï¼Œæ—¢æ²¡æœ‰æŒ‰ç…§å…ƒç´ ç”±å†…å‘å¤–çš„é¡ºåºï¼Œä¹Ÿæ²¡æœ‰æŒ‰ç…§å…ƒç´ ç”±å¤–å‘å†…çš„é¡ºåºã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

**å› ä¸ºå®Œæ•´çš„äº‹ä»¶æµæ˜¯æŒ‰ç…§äº‹ä»¶æ•è·é˜¶æ®µ>äº‹ä»¶ç›®æ ‡é˜¶æ®µ>äº‹ä»¶å†’æ³¡é˜¶æ®µä¾æ¬¡è¿›è¡Œçš„ã€‚å¦‚æœæœ‰å…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œåˆ™ä¼šä¼˜å…ˆäºå†’æ³¡ç±»å‹äº‹ä»¶è€Œå…ˆæ‰§è¡Œã€‚**

æ•´ä¸ªäº‹ä»¶æµçš„å®é™…æ‰§è¡Œè¿‡ç¨‹åˆ†æå¦‚ä¸‹ã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œä»tableå…ƒç´ å¼€å§‹ï¼Œtableå…ƒç´ ç»‘å®šæ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥æœ€å…ˆæ‰§è¡Œï¼Œè¾“å‡ºâ€œtableè§¦å‘â€ã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tbodyå…ƒç´ ï¼Œä½†æ˜¯tbodyå…ƒç´ ç»‘å®šçš„æ˜¯å†’æ³¡ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œæ‰§è¡Œåˆ°trå…ƒç´ ï¼Œtrå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtrè§¦å‘â€ã€‚
- äº‹ä»¶ç›®æ ‡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tdå…ƒç´ ï¼Œè§¦å‘ç›®æ ‡å…ƒç´ äº‹ä»¶ï¼Œä¸ç®¡æ˜¯å†’æ³¡ç±»å‹äº‹ä»¶è¿˜æ˜¯æ•è·ç±»å‹äº‹ä»¶ï¼Œéƒ½ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtdè§¦å‘â€ã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°trå…ƒç´ ï¼Œtrå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tbodyå…ƒç´ ï¼Œtbodyå…ƒç´ ç»‘å®šäº†å†’æ³¡ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtbodyè§¦å‘â€ã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tableå…ƒç´ ï¼Œtableå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚

å¯¹tableå…ƒç´ å’Œtdå…ƒç´ ç»‘å®šå†’æ³¡ç±»å‹äº‹ä»¶ï¼Œå¯¹tbodyå…ƒç´ å’Œtrå…ƒç´ ç»‘å®šæ•è·ç±»å‹äº‹ä»¶ï¼Œåœ¨å•å‡»tdå…ƒç´ çš„æ—¶å€™ï¼Œç»“æœä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ
```js
// äº‹ä»¶å†’æ³¡
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, false);

// äº‹ä»¶æ•è·
tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, true);

// äº‹ä»¶æ•è·
tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, false);

// tbodyè§¦å‘
// trè§¦å‘
// tdè§¦å‘
// tableè§¦å‘
```
## äº‹ä»¶å¤„ç†ç¨‹åºğŸ‘ğŸ‘ğŸ‘
> é€šè¿‡addEventListener()å‡½æ•°ç»™å…ƒç´ ç»‘å®šäº†äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™åªæ˜¯å…¶ä¸­çš„ä¸€ç§å®ç°æ–¹å¼ã€‚

ç®€å•ç†è§£äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±æ˜¯å“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°ï¼Œä¾‹å¦‚onclick()å‡½æ•°ã€onload()å‡½æ•°å°±æ˜¯å“åº”å•å‡»ã€åŠ è½½äº‹ä»¶çš„å‡½æ•°ï¼Œå¯¹åº”çš„æ˜¯ä¸€æ®µJavaScriptçš„å‡½æ•°ä»£ç ã€‚

æ ¹æ®W3C DOMæ ‡å‡†ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºåˆ†ä¸ºDOM0ã€DOM2ã€DOM3è¿™3ç§çº§åˆ«çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚ç”±äºåœ¨DOM1ä¸­å¹¶æ²¡æœ‰å®šä¹‰äº‹ä»¶çš„ç›¸å…³å†…å®¹ï¼Œå› æ­¤æ²¡æœ‰æ‰€è°“çš„DOM1çº§äº‹ä»¶å¤„ç†ç¨‹åºã€‚

### DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº
ä¸€ç§æ˜¯å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªäº‹ä»¶å¤„ç†å±æ€§ï¼Œæœ‰ä¸¤ç§è¡¨ç°å½¢å¼ã€‚ç¬¬ä¸€ç§æ˜¯å…ˆé€šè¿‡JavaScriptä»£ç è·å–DOMå…ƒç´ ï¼Œå†å°†å‡½æ•°èµ‹å€¼ç»™å¯¹åº”çš„äº‹ä»¶å±æ€§ã€‚
```js
var btn = document.getElementById("btn"); 
btn.onclick = function(){}
```
è¿˜æœ‰ä¸€ç§æ˜¯ç›´æ¥åœ¨htmlä¸­è®¾ç½®å¯¹åº”äº‹ä»¶å±æ€§çš„å€¼ï¼Œå€¼æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ï¼Œä¸€ç§æ˜¯æ‰§è¡Œçš„å‡½æ•°ä½“ï¼Œå¦ä¸€ç§æ˜¯å‡½æ•°åï¼Œç„¶ååœ¨scriptæ ‡ç­¾ä¸­å®šä¹‰è¯¥å‡½æ•°ã€‚
```html
<button onclick="alert('é¢è¯•å…');">å•å‡»</button>
<button onclick="clickFn()">å•å‡»</button>
<script>
    function clickFn() {
        alert('é¢è¯•å…');
    }
</script>
```
ä»¥ä¸Šä¸¤ç§åŒæ—¶å­˜åœ¨æ—¶ï¼Œç¬¬ä¸€ç§åœ¨JavaScriptä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†ç¨‹åºä¼šè¦†ç›–æ‰åé¢åœ¨htmlæ ‡ç­¾ä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚

> DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åºåªæ”¯æŒäº‹ä»¶å†’æ³¡é˜¶æ®µ

- ä¼˜ç‚¹ï¼šç®€å•ä¸”å¯ä»¥è·¨æµè§ˆå™¨ã€‚
- ç¼ºç‚¹ï¼šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºåªèƒ½ç»‘å®šä¸€ä¸ªå‡½æ•°ã€‚

```html
<!-- ä½¿ç”¨ä¸¤ç§æ–¹æ³•ç»‘å®šonclickäº‹ä»¶å¤„ç†ç¨‹åºã€‚ -->
<button class="btn" id="btn" onclick="doClick()">click me</button>
<script>
var btn = document.getElementById("btn");
btn.onclick = function(){
    console.log('123'); // 123
};
function doClick() {
    console.log('456');
}
// å¦‚éœ€åˆ é™¤å…ƒç´ ç»‘å®šçš„äº‹ä»¶ï¼Œåªéœ€è¦å°†å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºè®¾ç½®ä¸ºnullå³å¯ã€‚
btn.onclick = null;
</script>
```
### DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº
å½“äº‹ä»¶å‘ç”Ÿåœ¨èŠ‚ç‚¹æ—¶ï¼Œç›®æ ‡å…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°å°±ä¼šè¢«è§¦å‘ï¼Œè€Œä¸”ç›®æ ‡å…ƒç´ çš„æ¯ä¸ªç¥–å…ˆèŠ‚ç‚¹ä¹Ÿä¼šæŒ‰ç…§äº‹ä»¶æµé¡ºåºè§¦å‘å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚

DOM2çº§äº‹ä»¶å¤„ç†æ–¹å¼è§„å®šäº†æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºå’Œåˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºçš„æ–¹æ³•

é’ˆå¯¹DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¸åŒçš„æµè§ˆå™¨å‚å•†åˆ¶å®šäº†ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸ºIEæµè§ˆå™¨å’ŒéIEæµè§ˆå™¨ã€‚

IE
- åœ¨IE10åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œåªæ”¯æŒäº‹ä»¶å†’æ³¡é˜¶æ®µã€‚
- åœ¨IE11ä¸­åŒæ—¶æ”¯æŒäº‹ä»¶æ•è·é˜¶æ®µä¸äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚åœ¨IE10åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡attachEvent()å‡½æ•°æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡detachEvent()å‡½æ•°åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚
```js
element.attachEvent("on"+ eventName, handler); // æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº
element.detachEvent("on"+ eventName, handler); // åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº
```
- åœ¨IE11åŠå…¶ä»–éIEæµè§ˆå™¨ä¸­ï¼ŒåŒæ—¶æ”¯æŒäº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡ä¸¤ä¸ªé˜¶æ®µï¼Œå¯ä»¥é€šè¿‡addEventListener()å‡½æ•°æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡removeEventListener()å‡½æ•°åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚
```js
addEventListener(eventName, handler, useCapture);     //æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº
removeEventListener(eventName, handler, useCapture);  //åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº
```
å…¶ä¸­çš„useCaptureå‚æ•°è¡¨ç¤ºæ˜¯å¦æ”¯æŒäº‹ä»¶æ•è·ï¼Œtrueè¡¨ç¤ºæ”¯æŒäº‹ä»¶æ•è·ï¼Œfalseè¡¨ç¤ºæ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œé»˜è®¤çŠ¶æ€ä¸ºfalseã€‚

#### å…±åŒç‚¹
1ï¸âƒ£åœ¨DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œä¸ç®¡æ˜¯IEæµè§ˆå™¨è¿˜æ˜¯éIEæµè§ˆå™¨éƒ½æ”¯æŒå¯¹åŒä¸€ä¸ªäº‹ä»¶ç»‘å®šå¤šä¸ªå¤„ç†å‡½æ•°ã€‚
```js
var handler1 = function (){}
var handler2 = function (){}
// ---------------IE10åŠä»¥ä¸‹------------------
btn.attachEvent('onclick', handler1);
btn.attachEvent('onclick', handler2);
// ---------------IE11åŠéIE-----------------
btn.addEventListener('click', handler1);
btn.addEventListener('click', handler2);
```
å¦‚ä¸‹é¢çš„æ‰€ç¤ºï¼Œåœ¨divä¸ŠåŒæ—¶ç»‘å®šäº†ä¸¤ä¸ªclickå‡½æ•°ã€‚
```html
<div id="wrap">å•å‡»æˆ‘è§¦å‘äº‹ä»¶</div>
<script>
var wrap = document.getElementById('wrap');
wrap.addEventListener('click', function() {
    console.log('123'); // 123
}, false);
wrap.addEventListener('click', function () {
    console.log('456'); // 456
}, false);
</script>
```
2ï¸âƒ£åœ¨éœ€è¦åˆ é™¤ç»‘å®šçš„äº‹ä»¶æ—¶ï¼Œä¸èƒ½åˆ é™¤åŒ¿åå‡½æ•°ï¼Œå› ä¸ºæ·»åŠ å’Œåˆ é™¤çš„å¿…é¡»æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢è¿™ç§åŒæ—¶ç»‘å®šå’Œå–æ¶ˆhandler()å‡½æ•°çš„æƒ…å†µï¼Œå¯ä»¥åˆ é™¤æ‰ç»‘å®šçš„äº‹ä»¶ã€‚
```js
var wrap = document.getElementById('wrap');
var handler = function () {
    console.log('789');
};
// ç¬¬ä¸€ç§æ–¹å¼ç»‘å®šå’Œå–æ¶ˆçš„æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤å¯ä»¥å–æ¶ˆç»‘å®šçš„äº‹ä»¶
wrap.addEventListener('click', handler, false);
wrap.removeEventListener('click', handler);
```
è€Œå¦‚æœé‡‡ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œåˆ™æ— æ³•å–æ¶ˆç»‘å®šçš„äº‹ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨çš„éƒ½æ˜¯åŒ¿åå‡½æ•°çš„å½¢å¼ï¼Œç»‘å®šä¸å–æ¶ˆçš„å‡½æ•°å¹¶ä¸æ˜¯åŒä¸€ä¸ªã€‚
```js
wrap.addEventListener('click', function () {
    console.log('123');
}, false);
wrap.removeEventListener('click', function () {});
```
#### ä¸åŒç‚¹
1ï¸âƒ£åœ¨IEæµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨attachEvent()å‡½æ•°ä¸ºåŒä¸€ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œä¼šæŒ‰ç…§æ·»åŠ çš„ç›¸åé¡ºåºæ‰§è¡Œã€‚

```js
// åœ¨ä¸€ä¸ªbuttonå…ƒç´ ä¸Šä½¿ç”¨attachEvent()å‡½æ•°å…ˆåç»‘å®šäº†ä¸¤ä¸ªonclickäº‹ä»¶å¤„ç†ç¨‹åº
var btn = document.getElementById("mybtn");
btn.attachEvent("onclick",function(){
    console.log("clicked");
});
btn.attachEvent("onclick",function(){
    console.log("hello world!"); 
});
// hello world!
// clicked
```
2ï¸âƒ£åœ¨IEæµè§ˆå™¨ä¸‹ï¼Œä½¿ç”¨attachEvent()å‡½æ•°æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œå› æ­¤**thisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸwindow**ã€‚åœ¨éIEæµè§ˆå™¨ä¸‹ï¼Œä½¿ç”¨addEventListener()å‡½æ•°æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºåœ¨æŒ‡å®šçš„å…ƒç´ å†…éƒ¨æ‰§è¡Œï¼Œå› æ­¤**thisæŒ‡å‘ç»‘å®šçš„å…ƒç´ **ã€‚
```html
<button id="mybtn">å•å‡»</button>
<script>
  var btn = document.getElementById("mybtn");
  // IEæµè§ˆå™¨
  btn.attachEvent("onclick", function () {
    alert(this); // æŒ‡å‘window
  });
  // éIEæµè§ˆå™¨
  btn.addEventListener("click", function () {
    alert(this); // æŒ‡å‘ç»‘å®šçš„å…ƒç´ 
  });
</script>
```
å› ä¸ºæµè§ˆå™¨çš„å·®å¼‚æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥å®ç°DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦é’ˆå¯¹ä¸åŒçš„æµè§ˆå™¨åšå…¼å®¹æ€§å¤„ç†ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ

```js
// ä»¥ä¸‹æ˜¯ä¸€æ®µé’ˆå¯¹ä¸åŒæµè§ˆå™¨æ‰€åšçš„å°è£…å¤„ç†ä»£ç ã€‚
var EventUtil = {
    addEventHandler: function (element, type, handler) {
        if (element.addEventListener) {
            element.addEventListener(type, handler);
        } else if (element.attachEvent){
            element.attachEvent("on" + type, handler);
        } else {
            element["on" + type] = handler;
        }
    },
    removeEventHandler: function (element, type, handler) {
        if (element.addEventListener) {
            element.removeEventListener(type, handler);
        } else if (element.detachEvent){
            element.detachEvent("on" + type, handler);
        } else {
            element["on" + type] = null;
        }
    }
}
```
#### DOM3çº§äº‹ä»¶å¤„ç†ç¨‹åº
```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```
