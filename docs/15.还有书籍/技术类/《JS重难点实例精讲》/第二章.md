# å¼•ç”¨æ•°æ®ç±»å‹
å¸¸ç”¨çš„å¼•ç”¨æ•°æ®ç±»å‹åŒ…æ‹¬Objectç±»å‹ã€Arrayç±»å‹ã€Dateç±»å‹ã€RegExpç±»å‹ã€Mathç±»å‹ã€Functionç±»å‹ä»¥åŠåŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»å‹ï¼Œå¦‚Numberç±»å‹ã€Stringç±»å‹ã€Booleanç±»å‹ç­‰ã€‚

å¼•ç”¨æ•°æ®ç±»å‹æœ‰ä¸åŒäºåŸºæœ¬æ•°æ®ç±»å‹çš„ç‰¹ç‚¹ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤º
- å¼•ç”¨æ•°æ®ç±»å‹çš„å®ä¾‹éœ€è¦é€šè¿‡newæ“ä½œç¬¦ç”Ÿæˆï¼Œæœ‰çš„æ˜¯æ˜¾å¼è°ƒç”¨ï¼Œæœ‰çš„æ˜¯éšå¼è°ƒç”¨ã€‚
- å¼•ç”¨æ•°æ®ç±»å‹çš„å€¼æ˜¯å¯å˜çš„ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚
- å¼•ç”¨æ•°æ®ç±»å‹==å˜é‡èµ‹å€¼ä¼ é€’çš„æ˜¯å†…å­˜åœ°å€==ã€‚
- å¼•ç”¨æ•°æ®ç±»å‹çš„æ¯”è¾ƒæ˜¯å¯¹å†…å­˜åœ°å€çš„æ¯”è¾ƒï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ¯”è¾ƒæ˜¯å¯¹å€¼çš„æ¯”è¾ƒã€‚

## Object
> Objectç±»å‹ä½¿ç”¨çš„é¢‘ç‡é«˜æ˜¯å› ä¸ºå…¶å¯¹äº**æ•°æ®å­˜å‚¨**å’Œ**ä¼ è¾“**æ˜¯éå¸¸ç†æƒ³çš„é€‰æ‹©

ç”±äºå¼•ç”¨æ•°æ®ç±»å‹çš„å®ä¾‹éƒ½éœ€è¦é€šè¿‡newæ“ä½œç¬¦æ¥ç”Ÿæˆï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆäº†è§£newæ“ä½œç¬¦çš„ç›¸å…³çŸ¥è¯†ã€‚

newæ“ä½œç¬¦åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæ”¹å˜thisçš„æŒ‡å‘ã€‚
```js
function Cat(name, age) {
  console.log(this)  // Cat {}
  this.name = name; // Cat.name = name;
  this.age = age; // Cat.age = age;
}
console.log(new Cat('miaomiao', 18)); // Cat { name: 'miaomiao', age: 18 }
```
æ¢ä¸ªè¯´æ³•
```js
function Cat(name,age){
   var Cat = {};
   Cat.name = name;
   Cat.age = age;
}
console.log(new Cat('miaomiao',18));  // Cat {}
```
è¾“å‡ºç»“æœä¸­å¹¶æœªåŒ…å«nameå’Œageå±æ€§ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

å› ä¸ºåœ¨JavaScriptä¸­ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰returnå€¼ï¼Œåˆ™é»˜è®¤return thisã€‚
-
ä¸Šé¢ä»£ç ä¸­çš„thiså®é™…æ˜¯ä¸€ä¸ªCatç©ºå¯¹è±¡ï¼Œnameå’Œageå±æ€§åªæ˜¯è¢«æ·»åŠ åˆ°äº†ä¸´æ—¶å˜é‡Catä¸­ã€‚*ä¸ºäº†èƒ½è®©è¾“å‡ºç»“æœåŒ…å«nameå’Œageå±æ€§*ï¼Œæˆ‘ä»¬å°†ä¸´æ—¶å˜é‡Catè¿›è¡Œreturnå°±å¯ä»¥äº†ã€‚
```js
function Cat(name, age) {
  var Cat = {};
  Cat.name = name;
  Cat.age = age;
  return Cat; // è¿”å›ä¸€ä¸ªæ™®é€šå¯¹è±¡è€Œå·² 
}
console.log(new Cat('miaomiao', 8)) // { name: "miaomiao", age: 18 }
```

### thisä¸newæ“ä½œç¬¦ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ
```js
// ä»è¡¨é¢ä¸Šçœ‹è¿™è¡Œä»£ç çš„ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªCatå¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶å°†è¿™ä¸ªå®ä¾‹å€¼èµ‹äºˆcatå˜é‡ï¼Œcatå˜é‡å°±ä¼šåŒ…å«Catå¯¹è±¡çš„å±æ€§å’Œå‡½æ•°ã€‚
var cat = new Cat();

// å…¶å®ï¼Œnewæ“ä½œç¬¦åšäº†3ä»¶äº‹æƒ…
var cat = {} //  1.åˆ›å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ã€‚
// 2. å°†ç©ºå¯¹è±¡çš„éšå¼åŸå‹å±æ€§æŒ‡å‘Catå¯¹è±¡çš„æ˜¾ç¤ºåŸå‹å±æ€§
cat.__proto__ = Cat.prototype; 
Cat.call(cat); // 3. å°†Cat()å‡½æ•°ä¸­çš„thisæŒ‡å‘catå˜é‡
// äºæ˜¯catå˜é‡å°±æ˜¯Catå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚
```

è‡ªå®šä¹‰ä¸€ä¸ªç±»ä¼¼newåŠŸèƒ½çš„å‡½æ•°
```js
function Cat(name, age) {
  this.name = name;
  this.age = age;
}
function New() {
  var obj = {};
  var res = Cat.apply(obj, arguments);
  // console.log(res);
  return typeof res === 'object' ? res : obj;
}
console.log(New('mimi', 18)); // Object { name: 'mimi', age: 18 }
// Cat.apply(obj, arguments)è°ƒç”¨åCatå¯¹è±¡ä¸­çš„thiså°±æŒ‡å‘äº†objå¯¹è±¡ï¼Œè¿™æ ·objå¯¹è±¡å°±å…·æœ‰äº†nameå’Œageå±æ€§ã€‚
```
å› æ­¤ï¼Œä¸ä»…è¦å…³æ³¨newæ“ä½œç¬¦çš„å‡½æ•°æœ¬èº«ï¼Œä¹Ÿè¦å…³æ³¨å®ƒçš„åŸå‹å±æ€§ã€‚

å†æ¬¡æ”¹åŠ¨
```js
function Cat(name, age) {
  this.name = name;
  this.age = age;
}

Cat.prototype.sayHi = function() {
  console.log('hi');
};

function New() {
  var obj = {};
  var res = Cat.apply(obj, arguments);
  return typeof res === 'object' ? res : obj;
}

console.log(New('mimi', 18).sayHi()) // Uncaught TypeError: New(...).sayHi is not a function
```
Newå‡½æ•°æŒ‡å‘äº†obj,è€ŒsayHiå‡½æ•°æ˜¯Catæ˜¾å¼åŸå‹ä¸Šçš„æ–¹æ³•ã€‚

ä¿®æ”¹åï¼šåœ¨Newå‡½æ•°ä¸­å¢åŠ åŸå‹æŒ‡å‘å³å¯ã€‚
```js
obj.__proto__ = Cat.prototype;
```

### å®ä¾‹å‡½æ•°
å®ä¾‹å‡½æ•°æ˜¯æŒ‡å‡½æ•°çš„è°ƒç”¨æ˜¯åŸºäºObjectç±»å‹çš„å®ä¾‹çš„ã€‚
```js
var obj = new Object();
```
æ‰€æœ‰å®ä¾‹å‡½æ•°çš„è°ƒç”¨éƒ½æ˜¯åŸºäºobjè¿™ä¸ªå®ä¾‹ã€‚

#### hasOwnProperty(propertyName)å‡½æ•°
è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­å¯¹è±¡è‡ªèº«æ˜¯å¦æ‹¥æœ‰æŒ‡å®šåç§°çš„å®ä¾‹å±æ€§ï¼Œæ­¤å‡½æ•°==ä¸ä¼šæ£€æŸ¥å®ä¾‹å¯¹è±¡åŸå‹é“¾ä¸Šçš„å±æ€§==ã€‚
```js
var o = new Object();
o.name = 'custom attribution';
console.log(o.hasOwnProperty('name')); // true
console.log(o.hasOwnProperty('toString')); // false

var Student = function (name) {
  this.name = name;
}
Student.prototype.sayHello = function () {
  alert('Hello,' + this.name);
}
Student.prototype.age = 0;
var st = new Student('xiaoming');
console.log(st.hasOwnProperty('name')); // true
console.log(st.hasOwnProperty('sayHello')); // false
console.log(st.hasOwnProperty('age')); // false
```
#### propertyIsEnumerable(propertyName)å‡½æ•°
è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­æŒ‡å®šåç§°çš„å±æ€§æ˜¯å¦ä¸ºå®ä¾‹å±æ€§å¹¶ä¸”æ˜¯å¦æ˜¯å¯æšä¸¾çš„ï¼Œå¦‚æœæ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§æˆ–è€…ä¸å¯æšä¸¾éƒ½å°†è¿”å›â€œfalseâ€ã€‚
```js
var array = [1, 2, 3];
array.name = 'Array';
console.log(array.propertyIsEnumerable('name')); // trueï¼šå®ä¾‹å±æ€§
console.log(array.propertyIsEnumerable('join')); // falseï¼šç»§æ‰¿å±æ€§
console.log(array.propertyIsEnumerable('length')); // falseï¼šç»§æ‰¿å±æ€§
console.log(array.propertyIsEnumerable('toString')); // falseï¼šç»§æ‰¿å±æ€§

var Student = function (name) {
  this.name = name;
}
Student.prototype.sayHello = function () {
  alert('Hello', this.name);
}

var a = new Student('tom');
console.log(a.propertyIsEnumerable('name')); // trueï¼šå®ä¾‹å±æ€§
console.log(a.propertyIsEnumerable('age')); // falseï¼šæ— æ­¤å±æ€§
console.log(a.propertyIsEnumerable('sayHello')); // falseï¼šåŸå‹å±æ€§

// è®¾ç½®nameå±æ€§ä¸ºä¸å¯æšä¸¾çš„
Object.defineProperty(a, 'name', {
  enumerable: false
})
console.log(a.propertyIsEnumerable('name')) // false
```

#### [hasOwn](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn)
> Object.hasOwn() æ—¨åœ¨å–ä»£ Object.prototype.hasOwnProperty()ã€‚


### é™æ€å‡½æ•°
> é™æ€å‡½æ•°æŒ‡çš„æ˜¯æ–¹æ³•çš„è°ƒç”¨åŸºäºObjectç±»å‹è‡ªèº«ï¼Œä¸éœ€è¦é€šè¿‡Objectç±»å‹çš„å®ä¾‹ã€‚

#### Object.create()
åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæŒ‡å®šåŸå‹å’ŒæŒ‡å®šå±æ€§çš„å¯¹è±¡
```js
// 
Object.create(prototype, propertyDescriptor)ã€‚
```
prototypeå±æ€§ä¸ºå¯¹è±¡çš„åŸå‹ï¼Œå¯ä»¥ä¸ºnullã€‚è‹¥ä¸ºnullï¼Œåˆ™å¯¹è±¡çš„åŸå‹ä¸ºundefinedã€‚å±æ€§æè¿°ç¬¦çš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚
##### propertyDescriptor
å±æ€§æè¿°ç¬¦
```js
propertyName: {
   value: '', // è®¾ç½®æ­¤å±æ€§çš„å€¼
   writable: true, // è®¾ç½®æ­¤å±æ€§æ˜¯å¦å¯å†™å…¥ï¼›é»˜è®¤ä¸ºfalseï¼šåªè¯»
   enumerable: true, // è®¾ç½®æ­¤å±æ€§æ˜¯å¦å¯æšä¸¾ï¼›é»˜è®¤ä¸ºfalseï¼šä¸å¯æšä¸¾
   configurable: true // è®¾ç½®æ­¤å±æ€§æ˜¯å¦å¯é…ç½®ï¼Œå¦‚æ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„ç‰¹æ€§åŠæ˜¯å¦å¯ä»¥åˆ é™¤å±æ€§ï¼›é»˜è®¤ä¸ºfalse
}
```
ä¸¾ä¾‹
```js
// å»ºç«‹ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡ï¼Œè®¾ç½®nameå’Œageå±æ€§
var obj = Object.create(null, {
  name: {
    value: 'tom',
    writable: true,
    enumerable: true,
    configurable: true
  },
  age: {
    value: 22
  }
})
console.log(obj.name); // tom
console.log(obj.age); // 22
obj.age = 26;
console.log(obj.age); // 22 : ageå±æ€§çš„writableé»˜è®¤ä¸ºfalse

for(var p in obj) {
  console.log(p); // name : åªè¾“å‡ºnameå±æ€§ï¼šageå±æ€§çš„enumerableé»˜è®¤ä¸ºfalse,ä¸èƒ½é€šè¿‡for...inæšä¸¾
}
```
ä½¿ç”¨polyfillå®ç°
```js
Object.create = function (proto, propertiesObject) {
  // çœå»ä¸­é—´å¾ˆå¤šåˆ¤æ–­
  function F() {}
  F.prototype = proto;
  return new F();
}
```
åœ¨create()å‡½æ•°ä¸­ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸ªå‡½æ•°ä¸ºF()å‡½æ•°ï¼Œç„¶åå°†F()å‡½æ•°çš„prototypeå±æ€§æŒ‡å‘ä¼ å…¥çš„protoå‚æ•°ï¼Œé€šè¿‡newæ“ä½œç¬¦ç”ŸæˆF()å‡½æ•°çš„å®ä¾‹ã€‚

å‡å¦‚`var f = new F()`ï¼Œ`f.__proto__ === F.prototype`ã€‚å®é™…ä¸Šç”Ÿæˆçš„å¯¹è±¡å®ä¾‹ä¼šæŠŠå±æ€§ç»§æ‰¿åˆ°å…¶`__proto__`å±æ€§ä¸Šã€‚

éªŒè¯
```js
var test = Object.create({ x: 123, y: 345 });
console.log(test); // {}, å®é™…ç”Ÿæˆçš„å¯¹è±¡ä¸º ä¸€ä¸ªç©ºå¯¹è±¡
console.log(test.x); // 123
console.log(test.__proto__.x); // 123
console.log(test.__proto__.x === test.x); // true
```
å¯ä»¥é€šè¿‡å…¶__proto__å±æ€§è®¿é—®åˆ°xå±æ€§ã€‚

#### Object.defineProperties()
> æ·»åŠ æˆ–ä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼
```js
Object.defineProperties(obj, propertyDescriptor)
```
[propertyDescriptoråŒObject.create](#propertyDescriptor)ï¼Œä¾‹å¦‚ï¼Œç»™ä¸€ä¸ªç©ºå¯¹è±¡{}æ·»åŠ nameå’Œageå±æ€§ï¼Œå…¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
var obj = {};
Object.defineProperties(obj, {
  name: {
    value: 'tom',
    enumerable: true
  },
  age: {
    value: 22,
    enumerable: true
  }
})
for(var p in obj) {
  console.log(p); // name age 
}
// ageå±æ€§çš„writableé»˜è®¤ä¸ºfalse,åªè¯»
obj.age = 23;
console.log(obj.age); // 22  
```
##### åŒobject.createåŒºåˆ«ï¼Ÿ

#### Object.getOwnPropertyNames()
> è·å–å¯¹è±¡çš„æ‰€æœ‰å®ä¾‹å±æ€§å’Œå‡½æ•°ï¼Œä¸åŒ…å«åŸå‹é“¾ç»§æ‰¿çš„å±æ€§å’Œå‡½æ•°ï¼Œæ•°æ®æ ¼å¼ä¸ºæ•°ç»„
```js
function Person(name, age, gender) {
  this.name = name;
  this.age = age;
  this.gender = gender;
  this.getName = function () {
    return this.name;
  }
}
Person.prototype.eat = function() {
  return 'eat food';
}
var p = new Person();
console.log(Object.getOwnPropertyNames(p));// ["name", "age", "gender", "getName"] 
```

#### Object.keys()
> è·å–å¯¹è±¡å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼Œä¸åŒ…å«åŸå‹é“¾ç»§æ‰¿çš„å±æ€§ï¼Œæ•°æ®æ ¼å¼ä¸ºæ•°ç»„ã€‚
> keys()å‡½æ•°åŒºåˆ«äºgetOwnPropertyNames()å‡½æ•°çš„åœ°æ–¹åœ¨äºï¼Œkeys()å‡½æ•°åªè·å–**å¯æšä¸¾ç±»å‹**çš„å±æ€§ã€‚
```js
var obj = {
  name: 'tom', 
  age: 22, 
  sayHello() { alert('Hello' + this.name)};
}
// (1) getOwnPropertyName()å‡½æ•°ä¸keys()å‡½æ•°è¿”å›çš„å†…å®¹éƒ½ç›¸åŒ
// ['name', 'age', 'sayHello']: è¿”å›å¯¹è±¡çš„æ‰€æœ‰å®ä¾‹æˆå‘˜
console.log(Object.getOwnPropertyNames(obj));
// ['name', 'age', 'sayHello']: è¿”å›å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾æˆå‘˜
console.log(Object.key(obj));

// è®¾ç½®å¯¹è±¡çš„nameå±æ€§ä¸å¯æšä¸¾
Object.defineProperty(obj, 'name', { enumerable: false });

// (2) keys()å‡½æ•°ï¼ŒåªåŒ…å«å¯æšä¸¾æˆå‘˜
// ['name', 'age', 'sayHello']: è¿”å›å¯¹è±¡çš„æ‰€æœ‰å®ä¾‹æˆå‘˜
console.log(Object.getOwnPropertyNames(obj));
// ['age', 'sayHello']: è¿”å›å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾æˆå‘˜
console.log(Object.key(obj));
```

## Array
### åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡
typeof?
```js
var a = [1, 2, 3];
typeof a; // object
```
æ‰€ä»¥ä½¿ç”¨typeofè¿ç®—ç¬¦å¹¶ä¸èƒ½ç›´æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¯¹è±¡è¿˜æ˜¯æ•°ç»„ç±»å‹ã€‚å®é™…ä¸Šï¼Œtypeofè¿ç®—ç¬¦åœ¨åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹æ—¶ä¼šå¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹æ—¶ï¼Œå´æ˜¾å¾—å¾ˆåƒåŠ›ã€‚
#### instanceof 
> ç”¨äºé€šè¿‡æŸ¥æ‰¾åŸå‹é“¾æ¥æ£€æµ‹æŸä¸ªå˜é‡æ˜¯å¦ä¸ºæŸä¸ªç±»å‹æ•°æ®çš„å®ä¾‹ï¼Œä½¿ç”¨instanceofè¿ç®—ç¬¦å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡ã€‚
```js
var a =  [1, 2, 3];
console.log(a instanceof Array);  // true
console.log(a instanceof Object); // true

var b = { name: 'ming' };
console.log(b instanceof Array);  // false
console.log(b instanceof Object); // true
```
æ•°ç»„ä¸ä»…æ˜¯Arrayç±»å‹çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯Objectç±»å‹çš„å®ä¾‹ã€‚
-
åœ¨åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡æ—¶ï¼Œåº”è¯¥å…ˆåˆ¤æ–­æ•°ç»„ç±»å‹ï¼Œç„¶åå†å»åˆ¤æ–­å¯¹è±¡ç±»å‹ã€‚

å°è£…å‡½æ•°
```js
function getDataType(o) {
  if (o instanceof Array) {
    return 'Array';
  } else if (o instanceof Object) {
    return 'Object';
  } else {
    return 'param is not object type';
  }
}
```
è™½ç„¶ä½¿ç”¨instanceofè¿ç®—ç¬¦å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯instanceofè¿ç®—ç¬¦å­˜åœ¨ä¸€å®šçš„ç¼ºé™·

#### åˆ¤æ–­æ„é€ å‡½æ•°ğŸ”†
åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œä»å¦ä¸€ä¸ªå±‚é¢è®²ï¼Œå°±æ˜¯åˆ¤æ–­å˜é‡çš„æ„é€ å‡½æ•°æ˜¯Arrayç±»å‹è¿˜æ˜¯Objectç±»å‹
å› ä¸ºä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹éƒ½æ˜¯é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„constructorå±æ€§ã€‚
```js
var a = [1, 2, 3];
console.log(a.constructor === Array); // true
console.log(a.constructor === Object); // false

var b = { name: 'ming' };
console.log(b.constructor === Array);  // false
console.log(b.constructor === Object); // true
```
é‚£ä¹ˆä¸€ä¸ªå˜é‡ä¸ºä»€ä¹ˆä¼šæœ‰constructorå±æ€§å‘¢ï¼Ÿ
æ¯ä¸ªå˜é‡éƒ½ä¼šæœ‰ä¸€ä¸ª**__proto__**å±æ€§ï¼Œè¡¨ç¤ºçš„æ˜¯**éšå¼åŸå‹**ã€‚ä¸€ä¸ªå¯¹è±¡çš„éšå¼åŸå‹æŒ‡å‘çš„æ˜¯æ„é€ è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹
```js
[].__proto__ === [].constructor.prototype; // true
[].__proto__ === Array.prototype; // true
```
ä½¿ç”¨éšå¼åŸå‹é“¾æ”¹å†™
```js
var a = [1, 2, 3];
console.log(a.__proto__.constructor === Array); // true
console.log(a.__proto__.constructor === Object); // false
```
å°è£…å‡½æ•°
```js
function getDataType(o) {
  var constructor = o.__proto__.constructor || o.constructor;
  if(constructor === Array) {
    return 'Array';
  } else if(constructor === Object){
    return 'Object';
  } else {
    return 'param is not object type';
  }
} 
```
æ—©æœŸçš„IEæµè§ˆå™¨å¹¶ä¸æ”¯æŒ__proto__å±æ€§ï¼Œå› æ­¤è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªè§£å†³é—®é¢˜çš„å®Œç¾æ–¹æ¡ˆã€‚

#### toString()
æ¯ç§å¼•ç”¨æ•°æ®ç±»å‹éƒ½ä¼šç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ªObjectç±»å‹ï¼Œå› æ­¤å®ƒä»¬éƒ½åŒ…å«toString()å‡½æ•°ã€‚

ä¸åŒæ•°æ®ç±»å‹çš„toString()å‡½æ•°è¿”å›å€¼ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥é€šè¿‡toString()å‡½æ•°å°±å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡ã€‚

å€ŸåŠ©call()å‡½æ•°ï¼Œç›´æ¥è°ƒç”¨ObjectåŸå‹ä¸Šçš„toString()å‡½æ•°ï¼ŒæŠŠä¸»ä½“è®¾ç½®ä¸ºéœ€è¦ä¼ å…¥çš„å˜é‡ï¼Œç„¶åé€šè¿‡è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ã€‚

```js
var a = [1, 2, 3];
var b = { name: 'ming' };
console.log(Object.prototype.toString.call(a)); // [Object Array]
console.log(Object.prototype.toString.call(b)); // [Object Object]
// å…¶å®ä»»ä½•ç±»å‹çš„å˜é‡åœ¨è°ƒç”¨toString()å‡½æ•°æ—¶ï¼Œéƒ½ä¼šè¿”å›ä¸åŒçš„ç»“æœã€‚
Object.prototype.toString.call(1);  // [object Number]
Object.prototype.toString.call('ming'); // [object String]
var c;
Object.prototype.toString.call(c);  // [object undefined]
```
å°è£…å‡½æ•°
```js
function getDataType(o) {
  var result = Object.prototype.toString.call(o);
  if (result === '[object Array]') {
    return 'Array';
  } else if (result === '[object Object]') {
    return 'Object'
  } else {
    return 'param is not object type';
  }
}
```

#### Array.isArray()ğŸ’¥
åœ¨JavaScript 1.8.5ç‰ˆæœ¬ä¸­ï¼Œæ•°ç»„å¢åŠ äº†ä¸€ä¸ªisArray()é™æ€å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºæ•°ç»„ã€‚
```js
// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å›â€œtrueâ€
Array.isArray([]);
Array.isArray([1]);
Array.isArray(new Array());
// é²œä¸ºäººçŸ¥çš„äº‹å®ï¼šå…¶å® Array.prototype ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚
Array.isArray(Array.prototype);
 
// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å›â€œfalseâ€
Array.isArray();
Array.isArray({});
Array.isArray(null);
Array.isArray(undefined);
Array.isArray(17);
Array.isArray('Array');
Array.isArray(true);
```
ä½¿ç”¨Array.isArray()å‡½æ•°åªèƒ½åˆ¤æ–­å‡ºå˜é‡æ˜¯å¦ä¸ºæ•°ç»„ï¼Œå¹¶ä¸èƒ½ç¡®å®šæ˜¯å¦ä¸ºå¯¹è±¡ã€‚


### filter(() => {})
> ç”¨äºè¿‡æ»¤å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œ**ä¸ä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„**
() => { true(ä¿ç•™) âœ… false(èˆå¼ƒ) âŒ }
å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼åˆ™è¿”å›ç©ºæ•°ç»„ã€‚

#### æ‰¾å¯„æ•°
```js
var filterFn = function (x) {
  return x % 2;
}
var arr = [1, 2, 4, 5, 6, 9, 10 ,15];
var result = arr.filter(filterFn);
console.log(result); // [1. 5, 9, 15]
```

#### å¹´é¾„å¤§äº18å²çš„ç”·ç”Ÿ
```js
var arrObj = [{
   gender: 'ç”·',
   age: 20
}, {
   gender: 'å¥³',
   age: 19
}, {
   gender: 'ç”·',
   age: 14
}, {
   gender: 'ç”·',
   age: 16
}, {
   gender: 'å¥³',
   age: 17
}];
var filterFn = function(obj) {
  return obj.gender ==== 'ç”·' && obj.age > 18;
}
```

### reduce()ğŸ‰ğŸ‰ğŸ‰
> arr.reduce(callback[, initialValue]);

æœ€ä¸»è¦çš„ä½œç”¨æ˜¯åšç´¯åŠ å¤„ç†ï¼Œå³æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œå°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä»å·¦åˆ°å³ä¾æ¬¡æ‰§è¡Œç´¯åŠ å™¨ï¼Œè¿”å›æœ€ç»ˆçš„å¤„ç†ç»“æœã€‚

#### æ±‚å’Œ
```js
var arr = [1, 2, 3, 4, 5];
var sum = arr.reduce(function (accumulator, currentValue) {
  return accumulator + currentValue;
}, 0);
console.log(sum);
```

#### ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°
```js
var arr = [1, 2, 3, 2, 2, 5, 1];
var res = arr.reduce(function(accumulator, current) {
  // if (current.hasOwnProperty(accumulator)) {âŒ
  if (accumulator[current]) {
    // current.accumulator += 1;âŒ
    accumulator[current]++;
  } else {
    // current.accumulator = 1;âŒ
    accumulator[current] = 1;
  }
  return accumulator;
}, {})
console.log(res);

var res = arr.reduce(function(accumulator, currentValue) {
  accumulator[currentValue] ? 
  accumulator[currentValue]++ :
  accumulator[currentValue] = 1;
  return accumulator;
}, {});
console.log(res);
```

#### å¤šç»´åº¦ç»Ÿè®¡æ•°æ®ğŸ§¨
ç¾å…ƒæ¬§å…ƒæ¢ç®—
ç¾å…ƒæ±‡ç‡ä¸º1:0.1478ï¼Œäººæ°‘å¸ï¼šæ¬§å…ƒæ±‡ç‡ä¸º1:0.1265ã€‚é€šè¿‡ä¸€å®šçš„ç®—æ³•ï¼Œéœ€è¦è®¡ç®—å‡ºè¿™äº›äººæ°‘å¸å€¼å¯¹åº”çš„ç¾å…ƒæ˜¯23.792ï¼Œå¯¹åº”çš„æ¬§å…ƒæ˜¯20.240ã€‚å°†ä¸€ç»„äººæ°‘å¸çš„å€¼åˆ†åˆ«æ¢ç®—æˆç¾å…ƒå’Œæ¬§å…ƒçš„ç­‰é‡å€¼ã€‚
```js
var reducer = {
  totallnEuros: function(state, item) {
    return state.euros += item.price * 0.1265;
  },
  totallnDollars: function(state, item) {
    return state.dollars += item.price * 0.1487;
  }
}

var manageReducers = function(reducers) {
  return function(state, item) {
    return Object.keys(reducers).reduce(
      function(nextState, key) {
        reducers[key](state, item);
        return state;
      },
      {}
    );
  }
};

var bigTotalPriceReducer = manageReducers(reducers);
var initialState = { euros: 0, dollars: 0 };
var totals = items.reduce(bigTotalPriceReducer, initialState);
console.log(totals);
```

### æœ€å¤§æœ€å°å€¼
#### é€šè¿‡prototypeå±æ€§æ‰©å±•minå‡½æ•°å’Œmaxå‡½æ•°
```js
// min
Array.prototype.min = function() {
  var ming = this[0];
  var len = this.length;
  for (var i = 1; i < len; i++) {
    if (this[i] < min) {
      min = this[i];
    }
  }
  return min;
}
// max
Array.prototype.max = function() {
  var max = this[0];
  var len = this.length;
  for (var i = 1; i < len; i++) {
    if (this[i] > max) {
      max = this[i];
    }
  }
  return max;
}
var arr1 = [2, 4, 10, 7, 5, 8, 6];
console.log(arr1.min()); // 2
console.log(arr1.max()); // 10
```

#### å€ŸåŠ©Mathå¯¹è±¡çš„min()å’Œmax()å‡½æ•°
```js
Array.max = function(array) {
  return Math.max.apply(Math, array);
}
Array.min = function(array) {
  return Math.min.apply(Math, array);
}
var arr1 = [2, 4, 10, 7, 5, 8, 6];
console.log(arr1.min()); // 2
console.log(arr1.max()); // 10
```

#### ä¼˜åŒ–ä¸Šä¸€ä¸ª
> å°†min()å‡½æ•°å’Œmax()å‡½æ•°ä½œä¸ºArrayç±»å‹çš„é™æ€å‡½æ•°ï¼Œä½†å¹¶ä¸æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹è±¡å­—é¢é‡è¿›è¡Œç®€åŒ–ã€‚
```js
Array.prototype.max = function() {
  return Math.max.apply({}, this);
}
Array.prototype.min = function() {
  return Math.min.apply({}, this);
}
// ä¸ä¸Šä¸€ä¸ªç®—æ³•ä¸åŒçš„æ˜¯ï¼Œåœ¨éªŒè¯æ—¶å› ä¸ºmin()å‡½æ•°å’Œmax()å‡½æ•°å±äºå®ä¾‹æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡æ•°ç»„è°ƒç”¨ã€‚
var arr3 = [2, 4, 10, 7, 5, 8, 6];
console.log(arr3.min());  // 2
console.log(arr3.max());  // 10
```
ä¸Šé¢çš„ç®—æ³•ä»£ç ä¸­apply()å‡½æ•°ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå€¼ä¸º{}ï¼Œå®é™…è¡¨ç¤ºå½“å‰æ‰§è¡Œç¯å¢ƒçš„å…¨å±€å¯¹è±¡ã€‚ç¬¬äºŒä¸ªå‚æ•°thisæŒ‡å‘éœ€è¦å¤„ç†çš„æ•°ç»„ã€‚

ç”±äºapply()å‡½æ•°çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¾—åˆ°å…¶ä»–å‡ ç§å®ç°æ–¹æ³•ã€‚å°†apply()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºnullã€undefinedæˆ–{}éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„æ•ˆæœã€‚
```js
// æœ€å¤§å€¼
Array.prototype.max = function() {
   return Math.max.apply(null, this);
 };
// æœ€å°å€¼
Array.prototype.min = function() {
   return Math.min.apply(null, this);
};
```

#### å€ŸåŠ©Arrayç±»å‹çš„reduce()å‡½æ•°
reduce()å‡½æ•°ä¸è®¾ç½®initialValueåˆå§‹å€¼ï¼Œå°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›´æ¥ä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸åé¢çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚å½“éœ€è¦æ‰¾æœ€å¤§å€¼æ—¶ï¼Œæ¯è½®ç´¯åŠ å™¨è¿”å›å½“å‰æ¯”è¾ƒä¸­å¤§çš„å€¼ï¼›å½“éœ€è¦æ‰¾æœ€å°å€¼æ—¶ï¼Œæ¯è½®ç´¯åŠ å™¨è¿”å›å½“å‰æ¯”è¾ƒä¸­å°çš„å€¼ã€‚

```js
Array.prototype.max = function () {
  return this.reduce(function (preValue, curValue) {
    return preValue > curValue ? preValue : curValue;
  });
}
Array.prototype.min = function () {
  return this.reduce(function (preValue, curValue) {
    return preValue > curValue ? curValue : preValue;
  });
}

var arr4 = [2,4,10,7,5,8,6];
console.log(arr4.min()); // 2
console.log(arr4.max()); // 10
```

#### å€ŸåŠ©Arrayç±»å‹çš„sort()å‡½æ•°
å€ŸåŠ©æ•°ç»„åŸç”Ÿçš„sort()å‡½æ•°å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ’åºå®Œæˆåé¦–å°¾å…ƒç´ å³æ˜¯æ•°ç»„çš„æœ€å°ã€æœ€å¤§å…ƒç´ ã€‚

é»˜è®¤çš„sort()å‡½æ•°åœ¨==æ’åºæ—¶æ˜¯æŒ‰ç…§å­—æ¯é¡ºåºæ’åºçš„ï¼Œæ•°å­—éƒ½ä¼šæŒ‰ç…§å­—ç¬¦ä¸²å¤„ç†==ã€‚

é»˜è®¤æ’åºæ˜¯å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§å®ƒä»¬çš„ UTF-16 ç å…ƒå€¼å‡åºæ’åºã€‚

ä¾‹å¦‚æ•°å­—11ä¼šè¢«å½“ä½œ"11"å¤„ç†ï¼Œæ•°å­—8ä¼šè¢«å½“ä½œ"8"å¤„ç†ã€‚
åœ¨æ’åºæ—¶æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²çš„æ¯ä¸€ä½è¿›è¡Œæ¯”è¾ƒçš„ï¼Œå› ä¸º"1"æ¯”"8"è¦å°ï¼Œæ‰€ä»¥"11"åœ¨æ’åºæ—¶è¦æ¯”"8"å°ã€‚
å¯¹äºæ•°å€¼ç±»å‹çš„æ•°ç»„æ¥è¯´ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰æ’åºå‡½æ•°ã€‚
```js
var sortFn = function(a, b) {
  return a - b;
};
var arr5 = [2, 4, 10, 7, 5, 8, 6];
var sortArr = arr5.sort(sortFn);
// æœ€å°å€¼
console.log(sortArr); // 2
// æœ€å¤§å€¼
console.log(sortArr[sortArr.length - 1]); // 10
```

#### å€ŸåŠ©ES6çš„æ‰©å±•è¿ç®—ç¬¦
ES6ä¸­å¢åŠ çš„æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ï¼Œå°†æ•°ç»„ç›´æ¥é€šè¿‡Math.min()å‡½æ•°ä¸Math.max()å‡½æ•°çš„è°ƒç”¨ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚
```js
var arr6 = [2, 4, 10, 7, 5, 8 , 6];
console.log(Math.min(...arr6)); // æœ€å°å€¼
console.log(Math.max(...arr6)); // æœ€å¤§å€¼
```

### æ•°ç»„éå†çš„7ç§æ–¹æ³•åŠå…¼å®¹æ€§å¤„ç†ï¼ˆpolyfillï¼‰
#### for
```js
var arr1 = [11, 22, 33];
for (var i = 0; i < arr1.length; i++) {
  console.log(arr1[i]);
}
// 11 22 33
```

#### forEach
```js
var arr2 = [11, 22, 33];
arr2.forEach(function(element, index, array) {
  console.log(element);
})
// 11 22 33
```
> forEach()å‡½æ•°æ˜¯åœ¨ES5ä¸­æ–°æ·»åŠ çš„ï¼Œå®ƒå¯èƒ½ä¸å…¼å®¹åªæ”¯æŒä½ç‰ˆæœ¬JSçš„æµè§ˆå™¨ï¼Œè¿™é‡Œæˆ‘ä»¬æä¾›ä¸€ä¸ªpolyfillæ¥å®ç°ã€‚

é€šè¿‡forå¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­åˆ¤æ–­thiså¯¹è±¡ï¼Œå³æ•°ç»„æœ¬èº«æ˜¯å¦åŒ…å«éå†çš„ç´¢å¼•ã€‚å¦‚æœåŒ…å«åˆ™åˆ©ç”¨call()å‡½æ•°å»è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œä¼ å…¥å›è°ƒå‡½æ•°æ‰€éœ€è¦çš„å‚æ•°ã€‚
```js
Array.prototype.forEach = Array.prototype.forEach || function (fn, context) {
  for (var k = 0, length = this.length; k < length; k++) {
    if (typeof fn === 'function' && Object.prototype.hasOwnProperty.call(this, kk)) {
      fn.call(context, this[k], k, this);
    }
  }
};
```

#### map
å°†ä¸€ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åšå¹³æ–¹è¿ç®—
```js
var arr3 = [1, 2, 3];
var arrayOfSquares = arr3.map(function (element) {
  return element * element;
})
console.log(arrayOfSquares);
```
åŒforEach()å‡½æ•°ä¸€æ ·ï¼Œmap()å‡½æ•°åŒæ ·éœ€è¦æä¾›polyfillçš„å¤„ç†ã€‚

map()å‡½æ•°æœ€ç»ˆä¼šåœ¨è¿ç®—åå¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚åªéœ€è¦äº‹å…ˆå®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨å¾ªç¯ä¸­é€šè¿‡call()å‡½æ•°è°ƒç”¨å›è°ƒå‡½æ•°å¾—åˆ°è¿”å›å€¼ï¼Œå°†è¿™ä¸ªè¿”å›å€¼pushåˆ°æ•°ç»„ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ªæ•°ç»„å³å¯ã€‚
```js
Array.prototype.map = Array.prototype.map || function (fn, context) {
  var arr = [];
  if (typeof fn === 'function') {
    for (var k = 0, length = this.length; k < length; k++) {
      if (typeof fn === 'function' && Object.prototype.hasOwnProperty.call(this, k)) {
        arr.push(fn.call(context, this[k], k, this));
      }
    }
  }
  return arr;
}
```

#### filter
```js
Array.prototype.filter = Array.prototype.filter || function (fn, context) {
  var arr = [];
  if (typeof fn === 'function') {
    for (var k = 0, length = this.length; k < length; k++) {
      if (typeof fn === 'function' && Object.prototype.hasOwnProperty.call(this, k)) {
        fn.call(context, this[k], k, this) && arr.push(this[k]);
      }
    }
  }
  return arr;
}
```

#### some()ä¸every()
- some()å‡½æ•°åªè¦æ•°ç»„ä¸­**æŸä¸ª**å…ƒç´ æ»¡è¶³æ¡ä»¶å°±è¿”å›â€œtrueâ€
- every()å‡½æ•°æ˜¯æ•°ç»„ä¸­**æ¯ä¸ª**å…ƒç´ éƒ½è¦æ»¡è¶³æ¡ä»¶æ—¶æ‰è¿”å›â€œtrueâ€

```js
function isBigEnough(element, index, array) {
  return element > 4;
}

var passed1 = [1,2,3,4].some(isBigEnough); // false
var passed2 = [1,2,3,4, 5].some(isBigEnough); // true

var passed3 = [2,3,4].every(isBigEnough); // false
var passed4 = [5, 6].every(isBigEnough); // true
```
some()å‡½æ•°ä¸every()å‡½æ•°çš„å…¼å®¹æ€§å¤„ç†å¾ˆç±»ä¼¼ã€‚
some()å‡½æ•°æ˜¯å¯¹trueçš„åˆ¤æ–­ï¼Œå¦‚æœæŸä¸ªå¤„ç†è¿”å›äº†â€œtrueâ€ï¼Œåˆ™ç›´æ¥è¿”å›â€œtrueâ€ï¼Œå¦åˆ™è¿”å›æœ€åä¸€æ¬¡è¿­ä»£çš„ç»“æœã€‚
è€Œevery()å‡½æ•°æ˜¯å¯¹falseçš„åˆ¤æ–­ï¼Œå¦‚æœæŸä¸ªå¤„ç†è¿”å›äº†â€œfalseâ€ï¼Œåˆ™æœ€ç»ˆè¿”å›â€œfalseâ€ï¼Œå¦åˆ™è¿”å›æœ€åä¸€æ¬¡è¿­ä»£çš„ç»“æœã€‚
```js
Array.prototype.some = Array.prototype.some || function(fn, context) {
  var passed = false;
  if (typeof fn === 'function' && Object.prototype.hasOwnProperty.call(this, k)) {
    for (var k = 0, length = this.length; k < length; k++) {
      if (passed === true) break;
      passed = !!fn.call(context, this[k], k, this);
    }
  }
  return passed;
}

Array.prototype.every = Array.prototype.every || function(fn, context) {
 var passed = true;
  if (typeof fn === 'function' && Object.prototype.hasOwnProperty.call(this, k)) {
    for (var k = 0, length = this.length; k < length; k++) {
      if (passed === false) break;
      passed = !!fn.call(context, this[k], k, this);
    }
  }
  return passed;
}
```

#### [reduce](#å€ŸåŠ©Arrayç±»å‹çš„reduce()å‡½æ•°)
```js
Array.prototype.reduce = Array.prototype.reduce || function(callback, initialValue) {
  var previous = initialValue, k = 0, length = this.length;
  if (typeof initialValue === 'undefined') {
    previous = this[0];
    k = 1;
  }
  if (typeof callback === 'function') {
    for (k; k < length, k++) {
      this.hasOwnProperty(k) && (pervious = callback(previous, this[k], k, this));
    }
  }
  return previous;
}
```

#### find
```js
var value = [1, 5, 10, 15].find(function (element, index, array) { return element > 9; }); // 10
var value2 = [1, 5, 10, 15].find(function (element, index, array) { return element > 92; }); // undefined
```
find()å‡½æ•°å’Œå‰é¢å…¶ä»–å‡½æ•°çš„polyfillå®ç°æ–¹æ³•ä¸€æ ·ï¼Œåªéœ€ä¿®æ”¹è¿”å›å€¼å³å¯ã€‚
```js
Array.prototype.find = Array.prototype.find || function(fn, context) {
  if(typeof fn === 'function') {
    for (var k = 0, length = this.length; k < length; k++) {
      if (fn.call(context, this[k], k, this)) {
        return this[k];
      }
    }
  }
  // è¿™å¥æ˜¯æ— ç”¨
  // return undefined
}
```

### æ•°ç»„å»é‡çš„7ç§ç®—æ³•
#### éå†æ•°ç»„
åœ¨å‡½æ•°å†…éƒ¨æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¯¹ä¼ å…¥çš„æ•°ç»„è¿›è¡Œéå†ã€‚å¦‚æœéå†çš„å€¼ä¸åœ¨æ–°æ•°ç»„ä¸­å°±æ·»åŠ è¿›å»ï¼Œå¦‚æœå·²ç»å­˜åœ¨å°±ä¸åšå¤„ç†ã€‚
```js
function arrayUnique(array) {
  var result = [];
  for (var i = 0; i < array.length; i++) {
    if (result.indexOf(array[i]) === -1) {
      result.push(array[i]);
    }
  }
  return result;
}
```

#### åˆ©ç”¨å¯¹è±¡é”®å€¼å¯¹
æ–°å»ºä¸€ä¸ªJSå¯¹è±¡ä»¥åŠä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¯¹ä¼ å…¥çš„æ•°ç»„è¿›è¡Œéå†ï¼Œåˆ¤æ–­å½“å‰éå†çš„å€¼æ˜¯å¦ä¸ºJSå¯¹è±¡çš„é”®ã€‚å¦‚æœæ˜¯ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ å·²å‡ºç°è¿‡ï¼Œåˆ™ä¸åšå¤„ç†ï¼›å¦‚æœä¸æ˜¯ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œåˆ™ç»™è¯¥JSå¯¹è±¡æ’å…¥è¯¥é”®ï¼ŒåŒæ—¶æ’å…¥æ–°çš„æ•°ç»„ï¼Œæœ€ç»ˆè¿”å›æ–°çš„æ•°ç»„ã€‚
```js
function arrayUnique2(array) {
  var obj = {}, result = [], val, type;
  for (var i = 0; i < array.length; i++) {
    val = array[i];
    if (!obj[val]) {
      obj[val] = 'yes';
      result.push(val);
    }
  }
  return result;
}
```
ç¼ºé™·ç®—æ³•ï¼šä¼šå°†å­—ç¬¦ä¸²1å’Œæ•°å­—1è¯†åˆ«ä¸ºç›¸åŒçš„KEY
```js
function arrayUnique2(array) {
  var obj = {}, result = [], val, type;
  for (var i = 0; i < array.length; i++) {
    val = array[i];
    type = typeof val;
    if (!obj[val]) {
      obj[val] = [type];
      result.push(val);
    } else if (obj[val].indexOf(type) < 0) {
      obj[val].push(type);
      result.push(val);
    }
  }
  return result;
}
```
#### å…ˆæ’åºï¼Œå†å»é‡
```js
function arrayUnique3(array) {
  var result = [array[0]];
  array.sort(function(a, b){ return a - b });
  for (var i = 0; i < array.length; i++) {
    if (array[i] !== result[result.length - 1]) {
      result.push(array[i]);
    }
  }
  return result;
}
```
#### ä¼˜å…ˆéå†æ•°ç»„
```js
function arrayUnique3(array) {
  var result = [];
  for (var i = 0, l = array.length; i < array.length; i++) {
    for (var j = i + 1; i < l; j++) {
      if (array[i] === array[j]) {
        j = ++i;
      }
    }
    result.push(array[i]);
  }
  return result;
}
```

#### reduce
```js
function arrayUnique5(array) {
  var obj = {}, type;
  return array.reduce(function (preValue, curValue) {
    type = typeof curValue;
    if (!obj[curValue]) {
      obj[curValue] = [type];
      preValue.push(curValue);
    } else if (obj[curValue].indexOf(type) < 0) {
      obj[curValue].push(type);
      preValue.push(curValue);
    }
    return preValue;
  }, [])
}
```

#### å€ŸåŠ©ES6çš„Setæ•°æ®ç»“æ„
åœ¨ES6ä¸­ï¼ŒSetæˆå‘˜å”¯ä¸€ï¼Œå…·æœ‰è‡ªåŠ¨å»é‡çš„åŠŸèƒ½ã€‚Arrayç±»å‹å¢åŠ äº†ä¸€ä¸ªfrom()å‡½æ•°ï¼Œç”¨äºå°†ç±»æ•°ç»„å¯¹è±¡è½¬åŒ–ä¸ºæ•°ç»„ã€‚
```js
function arrayUnique6(array) {
  return Array.from(new Set(array));
}
```

#### å€ŸåŠ©ES6çš„Mapæ•°æ®ç»“æ„
```js
function arrayUnique7(array) {
  var map = new Map();
  return array.filter(item => !map.has(item) && map.set(item, 1));
}
```

### æ‰¾å‡ºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ 
#### åˆ©ç”¨é”®å€¼å¯¹
```js
function findMost1(arr) {
  if (!arr.length) return;
  if (arr.length === 1) return 1;
  var res = {};
  for (var i = 0, l = arr.length; i < l; i++) {
    if (!res[arr[i]]) {
      res[arr[i]] = 1;
    } else {
      res[arr[i]]++;
    }
  }
}
var keys = Object.keys(res);
var maxNum = 0, maxEle;
for (var i = 0, l = keys.length; i < l; i++) {
  if (res[keys[i]] > maxNum) {
    maxNum = res[keys[i]];
    maxEle = keys[i];
  }
  return 'å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ä¸ºï¼š' + maxEle + ', å‡ºç°æ¬¡æ•°ä¸ºï¼š' + maxNum;
}

var arr1 = [3, 5, 6, 5, 9, 8, 10, 5, 7, 7, 10, 7, 7, 10, 10, 10, 10, 10];
console.log(findMost1(arr1));
```

#### ä¼˜åŒ–ä¸Šé¢
```js
function findMost2(arr) {
  var h = {};
  var maxNum = 0;
  var maxEle = null;
  for (var i = 0; i < arr.length; i++) {
    var a = arr[i];
    h[a] === undefined ? h[a] = 1 : (h[a]++);
    if (h[a] > maxNum) {
      maxEle = a;
      maxNum = h[a];
    }
  }
  return 'å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ä¸ºï¼š' + maxEle + ', å‡ºç°æ¬¡æ•°ä¸ºï¼š' + maxNum;
}
var arr2 = [3, 5, 6, 5, 9, 8, 10, 5, 7, 7, 10, 7, 7, 10, 10, 10, 10, 10];
console.log(findMost2(arr2));
```
> è°ˆè°ˆåŒºåˆ«ï¼Ÿ

#### reduce()å‡½æ•°
```js
function findMost3(arr) {
  var maxEle;
  var maxNum = 1;
  var obj = arr.reduce(function(p, k){
    p[k] ? p[k]++ : p[k] = 1;
    if (p[k] > maxNum) {
      maxEle = k;
      maxNum++;
    }
    return p;
  }, {});
  return 'å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ä¸ºï¼š' + maxEle + ', å‡ºç°æ¬¡æ•°ä¸ºï¼š' + obj[maxEle];
}
var arr3 = [3, 5, 6, 5, 9, 8, 10, 5, 7, 7, 10, 7, 7, 10, 10, 10, 10, 10];
console.log(findMost3(arr3));
```
#### å€ŸåŠ©ES6ä¸é€—å·è¿ç®—ç¬¦è¿›è¡Œä¸Šé¢çš„ä»£ç ä¼˜åŒ–ğŸ‡
```js
Array.protocol.getMost4 = function () {
  var obj = this.reduce((p, n) => 
    (p[n]++ || (p[n] = 1), (p.max = p.max >= p[n] ? p.max : p[n]),
    (p.key = p.max > p[n] ? p.key : n), p),    
  {});
  return 'å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ä¸ºï¼š' + obj.key + ', å‡ºç°æ¬¡æ•°ä¸ºï¼š' + obj.max;
}
var arr4 = [3, 5, 6, 5, 9, 8, 10, 5, 7, 7, 10, 7, 7, 10, 10, 10, 10, 10];
console.log(arr4.getMost4());
```

## Date
### æ—¥æœŸæ ¼å¼åŒ–
æ—¥æœŸæ ¼å¼åŒ–çš„ä¸»è¦ç›®çš„æ˜¯ä»¥å¯¹ç”¨æˆ·å‹å¥½çš„å½¢å¼ï¼Œå°†æ—¥æœŸã€æ—¶é—´ç­‰æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚
ä¾‹å¦‚2018å¹´7æœˆ31æ—¥12ç‚¹23åˆ†34ç§’ï¼Œå¸¸è§çš„å±•ç¤ºå½¢å¼ä¸ºâ€œ2018-07-31 12:23:34â€ï¼Œ

ä¸‹é¢å°†å±•ç¤º3ç§å®ç°æ–¹æ³•ã€‚
#### åŸºäºä¸¥æ ¼çš„æ—¶é—´æ ¼å¼è§£æ
```js
/**
  * æ–¹æ³•1
  * @description å¯¹Dateçš„æ‰©å±•ï¼Œå°† Date è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„String
  *  æœˆ(MM)ã€æ—¥(dd)ã€å°æ—¶(HH)ã€åˆ†(mm)ã€ç§’(ss)å›ºå®šç”¨ä¸¤ä¸ªå ä½ç¬¦
  *  å¹´(yyyy)å›ºå®šç”¨4ä¸ªå ä½ç¬¦
  * @param fmt
  * @example 
  *   (new Date()).format("yyyy-MM-dd HH:mm:ss") // 2018-07-31 20:09:04
  *   (new Date()).format("yyyy-MM-dd") // 2018-07-31 20:08
  * @returns {*}
  */
Date.prototype.format = function(pattern) {
  function zeroize(num) {
    return num < 10 ? "0" + num : num;
  }
  var pattern = pattern;
  var dateObj = {
    "y": this.getFullYear(),
    "M": zeroize(this.getMonth() + 1),
    "d": zeroize(this.getDate()),
    "H": zeroize(this.getHour()),
    "m": zeroize(this.getMinutes()),
    "s": zeroize(this.getSeconds())
  };
  return pattern.replace(/yyyy|MM|dd|HH|mm|ss/g, function(match) {
    switch(match) {
      case "yyyy": 
        return dateObj.y;
      case "MM":
        return dateObj.M;
      case "dd": 
        return dateObj.d;
      case "HH":
        return dateObj.H;
      case "mm":
        return dateObj.m;
      case "ss":
        return dateObj.s;
    }
  })
}
var d = new Date();
console.log(d.format('yyyy-MM-dd HH:mm:ss')); // 2017-11-26 15:50:00
console.log(d.format('yyyy-MM-dd')); // 2017-11-26
console.log(d.format('yyyy-MM-dd HH:mm')); // 2017-11-26 15:50
```

#### ä¼˜åŒ–ä¸Šé¢
```js
/**
  * æ–¹æ³•2
  * @description å¯¹Dateçš„æ‰©å±•ï¼Œå°† Date è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„String
  *  æœˆ(M)ã€æ—¥(d)ã€å°æ—¶(H)ã€åˆ†(m)ã€ç§’(s)ã€å­£åº¦(q) å¯ä»¥ç”¨ 1~2 ä¸ªå ä½ç¬¦ï¼Œ
  *  å¹´(y)å¯ä»¥ç”¨ 1~4 ä¸ªå ä½ç¬¦ï¼Œæ¯«ç§’(S)åªèƒ½ç”¨ 1 ä¸ªå ä½ç¬¦(æ˜¯ 1~3 ä½çš„æ•°å­—)
  * @param fmt
  * @example    
  * * (new Date()).format("yyyy-MM-dd HH:mm:ss") // 2018-07-31 20:09:04
  *   (new Date()).format("yyyy-M-d H:m")  // 2018-07-31 20:09
  * @returns {*}
  */
Date.prototype.format = function (fmt) {
   var o = {
       "M+": this.getMonth() + 1, //æœˆä»½
       "d+": this.getDate(), //æ—¥
       "H+": this.getHours(), //å°æ—¶
       "m+": this.getMinutes(), //åˆ†
       "s+": this.getSeconds(), //ç§’
       "q+": Math.ï¬‚oor((this.getMonth() + 3) / 3), //å­£åº¦
       "S": this.getMilliseconds() //æ¯«ç§’
   };
   if (/(y+)/.test(fmt))
     fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
   for (var k in o)
       if (new RegExp("(" + k + ")").test(fmt))
         fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
   return fmt;
};

var d = new Date();
console.log(d.format('yyyy-MM-dd HH:mm:ss.S')); // 2017-11-26 14:46:13.894
console.log(d.format('yyyy-MM-dd')); // 2017-11-26
console.log(d.format('yyyy-MM-dd q HH:mm:ss')); // 2017-11-26 4 14:46:13
```

#### Moment.js
Moment.jsæœ‰å¤šç§ä¸åŒçš„å®‰è£…æ–¹æ³•ã€‚
```bash
bower install moment --save  # bower
npm install moment --save    # npm
Install-Package Moment.js    # NuGet
spm install moment --save    # spm
meteor add moment:moment     # meteor
```
Moment.jsä¸»è¦é€šè¿‡ä¼ é€’ä¸åŒçš„å­—ç¬¦ä¸²æ ¼å¼æ¥è¾“å‡ºå¯¹åº”çš„æ—¶é—´ã€‚
```js
moment().format('MMMM Do YYYY, h:mm:ss a'); // ä¸ƒæœˆ 31æ—¥ 2018, 10:33:34 æ™šä¸Š
moment().format('dddd');                    // æ˜ŸæœŸäºŒ
moment().format("MMM Do YY");               // 7æœˆ 31æ—¥ 18
moment().format('YYYY [escaped] YYYY');     // 2018 escaped 2018
```

### æ—¥æœŸåˆæ³•æ€§æ ¡éªŒ
çœŸå®åœºæ™¯å¦‚ä¸‹æ‰€è¿°ã€‚
å‡å¦‚éœ€è¦ç”¨æˆ·è¾“å…¥äº§å“çš„ä¿è´¨æœŸæ—¶ï¼Œè¾“å…¥çš„å€¼ä¸º2018-09-40ï¼Œé‚£ä¹ˆå°†è¿”å›â€œfalseâ€ï¼Œå› ä¸º9æœˆä»½ä¸å­˜åœ¨40å·ï¼Œå®ƒæ˜¯ä¸€ä¸ªéæ³•çš„æ—¥æœŸæ•°æ®ã€‚

æ ¡éªŒæ—¥æœŸåˆæ³•æ€§çš„ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†æ­£åˆ™è¡¨è¾¾å¼æŒ‰åˆ†ç»„å¤„ç†ï¼ŒåŒ¹é…åˆ°ä¸åŒä½ç½®çš„æ•°æ®åï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„ã€‚åˆ©ç”¨æ•°ç»„çš„æ•°æ®æ„é€ ä¸€ä¸ªDateå¯¹è±¡ï¼Œè·å¾—Dateå¯¹è±¡çš„å¹´ã€æœˆã€æ—¥çš„å€¼ï¼Œå†å»ä¸æ•°ç»„ä¸­è¡¨ç¤ºå¹´ã€æœˆã€æ—¥çš„å€¼æ¯”è¾ƒã€‚å¦‚æœéƒ½ç›¸ç­‰çš„è¯åˆ™ä¸ºåˆæ³•çš„æ—¥æœŸï¼Œå¦‚æœä¸ç›¸ç­‰çš„è¯åˆ™ä¸ºä¸åˆæ³•çš„æ—¥æœŸã€‚

ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªæ—¥æœŸå€¼2018-09-40ï¼Œå°†å¹´ã€æœˆã€æ—¥çš„å€¼æ„é€ æˆä¸€ä¸ªæ–°çš„Dateå¯¹è±¡ï¼Œå³new Date(2018, 9, 40)ï¼Œè¿”å›çš„å®é™…Dateå€¼æ˜¯â€œ2019-10-09â€ã€‚åœ¨åˆ¤æ–­çš„æ—¶å€™ï¼Œæœˆä»½å€¼09!==10ï¼Œæ˜¯ä¸€ä¸ªéæ³•çš„æ—¥æœŸå€¼ã€‚
```js
function validateDate(str) {
  var reg = /^(\d+)-(\d{1,2})-(\d{1,2})$/;
  var r = str.match(reg);
  if (r == null) return false;
  r[2] = r[2] - 1;
  var d = new Date(r[1], r[2], r[3]);
  if (d.getFullYear() != r[1]) return false;
  if (d.getMonth() != r[2]) return false;
  if (d.getDate() != r[3]) return false;
  return true;
}
console.log(validateDate ('2018-08-20'));  // true
console.log(validateDate ('2018-08-40'));  // false
```

### æ—¥æœŸè®¡ç®—
æ¯”è¾ƒæ—¥æœŸå¤§å°ã€è®¡ç®—å½“å‰æ—¥æœŸå‰åNå¤©çš„æ—¥æœŸã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„æ—¶é—´å·®ã€‚

#### æ¯”è¾ƒæ—¥æœŸå¤§å°
çœŸå®åœºæ™¯å¦‚ä¸‹æ‰€è¿°ã€‚
  ä¸€ä¸ªå¼€å§‹æ—¶é—´ä¸º2018-07-31 7:30ï¼Œä¸€ä¸ªç»“æŸæ—¶é—´ä¸º2018-08-01 8:30ï¼Œéœ€è¦åˆ¤æ–­å¼€å§‹æ—¶é—´æ˜¯å¦åœ¨ç»“æŸä¹‹é—´ä¹‹å‰ã€‚

æ—¥æœŸå¤§å°æ¯”è¾ƒçš„ä¸»è¦æ€æƒ³æ˜¯åœ¨JavaScriptä¸­ï¼Œä»¥æ–œçº¿ï¼ˆ/ï¼‰ä½œä¸ºåˆ†éš”ç¬¦çš„æ—¶é—´ç±»å‹å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç›´æ¥è½¬æ¢ä¸ºDateç±»å‹å¯¹è±¡å¹¶ç›´æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå³å¯¹äºâ€œ2018-07-31 7:30â€ä¸â€œ2018-08-018:30â€ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­å‡ºå‰è€…æ¯”åè€…è¦å°ã€‚

å¸¸ç”¨çš„ä½œä¸ºæ—¶é—´ç±»å‹å­—ç¬¦ä¸²åˆ†éš”ç¬¦çš„æœ‰æ–œçº¿ï¼ˆ/ï¼‰å’ŒçŸ­æ¨ªçº¿ï¼ˆ-ï¼‰ï¼Œä½†æ˜¯ä¸åŒçš„æµè§ˆå™¨æ”¯æŒçš„ç¨‹åº¦ä¸åŒï¼Œ**ä¸ºäº†æœ€å¤§åŒ–å…¼å®¹ä¸åŒæµè§ˆå™¨çš„ç‰¹æ€§ï¼Œç»Ÿä¸€ä½¿ç”¨æ–œçº¿ä½œä¸ºæ—¶é—´ç±»å‹å­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦**ã€‚

```js
function CompareDate(dateStr1, dateStr2) {
  var date1 = dateStr1.replace(/-/g, '\/');
  var date2 = dateStr2.replace(/-/g, '\/'); 
  return new Date(date1) > new Date(date2);
}
var dateStr1 = "2018-07-30 7:31";
var dateStr2 = "2018-07-31 7:30";
var dateStr3 = "2018-08-01 17:31";
var dateStr4 = "2018-08-01 17:30";
CompareDate(dateStr1, dateStr2);  // false
CompareDate(dateStr3, dateStr4);  // true
```

#### è®¡ç®—å½“å‰æ—¥æœŸå‰åNå¤©çš„æ—¥æœŸ
çœŸå®åœºæ™¯å¦‚ä¸‹æ‰€è¿°ã€‚

  å‡å¦‚çŸ¥é“ä¸€ä¸ªæ—¥æœŸä¸º2018-08-01ï¼Œéœ€è¦æ±‚å‡ºè¯¥æ—¶æœŸå‰ã€å3å¤©çš„æ—¥æœŸã€‚å‰3å¤©æ—¥æœŸä¸º2018-07-29ï¼Œå3å¤©æ—¥æœŸä¸º2018-08-04ã€‚

è·å–å‰åNå¤©çš„æ—¥æœŸçš„ä¸»è¦æ€æƒ³æ˜¯å¯¹dateå€¼çš„è®¾ç½®ï¼Œåœ¨Dateå¯¹è±¡çš„å®ä¾‹å‡½æ•°ä¸­æä¾›setDate()å‡½æ•°ï¼Œç”¨äºè®¾ç½®æ—¥æœŸå€¼ã€‚å¯¹è¿”å›æ—¶é—´çš„æ ¼å¼è¿›è¡Œå¤„ç†ï¼Œæœˆä»½ä¸æ—¥æœŸä¸å¤Ÿ10çš„è¡¥å……0ï¼Œæ ‡ç­¾å­—ç¬¦ä¸²å¦‚2018-08-01è¿™ç§æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚

```js
function GetDateStr(AddDayCount) {
  var dd = new Date();
  dd.setDate(dd.getDate() + AddDayCount); // è·å–AddDayCountå¤©åçš„æ—¥æœŸ
  var y = dd.getFullYear();
  // è·å–å½“å‰æœˆä»½çš„æ—¥æœŸï¼Œä¸è¶³10è¡¥0
  var m = (dd.getMonth() + 1) < 10 ? "0" + (dd.getMonth() + 1) : (dd.getMonth() + 1);
  var d= dd.getDate() < 10 ? "0" + dd.getDate() : dd.getDate(); // è·å–å½“å‰å‡ å·ï¼Œä¸è¶³10è¡¥0
  return y + "-" + m + "-" + d;
}
```
ç„¶åé€šè¿‡ä¸€ç³»åˆ—çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚åŠå¹´å‰ã€3ä¸ªæœˆå‰ã€æ˜¨å¤©ã€ä»Šå¤©ã€æ˜å¤©ã€1ä¸ªæœˆåç­‰ã€‚
```js
console.log("åŠå¹´å‰ï¼š" + GetDateStr(-180)); // åŠå¹´å‰ï¼š2018-02-02
console.log("ä¸‰æœˆå‰ï¼š" + GetDateStr(-90));  // ä¸‰æœˆå‰ï¼š2018-05-03
console.log("ä¸€æœˆå‰ï¼š" + GetDateStr(-30));  // ä¸€æœˆå‰ï¼š2018-07-02
console.log("æ˜¨å¤©ï¼š" + GetDateStr(-1));     // æ˜¨å¤©ï¼š2018-07-31
console.log("ä»Šå¤©ï¼š" + GetDateStr(0));      // ä»Šå¤©ï¼š2018-08-01
console.log("æ˜å¤©ï¼š" + GetDateStr(1));      // æ˜å¤©ï¼š2018-08-02
console.log("åå¤©ï¼š" + GetDateStr(2));      // åå¤©ï¼š2018-08-03
console.log("ä¸€æœˆåï¼š" + GetDateStr(30));   // ä¸€æœˆåï¼š2018-08-31
console.log("ä¸‰æœˆåï¼š" + GetDateStr(90));   // ä¸‰æœˆåï¼š2018-10-30
console.log("åŠå¹´åï¼š" + GetDateStr(180));  // åŠå¹´åï¼š2019-01-28
```

#### è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„æ—¶é—´å·®
çœŸå®åœºæ™¯å¦‚ä¸‹æ‰€è¿°ã€‚
  ç»™å®šä¸¤ä¸ªæ—¥æœŸå€¼2018-07-30 18:12:34å’Œ2018-08-0120:17:30ï¼Œéœ€è¦ç¡®å®šè¿™ä¸¤ä¸ªæ—¶é—´åœ¨ä¸åŒç»´åº¦çš„æ—¶é—´å·®ã€‚ä¾‹å¦‚ä»¥å¤©çš„ç»´åº¦ï¼Œä¸¤è€…ç›¸å·®2å¤©ï¼›ä»¥å°æ—¶çš„ç»´åº¦ï¼Œä¸¤è€…ç›¸å·®39å°æ—¶ã€‚

è®¾è®¡çš„è§„åˆ™æ˜¯å‘ä¸‹å–æ•´æ³•ã€‚å¤§äº1å¤©ï¼Œä¸æ»¡2å¤©çš„æŒ‰ç…§1å¤©å¤„ç†ï¼›å¤§äº1å°æ—¶ï¼Œä¸æ»¡2å°æ—¶çš„æŒ‰ç…§1å°æ—¶å¤„ç†ã€‚

```js
function GetDateDiff(startTime, endTime, diffType) {
  // å°†yyyy-MM-ddçš„æ—¶é—´æ ¼å¼è½¬æ¢ä¸ºyyyy/MM/ddçš„æ—¶é—´æ ¼å¼
  startTime = startTime.replace(/\-/g, "/");
  endTime = endTime.replace(/\-/g, "/");
  // å°†è®¡ç®—é—´éš”ç±»å‹å­—ç¬¦è½¬æ¢ä¸ºå°å†™
  diffType = diffType.toLowerCase();
  var sTime = new Date(startTime);
  var eTime = new Date(endTime);
  // ä½œä¸ºé™¤æ•°çš„æ•°å­—
  var divNum = 1;
  switch (diffType) {
    case "second":
      divNum = 1000;
      break;
    case "minute":
      divNum = 1000 * 60;
      break;
    case "hour":
      divNum = 1000 * 3600;
      break;
    case "day":
      divNum = 1000 * 3600 * 24;
      break;
    default:
      break; 
  }
  return parseInt((eTime.getTime() - sTime.getTime()) / parseInt(divNum));
}
var result1 = GetDateDiï¬€("2018-07-30 18:12:34", '2018-08-01 9:17:30', "day");
var result2 = GetDateDiï¬€("2018-07-29 20:56:34", '2018-08-01 9:17:30', "hour");
console.log("ä¸¤è€…æ—¶é—´å·®ä¸ºï¼š" + result1 + "å¤©ã€‚");
console.log("ä¸¤è€…æ—¶é—´å·®ä¸ºï¼š" + result2 + "å°æ—¶ã€‚");
```