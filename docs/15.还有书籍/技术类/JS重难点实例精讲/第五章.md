# DOMä¸äº‹ä»¶
DOMæ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå…¨ç§°ä¸ºDocument Object Modelã€‚DOMç”¨ä¸€ä¸ªé€»è¾‘æ ‘æ¥è¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ ‘çš„æ¯ä¸ªåˆ†æ”¯ç»ˆç‚¹éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ç€å¯¹è±¡ã€‚
DOMæä¾›äº†å¯¹æ–‡æ¡£ç»“æ„åŒ–çš„è¡¨è¿°ï¼Œé€šè¿‡ç»‘å®šä¸åŒçš„äº‹ä»¶å¯ä»¥æ”¹å˜æ–‡æ¡£çš„ç»“æ„ã€æ ·å¼å’Œå†…å®¹ï¼Œä»è€Œèƒ½å®ç°â€œåŠ¨æ€â€çš„é¡µé¢ã€‚
## DOMé€‰æ‹©å™¨
### ä¼ ç»ŸåŸç”ŸJavaScripté€‰æ‹©å™¨
ä¸ºäº†èƒ½æ›´ç›´è§‚åœ°çœ‹åˆ°DOMé€‰æ‹©å™¨çš„æ•ˆæœï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªHTMLé¡µé¢ï¼Œç„¶åé€šè¿‡DOMé€‰æ‹©å™¨å®šä½å…ƒç´ ï¼Œæ”¹å˜å¯¹åº”çš„å±•ç¤ºå†…å®¹ã€‚

HTMLé¡µé¢ä¸­ä¸»è¦æ˜¯å®šä¹‰ä¸€ç³»åˆ—çš„ul-liæ ‡ç­¾ï¼Œç„¶åé€šè¿‡DOMé€‰æ‹©å™¨å®šä½liåå¹¶æ“ä½œå®ƒä»¬ï¼Œåˆå§‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
```html
<ul>
    <li>èŠ‚ç‚¹1.1</li>
    <li>èŠ‚ç‚¹1.2</li>
    <li>èŠ‚ç‚¹1.3</li>
    <li>èŠ‚ç‚¹1.4</li>
    <li>èŠ‚ç‚¹1.5</li>
    <li>èŠ‚ç‚¹1.6</li>
    <li>èŠ‚ç‚¹1.7</li>
</ul>
<ul>
    <li>èŠ‚ç‚¹2.1</li>
    <li>èŠ‚ç‚¹2.2</li>
    <li>èŠ‚ç‚¹2.3</li>
    <li>èŠ‚ç‚¹2.4</li>
    <li>èŠ‚ç‚¹2.5</li>
    <li>èŠ‚ç‚¹2.6</li>
    <li>èŠ‚ç‚¹2.7</li>
</ul>
```
#### é€šè¿‡idå®šä½
```html
<!-- idå”¯ä¸€ -->
<ul>
    <li id="one">èŠ‚ç‚¹1.1</li>
    <li id="one">èŠ‚ç‚¹1.2</li>
    <li>èŠ‚ç‚¹1.3</li>
    <li>èŠ‚ç‚¹1.4</li>
</ul>
```
å½“å…·æœ‰ç›¸åŒidçš„å…ƒç´ æ—¶ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ èƒ½è¢«åŒ¹é…åˆ°å¤–ï¼Œå…¶ä»–å…ƒç´ éƒ½ä¼šè¢«å¿½ç•¥ã€‚
```js
document.getElementById('one').innerText; // èŠ‚ç‚¹1.1
```
#### é€šè¿‡classå®šä½
> getElementsByClassName()å‡½æ•°ï¼Œé€šè¿‡ç±»åå®šä½å…ƒç´ ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„HTMLCollectionå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ç»“æ„ã€‚
```html
<li class="one">èŠ‚ç‚¹1.2</li>
<li class="one">èŠ‚ç‚¹1.3</li>
```
```js
document.getElementsByClassName('one');
// è¿”å›å€¼ä¸ºä¸€ä¸ªHTMLCollectionå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„ä¸¤ä¸ªliå…ƒç´ å€¼ã€‚
HTMLCollection(2) [li.one, li.one]
 - 0: li.one
 - 1: li.one
 - length: 2
 - __proto__:  HTMLCollection
```
#### é€šè¿‡nameå±æ€§å®šä½
> getElementsByName()å‡½æ•°ï¼Œé€šè¿‡å…ƒç´ çš„nameå±æ€§è¿›è¡Œå®šä½ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„NodeListå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ç»“æ„ã€‚
```html
<ul>
    <li id="one">èŠ‚ç‚¹1.1</li>
    <li name="node">èŠ‚ç‚¹1.4</li>
    <li name="node">èŠ‚ç‚¹1.5</li>
</ul>
<ul>
    <li name="node">èŠ‚ç‚¹2.1</li>
    <li>èŠ‚ç‚¹2.2</li>
</ul>
```

```js
document.getElementsByName('node');
// è¿”å›çš„å€¼ä¸ºä¸€ä¸ªNodeListå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„nameå±æ€§ä¸ºâ€œnodeâ€çš„å…ƒç´ ã€‚
NodeList(3) [li, li, li]
 - 0: li
 - 1: li
 - 2: li
 - length: 3
 -  __proto__:  NodeList
```
#### é€šè¿‡æ ‡ç­¾åå®šä½
> getElementsByTagName()å‡½æ•°ï¼Œé€šè¿‡æ ‡ç­¾åå®šä½å…ƒç´ ï¼Œè¿”å›ç”±åŒ¹é…åˆ°çš„å…ƒç´ æ„æˆçš„HTMLCollectionå¯¹è±¡ã€‚
```js
// é€šè¿‡æ ‡ç­¾åè·å–é¡µé¢ä¸Šçš„ä¸¤ä¸ªulå…ƒç´ ã€‚
document.getElementsByTagName('ul');
// è¿”å›å€¼ä¸ºä¸€ä¸ªHTMLCollectionå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«åŒ¹é…åˆ°çš„ä¸¤ä¸ªulå…ƒç´ å€¼ã€‚
HTMLCollection(2) [ul, ul]
- 0: ul
- 1: ul
- length: 2
- __proto__: HTMLCollection
```
### æ–°å‹çš„querySelectoré€‰æ‹©å™¨å’ŒquerySelectorAllé€‰æ‹©å™¨
ä½¿ç”¨ä¼ ç»Ÿçš„idã€nameã€classç­‰é€‰æ‹©å™¨æ¥æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œåªèƒ½è°ƒç”¨documentå…·æœ‰çš„å‡½æ•°ï¼Œåœ¨æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„å­å…ƒç´ æ—¶ä¸å¤ªæ–¹ä¾¿ã€‚
#### querySelectoré€‰æ‹©å™¨
> querySelectoré€‰æ‹©å™¨è¿”å›çš„æ˜¯åœ¨åŸºå‡†å…ƒç´ ä¸‹ï¼Œé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚

è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
element = baseElement.querySelector(selectors);
```
å…¶ä¸­ï¼Œ
- baseElementæ˜¯åŸºå‡†å…ƒç´ ï¼Œè¿”å›çš„å…ƒç´ å¿…é¡»æ˜¯åŒ¹é…åˆ°çš„åŸºå‡†å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚è¯¥åŸºå‡†å…ƒç´ å¯ä»¥ä¸ºDocumentï¼Œä¹Ÿå¯ä»¥ä¸ºåŸºæœ¬çš„Elementã€‚
- selectorsæ˜¯ä¸€ä¸ªæ ‡å‡†çš„CSSé€‰æ‹©å™¨ï¼Œè€Œä¸”å¿…é¡»æ˜¯åˆæ³•çš„é€‰æ‹©å™¨ï¼Œå¦åˆ™ä¼šå¼•èµ·è¯­æ³•é”™è¯¯ã€‚
- è¿”å›å€¼ä¸ºåŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚åŒ¹é…çš„è¿‡ç¨‹ä¸­ä¸ä»…ä»…é’ˆå¯¹åŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ ï¼Œå®é™…ä¸Šä¼šéå†æ•´ä¸ªæ–‡æ¡£ç»“æ„ï¼ŒåŒ…æ‹¬åŸºå‡†å…ƒç´ å’Œå®ƒçš„åä»£å…ƒç´ ä»¥å¤–çš„å…ƒç´ ã€‚å®é™…å¤„ç†è¿‡ç¨‹æ˜¯é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ¹é…å…ƒç´ çš„åˆå§‹åˆ—è¡¨ï¼Œç„¶ååˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦ä¸ºåŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå±äºåŸºå‡†å…ƒç´ çš„åä»£å…ƒç´ å°†ä¼šè¢«è¿”å›ã€‚
```html
<div>
  <h5>Original content</h5>
  <span>outside span</span>
  <p class="content">
    inside paragraph
    <span>inside span</span>
    inside paragraph
  </p>
</div>
```

```js
// è·å–på…ƒç´ çš„ç¬¬ä¸€ä¸ªspanå…ƒç´ ã€‚
document.querySelector('p span').innerText; // inside span
// è·å–classä¸ºcontentçš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªspanå…ƒç´ ã€‚
document.querySelector('.content span').innerText; // inside span
// è·å–ç¬¬ä¸€ä¸ªspanæˆ–è€…h5å…ƒç´ ã€‚
document.querySelector('h5, span').innerText // Original content
```
ç„¶åé€šè¿‡ä»¥ä¸‹è¿™æ®µä»£ç æ¥éªŒè¯ä¸Šè¿°è¿”å›å€¼çš„åŒ¹é…è¿‡ç¨‹ã€‚
```js
var baseElement = document.querySelector("p");
console.log(baseElement.querySelector("div span").innerText); // inside span
```
ç¬¬ä¸€è¡Œä»£ç è·å–çš„åŸºå‡†å…ƒç´ ä¸ºpå…ƒç´ ï¼Œç¬¬äºŒè¡Œä»£ç ä¸­çš„é€‰æ‹©å™¨ä¸ºâ€œdiv spanâ€ã€‚è™½ç„¶åœ¨på…ƒç´ ä¸­æ²¡æœ‰divå…ƒç´ ï¼Œå´ä¾æ—§èƒ½åŒ¹é…åˆ°spanå…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºåœ¨åŒ¹é…è¿‡ç¨‹ä¼šä¼˜å…ˆæ‰¾å‡ºdivå…ƒç´ ä¸‹spanå…ƒç´ çš„é›†åˆï¼Œç„¶ååˆ¤æ–­spanå…ƒç´ æ˜¯å¦å±äºpå…ƒç´ çš„å­å…ƒç´ ï¼Œæœ€åè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„spanå…ƒç´ å€¼ã€‚

#### querySelectorAllé€‰æ‹©å™¨
> querySelectorAllé€‰æ‹©å™¨ä¸querySelectoré€‰æ‹©å™¨ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºquerySelectorAllé€‰æ‹©å™¨ä¼šè¿”å›åŸºå‡†å…ƒç´ ä¸‹åŒ¹é…åˆ°çš„æ‰€æœ‰å­å…ƒç´ çš„é›†åˆã€‚

è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
elementList = baseElement.querySelectorAll(selectors);
// å®ƒåŒæ ·åŒ…å«åŸºå‡†å…ƒç´ ä¸é€‰æ‹©å™¨ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªNodeListçš„é›†åˆã€‚
```

```html
<div>
    <h5>Original content</h5>
    <span>outside span</span>
    <p class="content">
        inside paragraph
        <span>inside span</span>
        inside paragraph
    </p>
</div>
```

```js
// è·å–æ‰€æœ‰çš„spanå…ƒç´ ã€‚
document.querySelectorAll('span');
// å…¶è¿”å›å€¼å¦‚ä¸‹æ‰€ç¤ºã€‚
NodeList(2) [span, span]
 - 0: span
 - 1: span
 - length: 2
 - __proto__:  NodeList
```
querySelectorAllé€‰æ‹©å™¨åŒ¹é…è¿‡ç¨‹ä¸querySelectoré€‰æ‹©å™¨ä¸€æ ·ï¼Œä¼˜å…ˆè·å–æ‰€æœ‰åŒ¹é…å…ƒç´ çš„é›†åˆï¼Œç„¶ååˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦å±äºåŸºå‡†å…ƒç´ ã€‚å¦‚æœå±äºåˆ™è¿”å›ç»“æœï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªNodeListå¯¹è±¡ã€‚

ç†è§£querySelectorAllé€‰æ‹©å™¨åŒ¹é…å…ƒç´ çš„è¿‡ç¨‹ã€‚
```html
<div id="my-id">
    <img id="inside">
    <div class="lonely"></div>
    <div class="outer">
        <div class="inner"></div>
    </div>
</div>
<script>
    var firstArr = document.querySelectorAll('#my-id div div');
        var secondArr = document.querySelector('#my-id').querySelectorAll('div div');
    console.log(firstArr);
    console.log(secondArr);
</script>
```
ä¸Šé¢ä»£ç çš„ä¸»è¦ç›®çš„æ˜¯æ‰¾å‡ºåœ¨idä¸ºâ€œmy-idâ€å…ƒç´ çš„å­divä¸­å­divå…ƒç´ çš„é›†åˆã€‚åˆ†åˆ«ä½¿ç”¨ä¸¤ç§å†™æ³•è·å–åˆ°äº†firstArrå’ŒsecondArrä¸¤ä¸ªå€¼ã€‚
æé—®ï¼šfirstArrå’ŒsecondArrè¿”å›çš„NodeListå€¼æ˜¯å¦æ˜¯ä¸€æ ·çš„ï¼Ÿç­”æ¡ˆï¼šä¸ä¸€æ ·ã€‚å®é™…ä¸Šå®ƒä»¬è¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
firstArr   NodeList [div.inner]
        - 0: div.inner
        - length: 1
        - __proto__: NodeList
secondArr  NodeList(3) [div.lonely, div.outer, div.inner]
        - 0: div.lonely
        - 1: div.outer
        - 2: div.inner
        - length: 3
        - __proto__: NodeList
```
å¯ä»¥çœ‹å‡ºfirstArrè¡¨ç¤ºçš„NodeListå¯¹è±¡çš„é•¿åº¦ä¸º1ï¼Œè€ŒsecondArrè¡¨ç¤ºçš„NodeListå¯¹è±¡çš„é•¿åº¦ä¸º3ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

é’ˆå¯¹firstArrï¼ŒquerySelectorAllé€‰æ‹©å™¨çš„è°ƒç”¨æ–¹æ˜¯documentï¼Œåˆ™åŸºå‡†å…ƒç´ ä¸ºdocumentï¼›æ‰§è¡ŒCSSé€‰æ‹©å™¨ï¼ŒåŒ¹é…åˆ°çš„å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚
```html
<div class="inner"></div>
```
è¯¥å…ƒç´ å±äºdocumentä¸­çš„å­å…ƒç´ ï¼Œæœ€ç»ˆè¿”å›ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
NodeList [div.inner]
```

é’ˆå¯¹secondArrï¼Œå…ˆé€šè¿‡querySelectoré€‰æ‹©å™¨ç¡®å®šåŸºå‡†å…ƒç´ æ˜¯idä¸ºâ€œmy-idâ€çš„å…ƒç´ ï¼Œç„¶åæ‰§è¡ŒCSSé€‰æ‹©å™¨ï¼Œé€‰æ‹©å™¨çš„å†…å®¹æ˜¯åŒ¹é…divå…ƒç´ ä¸­çš„å­divå…ƒç´ ã€‚
HTMLä»£ç å¯¹åº”çš„æ–‡æ¡£ç»“æ„å†…ï¼Œæœ‰3ä¸ªå…ƒç´ æ˜¯åŒ¹é…çš„ã€‚
- idä¸ºâ€œmy-idâ€çš„divå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚`<div class="lonely"></div>`
- idä¸ºâ€œmy-idâ€çš„divå…ƒç´ çš„ç¬¬äºŒä¸ªå­èŠ‚ç‚¹ã€‚ `<div class="outer">...</div>`
- classä¸ºâ€œouterâ€çš„divå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚`<div class="inner"></div>`

ç´§æ¥ç€åˆ¤æ–­è¿™3ä¸ªåŒ¹é…çš„å…ƒç´ æ˜¯å¦ä¸ºåŸºå‡†å…ƒç´ çš„å­å…ƒç´ ï¼Œå‘ç°å®ƒä»¬éƒ½æ˜¯å¤„äºåŸºå‡†å…ƒç´ å†…éƒ¨çš„ï¼Œæœ€ç»ˆè¿™3ä¸ªå€¼æ„æˆä¸€ä¸ªNodeListé›†åˆè¿”å›ã€‚
```js
NodeList(3) [div.lonely, div.outer, div.inner]
```
##### ç‰¹ä¾‹ğŸ‘ğŸ‘ğŸ‘
> ä¸€ä¸ªé¡µé¢æ˜¯ä¸å…è®¸æœ‰ç›¸åŒidçš„å…ƒç´ çš„ã€‚å¦‚æœå‡ºç°äº†ç›¸åŒçš„idï¼Œåˆ™æ— æ³•é€šè¿‡getElementById()å‡½æ•°è·å–åˆ°é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ä»¥å¤–çš„å…ƒç´ ã€‚å¯¹äºquerySelectorAllé€‰æ‹©å™¨æ¥è¯´å´æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚å°†idé€‰æ‹©å™¨ä¼ å…¥querySelectorAllé€‰æ‹©å™¨ä¸­åï¼Œå¯ä»¥é€šè¿‡idè·å–å¤šä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œç„¶åé€šè¿‡ç´¢å¼•è·å–ç‰¹å®šçš„å€¼ã€‚
```html
<div>
    <p id="first">æ–‡æœ¬1</p>
    <p id="first">æ–‡æœ¬2</p>
    <p id="first">æ–‡æœ¬3</p>
    <p id="first">æ–‡æœ¬4</p>
</div>
<script>
    console.log(document.querySelectorAll('#first').length);  // 4
    console.log(document.querySelectorAll('#first')[3].innerText); // æ–‡æœ¬4
</script>
```
> è™½ç„¶querySelectorAllé€‰æ‹©å™¨ä¹Ÿå¯ä»¥å¤„ç†å‡ºç°ç›¸åŒidçš„æƒ…å†µï¼ŒæŒ‰ç…§HTMLç¼–å†™çš„è§„èŒƒï¼Œ**ç»å¯¹ä¸å…è®¸**ä¸€ä¸ªé¡µé¢å‡ºç°ç›¸åŒidçš„å…ƒç´ ã€‚
## HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡
ä¸åŒçš„DOMé€‰æ‹©å™¨ï¼Œå®ƒä»¬çš„è¿”å›å€¼æœ‰äº›æ˜¯NodeListå¯¹è±¡ï¼Œæœ‰äº›æ˜¯HTMLCollectionå¯¹è±¡ã€‚é‚£ä¹ˆå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

ä¸‹é¢è¿™æ®µä»£ç ï¼Œä¸»è¦æ˜¯å¯¹childrenå±æ€§å’ŒchildNodeså±æ€§çš„è°ƒç”¨ã€‚
```html
<div id="main">
    <p class="first">first</p>
    <p class="second">second<span>content</span></p>
</div>
<script>
    var main = document.getElementById("main");
    console.log(main.children);
    console.log(main.childNodes);
</script>
```
å¾—åˆ°çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
HTMLCollection(2) [p.first, p.second]
 - 0: p.first
 - 1: p.second
 - length: 2
 -  __proto__:  HTMLCollection
NodeList(5) [text, p.first, text, p.second, text]
 - 0: text
 - 1: p.first
 - 2: text
 - 3: p.second
 - 4: text
 - length: 5
 -  __proto__:  NodeList
```
### HTMLCollectionå¯¹è±¡
HTMLCollectionå¯¹è±¡å…·æœ‰lengthå±æ€§ï¼Œè¿”å›é›†åˆçš„é•¿åº¦ï¼Œå¯ä»¥é€šè¿‡item()å‡½æ•°å’ŒnamedItem()å‡½æ•°æ¥è®¿é—®ç‰¹å®šçš„å…ƒç´ ã€‚
#### item()å‡½æ•°
å¯ä»¥è°ƒç”¨item()å‡½æ•°ï¼Œé€šè¿‡åºå·æ¥è·å–ç‰¹å®šçš„æŸä¸ªèŠ‚ç‚¹ï¼Œè¶…è¿‡ç´¢å¼•åˆ™è¿”å›â€œnullâ€ã€‚
```html
<div id="main">
    <p class="first">first</p>
    <p class="second">second</p>
    <p class="third">third</p>
    <p class="four">four</p>
</div>
<script>
    var main = document.getElementById("main").children;
    console.log(main.item(0)); // <p class="first">first</p>
    console.log(main.item(2)); // <p class="third">third</p>
</script>
```
#### namedItem()å‡½æ•°
ç”¨æ¥è¿”å›ä¸€ä¸ªèŠ‚ç‚¹ã€‚
é¦–å…ˆé€šè¿‡idå±æ€§å»åŒ¹é…ï¼Œç„¶åå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°åˆ™ä½¿ç”¨nameå±æ€§åŒ¹é…ï¼Œå¦‚æœè¿˜æ²¡æœ‰åŒ¹é…åˆ°åˆ™è¿”å›â€œnullâ€ã€‚å½“å‡ºç°é‡å¤çš„idæˆ–è€…nameå±æ€§æ—¶ï¼Œåªè¿”å›åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå€¼ã€‚
```html
<form id="main">
    <input type="text" id="username">
    <input type="text" name="username">
    <input type="text" name="password">
</form>
<script>
    var main = document.getElementById("main").children;
    console.log(main.namedItem('username')); // <input type="text" id="username">
</script>
```
### NodeListå¯¹è±¡
> NodeListå¯¹è±¡ä¹Ÿå…·æœ‰lengthå±æ€§ï¼Œè¿”å›é›†åˆçš„é•¿åº¦ï¼Œä¹ŸåŒæ ·å…·æœ‰item()å‡½æ•°ï¼Œé€šè¿‡ç´¢å¼•å®šä½å­å…ƒç´ çš„ä½ç½®ã€‚åŒHTMLCollectionã€‚

### HTMLCollectionå¯¹è±¡å’ŒNodeListå¯¹è±¡çš„å®æ—¶æ€§
> ä¸¤è€…å¹¶ä¸æ˜¯å†å²æ–‡æ¡£çŠ¶æ€çš„é™æ€å¿«ç…§ï¼Œè€Œæ˜¯å…·æœ‰**å®æ—¶æ€§**çš„ã€‚å¯¹DOMæ ‘æ–°å¢æˆ–è€…åˆ é™¤ä¸€ä¸ªç›¸å…³èŠ‚ç‚¹ï¼Œéƒ½ä¼šç«‹åˆ»åæ˜ åœ¨HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡ä¸­ã€‚

HTMLCollectionå¯¹è±¡ä¸NodeListå¯¹è±¡éƒ½åªæ˜¯ç±»æ•°ç»„ç»“æ„ï¼Œå¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨æ•°ç»„çš„å‡½æ•°ã€‚
è€Œé€šè¿‡call()å‡½æ•°å’Œapply()å‡½æ•°å¤„ç†ä¸ºçœŸæ­£çš„æ•°ç»„åï¼Œå®ƒä»¬å°±è½¬å˜ä¸ºä¸€ä¸ªçœŸæ­£çš„**é™æ€å€¼**äº†ï¼Œä¸ä¼šå†åŠ¨æ€åæ˜ DOMçš„å˜åŒ–ã€‚
```html
<form id="main">
    <input type="text" id="username">
    <input type="text" name="password">
</form>
<script>
    // è·å–HTMLCollection
    var mainChildren = document.getElementById('main').children;
        console.log(mainChildren.length);  // 2

    // æ–°å¢ä¸€ä¸ªinputå…ƒç´ 
    var newInput = document.createElement('input');
    main.appendChild(newInput);
    console.log(mainChildren.length);  // 3

    // é€šè¿‡call()å‡½æ•°å¤„ç†æˆæ•°ç»„ç»“æ„
    mainChildren = Array.prototype.slice.call(mainChildren, 0);
    mainChildren.splice(1, 1);
    console.log(mainChildren.length);  // 2

    // å†æ–°å¢ä¸€ä¸ªinputå…ƒç´ 
    var newInput2 = document.createElement('input');
    main.appendChild(newInput2);
    console.log(mainChildren.length);  // 2

</script>
```
NodeListå¯¹è±¡ä¸HTMLCollectionå¯¹è±¡ç›¸æ¯”ï¼Œå­˜åœ¨ä¸€äº›ç»†å¾®çš„å·®å¼‚ï¼Œä¸»è¦è¡¨ç°åœ¨ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°è·å–çš„NodeListå¯¹è±¡éƒ½æ˜¯å®æ—¶çš„ã€‚ä¾‹å¦‚é€šè¿‡querySelectorAll()å‡½æ•°è·å–çš„NodeListå¯¹è±¡å°±ä¸æ˜¯å®æ—¶çš„ã€‚
```html
<ul id="main">
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li>æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
</ul>
<script>
    // è·å–ul
    var main = document.getElementById('main');
    // è·å–lié›†åˆ
    var lis = document.querySelectorAll('ul li');
    // ç¬¬ä¸€æ¬¡è¾“å‡ºlié›†åˆé•¿åº¦ï¼Œå€¼ä¸º5
    console.log(lis.length);

    // æ–°å¢liå…ƒç´ 
    var newLi = document.createElement('li');
    var text = document.createTextNode('æ–‡æœ¬8');
    newLi.appendChild(text);
    main.appendChild(newLi);
    // å†æ¬¡è¾“å‡ºlié›†åˆé•¿åº¦ï¼Œå€¼ä¸º5
    console.log(lis.length);
    // é‡æ–°è·å–liçš„é›†åˆå¹¶è¾“å‡ºé•¿åº¦ï¼Œå€¼ä¸º6
    console.log(document.querySelectorAll('ul li').length);
</script>
```
ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¤è€…å…·æœ‰ä»¥ä¸‹çš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹ã€‚
#### ç›¸åŒç‚¹
- éƒ½æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œæœ‰lengthå±æ€§ï¼Œå¯ä»¥é€šè¿‡call()å‡½æ•°æˆ–apply()å‡½æ•°å¤„ç†æˆçœŸæ­£çš„æ•°ç»„ã€‚
- éƒ½æœ‰item()å‡½æ•°ï¼Œé€šè¿‡ç´¢å¼•å®šä½å…ƒç´ ã€‚
- éƒ½æ˜¯å®æ—¶æ€§çš„ï¼ŒDOMæ ‘çš„å˜åŒ–ä¼šåŠæ—¶åæ˜ åˆ°HTMLCollectionå¯¹è±¡å’ŒNodeListå¯¹è±¡ä¸Šï¼Œåªæ˜¯åœ¨æŸäº›å‡½æ•°è°ƒç”¨çš„è¿”å›ç»“æœä¸Šä¼šå­˜åœ¨å·®å¼‚ã€‚
#### ä¸åŒç‚¹
- HTMLCollectionå¯¹è±¡æ¯”NodeListå¯¹è±¡å¤šä¸ªnamedItem()å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡idæˆ–è€…nameå±æ€§å®šä½å…ƒç´ ã€‚
- HTMLCollectionå¯¹è±¡åªåŒ…å«å…ƒç´ çš„é›†åˆï¼ˆElementï¼‰ï¼Œå³å…·æœ‰æ ‡ç­¾åçš„å…ƒç´ ï¼›è€ŒNodeListå¯¹è±¡æ˜¯èŠ‚ç‚¹çš„é›†åˆï¼Œæ—¢åŒ…æ‹¬å…ƒç´ ï¼Œä¹ŸåŒ…æ‹¬èŠ‚ç‚¹ï¼Œä¾‹å¦‚textæ–‡æœ¬èŠ‚ç‚¹ã€‚

## å¸¸ç”¨çš„DOMæ“ä½œ
> æ–‡æ¡£æ ‘æ˜¯ç”±å„ç§ç±»å‹èŠ‚ç‚¹æ„æˆçš„é›†åˆï¼ŒDOMæ“ä½œå®é™…æ˜¯å¯¹æ–‡æ¡£ç»“æ„ä¸­èŠ‚ç‚¹çš„æ“ä½œã€‚
> æ–‡æ¡£ç»“æ„æ ‘ä¸­çš„èŠ‚ç‚¹ç±»å‹ä¼—å¤šï¼Œä½†æ˜¯æ“ä½œçš„ä¸»è¦èŠ‚ç‚¹ç±»å‹ä¸ºå…ƒç´ èŠ‚ç‚¹ã€å±æ€§èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<!DOCTYPE html>
<html>
<head>
    <title>æ–‡æ¡£æ ‡é¢˜</title>
</head>
<body>
  <a href="http://www.mianshiting.com">æˆ‘çš„é“¾æ¥</a>
  <h1>æˆ‘çš„æ ‡é¢˜</h1>
</body>
</html>
```
å¦‚æœå°†è¿™äº›èŠ‚ç‚¹ç”»æˆä¸€ä¸ªæ ‘çš„è¯:
[æ–‡æ¡£](./assets/drowio/document.drawio ':include :type=code')
- å…ƒç´ èŠ‚ç‚¹æ˜¯æ‹¥æœ‰ä¸€å¯¹å¼€é—­åˆæ ‡ç­¾çš„å…ƒç´ æ•´ä½“ï¼Œä¾‹å¦‚å¸¸è§çš„divã€ulã€liæ ‡ç­¾éƒ½æ˜¯å…ƒç´ èŠ‚ç‚¹ã€‚
  - `<div></div>ï¼Œ<ul></ul>ï¼Œ<li></li>`
- å±æ€§èŠ‚ç‚¹æ˜¯å…ƒç´ èŠ‚ç‚¹å…·æœ‰çš„å±æ€§ï¼Œä¾‹å¦‚aæ ‡ç­¾çš„hrefå±æ€§ã€‚
- æ–‡æœ¬èŠ‚ç‚¹æ˜¯DOMä¸­ç”¨äºå‘ˆç°æ–‡æœ¬å†…å®¹çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚h1æ ‡ç­¾å†…éƒ¨çš„â€œæˆ‘çš„æ ‡é¢˜â€ã€‚
- å…¶ä¸­å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹å­˜åœ¨çˆ¶å­å…³ç³»ï¼Œè€Œå…ƒç´ èŠ‚ç‚¹ä¸å±æ€§èŠ‚ç‚¹å¹¶ä¸å­˜åœ¨çˆ¶å­å…³ç³»ã€‚

### æ–°å¢èŠ‚ç‚¹
> ä¸¤ä¸ªæ­¥éª¤ï¼Œé¦–å…ˆæ˜¯æ–°å»ºèŠ‚ç‚¹ï¼Œç„¶åå°†èŠ‚ç‚¹æ·»åŠ è‡³æŒ‡å®šçš„ä½ç½®ã€‚
```html
<ul id="container">
    <li class="first">æ–‡æœ¬1</li>
    <li class="second">æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li id="target">æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
    <li>æ–‡æœ¬6</li>
</ul>
```
éœ€è¦å®Œæˆè¿™æ ·ä¸€ä¸ªæ“ä½œï¼šç¬¬ä¸€æ­¥ï¼Œåœ¨ulçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªliå…ƒç´ ï¼Œå…¶ç±»åä¸ºâ€œlastâ€ï¼Œå†…å®¹ä¸ºâ€œæ–°å¢æ–‡æœ¬1â€ï¼›ç¬¬äºŒæ­¥ï¼Œåœ¨æ–°å¢çš„liä¹‹å‰å†æ–°å¢ç¬¬äºŒä¸ªliï¼Œå†…å®¹ä¸ºâ€œæ–°å¢æ–‡æœ¬2â€ã€‚
```js
// 1ï¸âƒ£è·å–æŒ‡å®šå…ƒç´ ã€‚
var container = document.querySelector('#container');
// 2ï¸âƒ£æ–°å»ºåˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚
var newLiOne = document.createElement('li');
// 3ï¸âƒ£æ–°å»ºä¸€ä¸ªå±æ€§èŠ‚ç‚¹ï¼Œå¹¶è®¾ç½®å€¼ã€‚
var newLiAttr = document.createAttribute('class');
newLiAttr.value = 'last';
// 4ï¸âƒ£å°†å±æ€§èŠ‚ç‚¹ç»‘å®šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸Šã€‚
newLiOne.setAttributeNode(newLiAttr);
// 5ï¸âƒ£æ–°å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚
var newTextOne = document.createTextNode('æ–°å¢æ–‡æœ¬1');
// 6ï¸âƒ£å°†æ–‡æœ¬èŠ‚ç‚¹ä½œä¸ºå…ƒç´ èŠ‚ç‚¹çš„å­å…ƒç´ ã€‚
newLiOne.appendChild(newTextOne);
// 7ï¸âƒ£ä½¿ç”¨appendChild()å‡½æ•°å°†æ–°å¢å…ƒç´ èŠ‚ç‚¹æ·»åŠ è‡³æœ«å°¾ã€‚
container.appendChild(newLiOne);
// 8ï¸âƒ£æ–°åˆ›å»ºç¬¬äºŒä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚
var newTextTwo = document.createTextNode('æ–°å¢æ–‡æœ¬2');
// 9ï¸âƒ£æ–°åˆ›å»ºç¬¬äºŒä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚
var newTextTwo = document.createTextNode('æ–°å¢æ–‡æœ¬2');
// ğŸ”Ÿå°†æ–‡æœ¬èŠ‚ç‚¹ä½œä¸ºå…ƒç´ èŠ‚ç‚¹çš„å­å…ƒç´ ã€‚
newLiTwo.appendChild(newTextTwo);
// ğŸ”Ÿ+1ï¸âƒ£ä½¿ç”¨insertBefore()å‡½æ•°å°†èŠ‚ç‚¹æ·»åŠ è‡³ç¬¬ä¸€ä¸ªæ–°å¢èŠ‚ç‚¹çš„å‰é¢ã€‚
container.insertBefore(newLiTwo, newLiOne);
```
è‡³æ­¤ï¼Œå®ŒæˆæŒ‡å®šçš„ä¸¤ä¸ªæ–°å¢æ“ä½œã€‚

åœ¨æ–°å¢å±æ€§èŠ‚ç‚¹æ—¶ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ›´ç®€å•çš„setAttribute()å‡½æ•°ã€‚ä»¥ä¸Šé¢ä»£ç ä¸ºä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸€è¡Œä»£ç å®Œæˆä¸Šè¿°3ï¸âƒ£4ï¸âƒ£è¿™ä¸¤æ­¥å…±3è¡Œä»£ç çš„åŠŸèƒ½ã€‚
```js
newLiOne.setAttribute('class', 'last'); // ä¸å…¼å®¹IE8åŠæ›´æ—©çš„ç‰ˆæœ¬
```
### åˆ é™¤èŠ‚ç‚¹
åˆ é™¤èŠ‚ç‚¹çš„æ“ä½œå®é™…åŒ…å«åˆ é™¤å…ƒç´ èŠ‚ç‚¹ã€åˆ é™¤å±æ€§èŠ‚ç‚¹å’Œåˆ é™¤æ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<ul id="main">
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
</ul>
<a id="link" href="http://www.mianshiting.com">é¢è¯•å…</a>
```
1. åˆ é™¤ulçš„ç¬¬ä¸€ä¸ªliå…ƒç´ èŠ‚ç‚¹
åˆ é™¤ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹éœ€è¦è¿›è¡Œä¸‰æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ã€‚
var main = document.querySelector('#main');
// 2ï¸âƒ£è·å–å¾…åˆ é™¤èŠ‚ç‚¹ã€‚
// å¾…åˆ é™¤èŠ‚ç‚¹æ˜¯çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¾ˆå¤šäººå¯èƒ½ç›´æ¥æƒ³åˆ°çš„æ˜¯ä½¿ç”¨firstChildå±æ€§ï¼Œè¿™æ˜¯ä¸å¯å–çš„ã€‚firstChildå±æ€§å®é™…æ˜¯å–childNodeså±æ€§è¿”å›çš„NodeListå¯¹è±¡ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œåœ¨æ­¤ä¾‹ä¸­å®é™…ä¸ºä¸€ä¸ªæ¢è¡Œç¬¦ã€‚
// å¦‚æœéœ€è¦è·å–ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œåº”è¯¥ä½¿ç”¨firstElementChildå±æ€§ã€‚
var firstChild = main.firstElementChild;
// 3ï¸âƒ£é€šè¿‡çˆ¶èŠ‚ç‚¹ï¼Œè°ƒç”¨removeChild()å‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚
main.removeChild(firstChild);
```
2. åˆ é™¤aæ ‡ç­¾çš„hrefå±æ€§
åˆ é™¤ä¸€ä¸ªå…ƒç´ çš„å±æ€§éœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–è¯¥å…ƒç´ ã€‚
var link = document.querySelector('#link');
// 2ï¸âƒ£é€šè¿‡å…ƒç´ èŠ‚ç‚¹ï¼Œè°ƒç”¨removeAttribute()å‡½æ•°åˆ é™¤æŒ‡å®šå±æ€§èŠ‚ç‚¹ã€‚
link.removeAttribute('href');
```
3. åˆ é™¤ulæœ€åä¸€ä¸ªliå…ƒç´ çš„æ–‡æœ¬èŠ‚ç‚¹
åˆ é™¤ä¸€ä¸ªå…ƒç´ çš„æ–‡æœ¬èŠ‚ç‚¹éœ€è¦è¿›è¡Œä¸‰æ­¥æ“ä½œã€‚
```js
// 1ï¸âƒ£è·å–å…ƒç´ èŠ‚ç‚¹ã€‚
// åœ¨è·å–æœ€åä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨çš„æ˜¯lastElementChildå±æ€§è€Œä¸æ˜¯lastChildå±æ€§ã€‚
var lastChild = main.lastElementChild;
// 2ï¸âƒ£è·å–æ–‡æœ¬èŠ‚ç‚¹ã€‚
// åœ¨è·å–æ–‡æœ¬èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ä½¿ç”¨çš„æ˜¯childNodeså±æ€§ï¼Œç„¶åå–è¿”å›çš„NodeListå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå€¼ã€‚ä¸èƒ½ä½¿ç”¨childrenå±æ€§ï¼Œå› ä¸ºchildrenå±æ€§è¿”å›çš„æ˜¯HTMLCollectionå¯¹è±¡ï¼Œè¡¨ç¤ºçš„æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å†…å®¹ã€‚
var textNode = lastChild.childNodes[0];
// 3ï¸âƒ£é€šè¿‡å…ƒç´ èŠ‚ç‚¹ï¼Œè°ƒç”¨removeChild()å‡½æ•°åˆ é™¤æŒ‡å®šçš„æ–‡æœ¬èŠ‚ç‚¹ã€‚
lastChild.removeChild(textNode);
// å…³äºåˆ é™¤æ–‡æœ¬èŠ‚ç‚¹è¿˜æœ‰ä¸€ç§æ¯”è¾ƒç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œé‚£å°±æ˜¯å°†å…ƒç´ èŠ‚ç‚¹çš„innerHTMLå±æ€§è®¾ç½®ä¸ºç©ºã€‚
lastChild.innerHTML = '';
```
åœ¨åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹æ—¶ï¼Œæ›´æ¨èä½¿ç”¨è®¾ç½®innerHTMLå±æ€§ä¸ºç©ºçš„æ–¹æ³•ã€‚
### ä¿®æ”¹èŠ‚ç‚¹
åŒ…å«ç€å¾ˆå¤šä¸åŒç±»å‹çš„æ“ä½œï¼ŒåŒ…æ‹¬ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹ã€ä¿®æ”¹å±æ€§èŠ‚ç‚¹å’Œä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ã€‚
```html
<div id="main">
    <!-- æµ‹è¯•ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹ -->
    <div id="div1">æ›¿æ¢ä¹‹å‰çš„å…ƒç´ </div>
    <!-- æµ‹è¯•ä¿®æ”¹å±æ€§èŠ‚ç‚¹ -->
    <div id="div2" class="classA" style="color: green;">è¿™æ˜¯ä¿®æ”¹å±æ€§çš„èŠ‚ç‚¹</div>
    <!-- æµ‹è¯•ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ -->
    <div id="last">è¿™æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹å†…å®¹</div>
</div>
```
1. ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹

ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹çš„æ“ä½œä¸€èˆ¬æ˜¯ç›´æ¥å°†èŠ‚ç‚¹å…ƒç´ æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨replaceChild()å‡½æ•°æ¥å®ç°ã€‚replaceChild()å‡½æ•°çš„è°ƒç”¨æ–¹æ˜¯çˆ¶å…ƒç´ ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ–°å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå°†è¦è¢«æ›¿æ¢çš„æ—§å…ƒç´ ã€‚
```html
<script>
    // 1.è·å–çˆ¶å…ƒç´ ä¸å¾…æ›¿æ¢çš„å…ƒç´ 
    var main = document.querySelector('#main');
    var div1 = document.querySelector('#div1');
    // 2.åˆ›å»ºæ–°å…ƒç´ 
    var newDiv = document.createElement('div');
    var newText = document.createTextNode('è¿™æ˜¯æ–°åˆ›å»ºçš„æ–‡æœ¬');
    newDiv.appendChild(newText);
    // 3.ä½¿ç”¨æ–°å…ƒç´ æ›¿æ¢æ—§çš„å…ƒç´ 
    main.replaceChild(newDiv, div1);
</script>
```
2. ä¿®æ”¹å±æ€§èŠ‚ç‚¹
ä¿®æ”¹å±æ€§èŠ‚ç‚¹æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š
- ä¸€ç§æ˜¯é€šè¿‡getAttribute()å‡½æ•°å’ŒsetAttribute()å‡½æ•°è·å–å’Œè®¾ç½®å±æ€§èŠ‚ç‚¹å€¼ï¼›å¦ä¸€ç§æ˜¯ç›´æ¥ä¿®æ”¹å±æ€§åã€‚
- ç¬¬äºŒç§æ–¹å¼æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œç›´æ¥ä¿®æ”¹çš„å±æ€§åä¸å…ƒç´ èŠ‚ç‚¹ä¸­çš„å±æ€§åä¸ä¸€å®šæ˜¯ä¸€è‡´çš„ã€‚å°±åƒclassè¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå®ƒæ˜¯JavaScriptä¸­çš„å…³é”®å­—ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨classNameæ¥ä»£æ›¿ã€‚
```js
var div2 = document.querySelector('#div2');
// æ–¹æ³•1: é€šè¿‡setAttribute()å‡½æ•°è®¾ç½®
div2.setAttribute('class', 'classB');
// æ–¹æ³•2: ç›´æ¥ä¿®æ”¹å±æ€§åï¼Œæ³¨æ„ä¸èƒ½ç›´æ¥ç”¨classï¼Œéœ€è¦ä½¿ç”¨className
div2.className = 'classC';

// æ–¹æ³•1: é€šè¿‡setAttribute()å‡½æ•°è®¾ç½®
div2.setAttribute('style', 'color: red;');
// æ–¹æ³•2: ç›´æ¥ä¿®æ”¹å±æ€§å
div2.style.color = 'blue';
```
3. ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹
ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹ä¸åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹ä¸€æ ·ï¼Œå°†innerHTMLå±æ€§ä¿®æ”¹ä¸ºéœ€è¦çš„æ–‡æœ¬å†…å®¹å³å¯ã€‚
```js
var last = document.querySelector('#last');
// ç›´æ¥ä¿®æ”¹innerHTMLå±æ€§
last.innerHTML = 'è¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹';
//å¦‚æœè®¾ç½®çš„innerHTMLå±æ€§å€¼ä¸­åŒ…å«HTMLå…ƒç´ ï¼Œåˆ™ä¼šè¢«è§£æ
//ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡ŒéªŒè¯
last.innerHTML = '<p style="color: red">è¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹</p>';
//åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“åï¼Œå¯ä»¥çœ‹åˆ°â€œè¿™æ˜¯ä¿®æ”¹åçš„æ–‡æœ¬å†…å®¹â€ä¸ºçº¢è‰²
```
## äº‹ä»¶æµ
åœ¨æµè§ˆå™¨ä¸­ï¼ŒJavaScriptå’ŒHTMLä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å»å®ç°çš„ï¼Œå¸¸ç”¨çš„äº‹ä»¶æœ‰ä»£è¡¨é¼ æ ‡å•å‡»çš„clickäº‹ä»¶ã€ä»£è¡¨åŠ è½½çš„loadäº‹ä»¶ã€ä»£è¡¨é¼ æ ‡æŒ‡é’ˆæ‚¬æµ®çš„mouseoveräº‹ä»¶ã€‚
åœ¨äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šç›¸å¯¹åº”åœ°è§¦å‘ç»‘å®šåœ¨å…ƒç´ ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä»¥å¤„ç†å¯¹åº”çš„æ“ä½œã€‚

é€šå¸¸ä¸€ä¸ªé¡µé¢ä¼šç»‘å®šå¾ˆå¤šçš„äº‹ä»¶ï¼Œé‚£ä¹ˆå…·ä½“çš„äº‹ä»¶è§¦å‘é¡ºåºæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

è¿™å°±ä¼šæ¶‰åŠäº‹ä»¶æµçš„æ¦‚å¿µï¼Œäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚äº‹ä»¶å‘ç”Ÿåä¼šåœ¨ç›®æ ‡èŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§ç‰¹å®šçš„é¡ºåºä¼ æ’­ï¼Œè·¯å¾„ç»è¿‡çš„èŠ‚ç‚¹éƒ½ä¼šæ¥æ”¶åˆ°äº‹ä»¶ã€‚

é€šè¿‡ä¸‹é¢çš„åœºæ™¯æ¥ç›´è§‚åœ°æƒ³è±¡ä¸€ä¸‹äº‹ä»¶çš„æµè½¬é¡ºåºã€‚

é¡µé¢ä¸Šæœ‰ä¸€ä¸ªtableè¡¨æ ¼ï¼Œåˆ†åˆ«åœ¨tableè¡¨æ ¼ã€tbodyè¡¨æ ¼ä½“ã€trè¡Œã€tdå•å…ƒæ ¼ä¸Šç»‘å®šäº†clickäº‹ä»¶ã€‚å‡å¦‚æˆ‘åœ¨tdä¸Šæ‰§è¡Œäº†å•å‡»çš„æ“ä½œï¼Œé‚£ä¹ˆå°†ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„äº‹ä»¶æµå‘¢ï¼Ÿ

- ç¬¬ä¸€ç§äº‹ä»¶ä¼ é€’é¡ºåºæ˜¯å…ˆè§¦å‘æœ€å¤–å±‚çš„tableå…ƒç´ ï¼Œç„¶åå‘å†…ä¼ æ’­ï¼Œä¾æ¬¡è§¦å‘tbodyã€trä¸tdå…ƒç´ ã€‚
- ç¬¬äºŒç§äº‹ä»¶ä¼ é€’é¡ºåºå…ˆè§¦å‘ç”±æœ€å†…å±‚çš„tdå…ƒç´ ï¼Œç„¶åå‘å¤–ä¼ æ’­ï¼Œä¾æ¬¡è§¦å‘trã€tbodyä¸tableå…ƒç´ ã€‚
- ç¬¬ä¸€ç§äº‹ä»¶ä¼ é€’é¡ºåºå¯¹åº”çš„æ˜¯æ•è·å‹äº‹ä»¶æµï¼Œç¬¬äºŒç§äº‹ä»¶ä¼ é€’é¡ºåºå¯¹åº”çš„æ˜¯å†’æ³¡å‹äº‹ä»¶æµã€‚

ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶æµå®é™…åŒ…å«äº†3ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·é˜¶æ®µ>äº‹ä»¶ç›®æ ‡é˜¶æ®µ>äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚
ä¸Šè¿°ä¸¤ç§ç±»å‹çš„äº‹ä»¶æµå®é™…å¯¹åº”å…¶ä¸­çš„äº‹ä»¶æ•è·é˜¶æ®µä¸äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚

### äº‹ä»¶æ•è·é˜¶æ®µ
äº‹ä»¶æ•è·é˜¶æ®µçš„ä¸»è¦è¡¨ç°æ˜¯ä¸å…·ä½“çš„èŠ‚ç‚¹å…ˆæ¥æ”¶äº‹ä»¶ï¼Œç„¶å**é€çº§å‘ä¸‹ä¼ æ’­**ï¼Œæœ€å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚

> Window > Document > html > body > table >tbody > tr > tdã€‚

å¦‚å›¾ï¼š
![catch]('../../assets/img/event_catch.jpg')

### äº‹ä»¶ç›®æ ‡é˜¶æ®µ
äº‹ä»¶ç›®æ ‡é˜¶æ®µè¡¨ç¤ºäº‹ä»¶åˆšå¥½ä¼ æ’­åˆ°ç”¨æˆ·äº§ç”Ÿè¡Œä¸ºçš„å…ƒç´ ä¸Šï¼Œå¯èƒ½æ˜¯äº‹ä»¶æ•è·çš„æœ€åä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå¯èƒ½æ˜¯äº‹ä»¶å†’æ³¡çš„ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚

### äº‹ä»¶å†’æ³¡é˜¶æ®µ
äº‹ä»¶å†’æ³¡é˜¶æ®µçš„ä¸»è¦è¡¨ç°æ˜¯æœ€å…·ä½“çš„å…ƒç´ å…ˆæ¥æ”¶äº‹ä»¶ï¼Œç„¶å**é€çº§å‘ä¸Šä¼ æ’­**ï¼Œä¸å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶äº‹ä»¶

> td > tr > tbody > table > body > html > Document >Windowã€‚

```html
<table border="1">
    <tbody>
        <tr>
            <td>è¿™æ˜¯tdçš„å…ƒç´ </td>
        </tr>
    </tbody>
</table>
<!-- ç„¶åä¾æ¬¡ç»™tableã€tbodyã€trã€tdç»‘å®šclickäº‹ä»¶ã€‚ -->
<script>
    var table = document.querySelector('table');
    var tbody = document.querySelector('tbody');
    var tr = document.querySelector('tr');
    var td = document.querySelector('td');

    table.addEventListener('click', function () {
        console.log('tableè§¦å‘');
    });
    tbody.addEventListener('click', function () {
        console.log('tbodyè§¦å‘');
    });
    tr.addEventListener('click', function () {
        console.log('trè§¦å‘');
    });
    td.addEventListener('click', function () {
        console.log('tdè§¦å‘');
    });
</script>
```
1ï¸âƒ£ä½¿ç”¨addEventListener()å‡½æ•°ç»‘å®šçš„äº‹ä»¶åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå³**ç¬¬ä¸‰ä¸ªå‚æ•°é»˜è®¤ä¸ºfalseæ—¶ï¼ŒæŒ‰ç…§`å†’æ³¡å‹`äº‹ä»¶æµå¤„ç†**ã€‚

å½“å•å‡»tdå•å…ƒæ ¼å…ƒç´ æ—¶
```js
tdè§¦å‘
trè§¦å‘
tbodyè§¦å‘
tableè§¦å‘
// ä»tdå…ƒç´ å¼€å§‹å‘å¤–ä¾æ¬¡ä¼ æ’­ï¼Œç»ç”±trã€tbodyï¼Œæœ€ç»ˆåˆ°è¾¾tableå…ƒç´ ã€‚
```

2ï¸âƒ£ä½¿ç”¨addEventListener()å‡½æ•°åŒæ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›é€ å‡ºæ•è·å‹äº‹ä»¶æµï¼Œåªéœ€è¦å°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueå³å¯ã€‚
```js
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, true);

tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, true);

tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, true);
```
å½“å•å‡»tdå•å…ƒæ ¼å…ƒç´ æ—¶
```js
tableè§¦å‘
tbodyè§¦å‘
trè§¦å‘
tdè§¦å‘
// ä»tableå…ƒç´ å¼€å§‹å‘å†…ä¾æ¬¡ä¼ æ’­ï¼Œç»ç”±tbodyã€trï¼Œæœ€ç»ˆåˆ°è¾¾tdå…ƒç´ ã€‚
```

> ä»¥ä¸Šçš„ä¸¤ç§ç±»å‹å…¨éƒ¨éƒ½æ˜¯æŒ‰ç…§æ•è·æ€§äº‹ä»¶æµæˆ–å†’æ³¡å‹äº‹ä»¶æµå¤„ç†çš„ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¿®æ”¹å…¶ä¸­çš„ä»»æ„ä¸¤ç§ä¸ºä¸åŒçš„æ¨¡å¼ä»¥è¾¾åˆ°æ··åˆå‹äº‹ä»¶æµï¼Œç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ

å‡å¦‚å°†tableä¸trè®¾ç½®ä¸ºäº‹ä»¶æ•è·ç±»å‹ï¼Œå°†tbodyä¸tdè®¾ç½®ä¸ºäº‹ä»¶å†’æ³¡ç±»å‹ï¼Œå¾—åˆ°çš„ä»£ç å¦‚ä¸‹ã€‚
```js
// äº‹ä»¶æ•è·
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, false);

// äº‹ä»¶æ•è·
tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, false);
```
å½“å•å‡»tdå…ƒç´ æ—¶ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
tableè§¦å‘
trè§¦å‘
tdè§¦å‘
tbodyè§¦å‘
```
å‘ç°äº‹ä»¶è§¦å‘æ—¶ï¼Œæ—¢æ²¡æœ‰æŒ‰ç…§å…ƒç´ ç”±å†…å‘å¤–çš„é¡ºåºï¼Œä¹Ÿæ²¡æœ‰æŒ‰ç…§å…ƒç´ ç”±å¤–å‘å†…çš„é¡ºåºã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

**å› ä¸ºå®Œæ•´çš„äº‹ä»¶æµæ˜¯æŒ‰ç…§äº‹ä»¶æ•è·é˜¶æ®µ>äº‹ä»¶ç›®æ ‡é˜¶æ®µ>äº‹ä»¶å†’æ³¡é˜¶æ®µä¾æ¬¡è¿›è¡Œçš„ã€‚å¦‚æœæœ‰å…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œåˆ™ä¼šä¼˜å…ˆäºå†’æ³¡ç±»å‹äº‹ä»¶è€Œå…ˆæ‰§è¡Œã€‚**

æ•´ä¸ªäº‹ä»¶æµçš„å®é™…æ‰§è¡Œè¿‡ç¨‹åˆ†æå¦‚ä¸‹ã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œä»tableå…ƒç´ å¼€å§‹ï¼Œtableå…ƒç´ ç»‘å®šæ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥æœ€å…ˆæ‰§è¡Œï¼Œè¾“å‡ºâ€œtableè§¦å‘â€ã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tbodyå…ƒç´ ï¼Œä½†æ˜¯tbodyå…ƒç´ ç»‘å®šçš„æ˜¯å†’æ³¡ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚
- äº‹ä»¶æ•è·é˜¶æ®µï¼Œæ‰§è¡Œåˆ°trå…ƒç´ ï¼Œtrå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtrè§¦å‘â€ã€‚
- äº‹ä»¶ç›®æ ‡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tdå…ƒç´ ï¼Œè§¦å‘ç›®æ ‡å…ƒç´ äº‹ä»¶ï¼Œä¸ç®¡æ˜¯å†’æ³¡ç±»å‹äº‹ä»¶è¿˜æ˜¯æ•è·ç±»å‹äº‹ä»¶ï¼Œéƒ½ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtdè§¦å‘â€ã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°trå…ƒç´ ï¼Œtrå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tbodyå…ƒç´ ï¼Œtbodyå…ƒç´ ç»‘å®šäº†å†’æ³¡ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œï¼Œè¾“å‡ºâ€œtbodyè§¦å‘â€ã€‚
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œæ‰§è¡Œåˆ°tableå…ƒç´ ï¼Œtableå…ƒç´ ç»‘å®šäº†æ•è·ç±»å‹äº‹ä»¶ï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡ï¼Œæ²¡æœ‰è¾“å‡ºã€‚

å¯¹tableå…ƒç´ å’Œtdå…ƒç´ ç»‘å®šå†’æ³¡ç±»å‹äº‹ä»¶ï¼Œå¯¹tbodyå…ƒç´ å’Œtrå…ƒç´ ç»‘å®šæ•è·ç±»å‹äº‹ä»¶ï¼Œåœ¨å•å‡»tdå…ƒç´ çš„æ—¶å€™ï¼Œç»“æœä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ
```js
// äº‹ä»¶å†’æ³¡
table.addEventListener('click', function () {
    console.log('tableè§¦å‘');
}, false);

// äº‹ä»¶æ•è·
tbody.addEventListener('click', function () {
    console.log('tbodyè§¦å‘');
}, true);

// äº‹ä»¶æ•è·
tr.addEventListener('click', function () {
    console.log('trè§¦å‘');
}, true);

// äº‹ä»¶å†’æ³¡
td.addEventListener('click', function () {
    console.log('tdè§¦å‘');
}, false);

// tbodyè§¦å‘
// trè§¦å‘
// tdè§¦å‘
// tableè§¦å‘
```
## äº‹ä»¶å¤„ç†ç¨‹åºğŸ‘ğŸ‘ğŸ‘
> é€šè¿‡addEventListener()å‡½æ•°ç»™å…ƒç´ ç»‘å®šäº†äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™åªæ˜¯å…¶ä¸­çš„ä¸€ç§å®ç°æ–¹å¼ã€‚

ç®€å•ç†è§£äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±æ˜¯å“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°ï¼Œä¾‹å¦‚onclick()å‡½æ•°ã€onload()å‡½æ•°å°±æ˜¯å“åº”å•å‡»ã€åŠ è½½äº‹ä»¶çš„å‡½æ•°ï¼Œå¯¹åº”çš„æ˜¯ä¸€æ®µJavaScriptçš„å‡½æ•°ä»£ç ã€‚

æ ¹æ®W3C DOMæ ‡å‡†ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºåˆ†ä¸ºDOM0ã€DOM2ã€DOM3è¿™3ç§çº§åˆ«çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚ç”±äºåœ¨DOM1ä¸­å¹¶æ²¡æœ‰å®šä¹‰äº‹ä»¶çš„ç›¸å…³å†…å®¹ï¼Œå› æ­¤æ²¡æœ‰æ‰€è°“çš„DOM1çº§äº‹ä»¶å¤„ç†ç¨‹åºã€‚

### DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº
ä¸€ç§æ˜¯å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªäº‹ä»¶å¤„ç†å±æ€§ï¼Œæœ‰ä¸¤ç§è¡¨ç°å½¢å¼ã€‚ç¬¬ä¸€ç§æ˜¯å…ˆé€šè¿‡JavaScriptä»£ç è·å–DOMå…ƒç´ ï¼Œå†å°†å‡½æ•°èµ‹å€¼ç»™å¯¹åº”çš„äº‹ä»¶å±æ€§ã€‚
```js
var btn = document.getElementById("btn"); 
btn.onclick = function(){}
```
è¿˜æœ‰ä¸€ç§æ˜¯ç›´æ¥åœ¨htmlä¸­è®¾ç½®å¯¹åº”äº‹ä»¶å±æ€§çš„å€¼ï¼Œå€¼æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ï¼Œä¸€ç§æ˜¯æ‰§è¡Œçš„å‡½æ•°ä½“ï¼Œå¦ä¸€ç§æ˜¯å‡½æ•°åï¼Œç„¶ååœ¨scriptæ ‡ç­¾ä¸­å®šä¹‰è¯¥å‡½æ•°ã€‚
```html
<button onclick="alert('é¢è¯•å…');">å•å‡»</button>
<button onclick="clickFn()">å•å‡»</button>
<script>
    function clickFn() {
        alert('é¢è¯•å…');
    }
</script>
```
ä»¥ä¸Šä¸¤ç§åŒæ—¶å­˜åœ¨æ—¶ï¼Œç¬¬ä¸€ç§åœ¨JavaScriptä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†ç¨‹åºä¼šè¦†ç›–æ‰åé¢åœ¨htmlæ ‡ç­¾ä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚

> DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åºåªæ”¯æŒäº‹ä»¶å†’æ³¡é˜¶æ®µ

- ä¼˜ç‚¹ï¼šç®€å•ä¸”å¯ä»¥è·¨æµè§ˆå™¨ã€‚
- ç¼ºç‚¹ï¼šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºåªèƒ½ç»‘å®šä¸€ä¸ªå‡½æ•°ã€‚

```html
<!-- ä½¿ç”¨ä¸¤ç§æ–¹æ³•ç»‘å®šonclickäº‹ä»¶å¤„ç†ç¨‹åºã€‚ -->
<button class="btn" id="btn" onclick="doClick()">click me</button>
<script>
var btn = document.getElementById("btn");
btn.onclick = function(){
    console.log('123'); // 123
};
function doClick() {
    console.log('456');
}
// å¦‚éœ€åˆ é™¤å…ƒç´ ç»‘å®šçš„äº‹ä»¶ï¼Œåªéœ€è¦å°†å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºè®¾ç½®ä¸ºnullå³å¯ã€‚
btn.onclick = null;
</script>
```
### DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº
å½“äº‹ä»¶å‘ç”Ÿåœ¨èŠ‚ç‚¹æ—¶ï¼Œç›®æ ‡å…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°å°±ä¼šè¢«è§¦å‘ï¼Œè€Œä¸”ç›®æ ‡å…ƒç´ çš„æ¯ä¸ªç¥–å…ˆèŠ‚ç‚¹ä¹Ÿä¼šæŒ‰ç…§äº‹ä»¶æµé¡ºåºè§¦å‘å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚

DOM2çº§äº‹ä»¶å¤„ç†æ–¹å¼è§„å®šäº†æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºå’Œåˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºçš„æ–¹æ³•

é’ˆå¯¹DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¸åŒçš„æµè§ˆå™¨å‚å•†åˆ¶å®šäº†ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸ºIEæµè§ˆå™¨å’ŒéIEæµè§ˆå™¨ã€‚

IE
- åœ¨IE10åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œåªæ”¯æŒäº‹ä»¶å†’æ³¡é˜¶æ®µã€‚
- åœ¨IE11ä¸­åŒæ—¶æ”¯æŒäº‹ä»¶æ•è·é˜¶æ®µä¸äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚åœ¨IE10åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡attachEvent()å‡½æ•°æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡detachEvent()å‡½æ•°åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚
```js
element.attachEvent("on"+ eventName, handler); // æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº
element.detachEvent("on"+ eventName, handler); // åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº
```
- åœ¨IE11åŠå…¶ä»–éIEæµè§ˆå™¨ä¸­ï¼ŒåŒæ—¶æ”¯æŒäº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡ä¸¤ä¸ªé˜¶æ®µï¼Œå¯ä»¥é€šè¿‡addEventListener()å‡½æ•°æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œé€šè¿‡removeEventListener()å‡½æ•°åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚
```js
addEventListener(eventName, handler, useCapture);     //æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº
removeEventListener(eventName, handler, useCapture);  //åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº
```
å…¶ä¸­çš„useCaptureå‚æ•°è¡¨ç¤ºæ˜¯å¦æ”¯æŒäº‹ä»¶æ•è·ï¼Œtrueè¡¨ç¤ºæ”¯æŒäº‹ä»¶æ•è·ï¼Œfalseè¡¨ç¤ºæ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œé»˜è®¤çŠ¶æ€ä¸ºfalseã€‚

#### å…±åŒç‚¹
1ï¸âƒ£åœ¨DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œä¸ç®¡æ˜¯IEæµè§ˆå™¨è¿˜æ˜¯éIEæµè§ˆå™¨éƒ½æ”¯æŒå¯¹åŒä¸€ä¸ªäº‹ä»¶ç»‘å®šå¤šä¸ªå¤„ç†å‡½æ•°ã€‚
```js
var handler1 = function (){}
var handler2 = function (){}
// ---------------IE10åŠä»¥ä¸‹------------------
btn.attachEvent('onclick', handler1);
btn.attachEvent('onclick', handler2);
// ---------------IE11åŠéIE-----------------
btn.addEventListener('click', handler1);
btn.addEventListener('click', handler2);
```
å¦‚ä¸‹é¢çš„æ‰€ç¤ºï¼Œåœ¨divä¸ŠåŒæ—¶ç»‘å®šäº†ä¸¤ä¸ªclickå‡½æ•°ã€‚
```html
<div id="wrap">å•å‡»æˆ‘è§¦å‘äº‹ä»¶</div>
<script>
var wrap = document.getElementById('wrap');
wrap.addEventListener('click', function() {
    console.log('123'); // 123
}, false);
wrap.addEventListener('click', function () {
    console.log('456'); // 456
}, false);
</script>
```
2ï¸âƒ£åœ¨éœ€è¦åˆ é™¤ç»‘å®šçš„äº‹ä»¶æ—¶ï¼Œä¸èƒ½åˆ é™¤åŒ¿åå‡½æ•°ï¼Œå› ä¸ºæ·»åŠ å’Œåˆ é™¤çš„å¿…é¡»æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢è¿™ç§åŒæ—¶ç»‘å®šå’Œå–æ¶ˆhandler()å‡½æ•°çš„æƒ…å†µï¼Œå¯ä»¥åˆ é™¤æ‰ç»‘å®šçš„äº‹ä»¶ã€‚
```js
var wrap = document.getElementById('wrap');
var handler = function () {
    console.log('789');
};
// ç¬¬ä¸€ç§æ–¹å¼ç»‘å®šå’Œå–æ¶ˆçš„æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤å¯ä»¥å–æ¶ˆç»‘å®šçš„äº‹ä»¶
wrap.addEventListener('click', handler, false);
wrap.removeEventListener('click', handler);
```
è€Œå¦‚æœé‡‡ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œåˆ™æ— æ³•å–æ¶ˆç»‘å®šçš„äº‹ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨çš„éƒ½æ˜¯åŒ¿åå‡½æ•°çš„å½¢å¼ï¼Œç»‘å®šä¸å–æ¶ˆçš„å‡½æ•°å¹¶ä¸æ˜¯åŒä¸€ä¸ªã€‚
```js
wrap.addEventListener('click', function () {
    console.log('123');
}, false);
wrap.removeEventListener('click', function () {});
```
#### ä¸åŒç‚¹
1ï¸âƒ£åœ¨IEæµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨attachEvent()å‡½æ•°ä¸ºåŒä¸€ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œä¼šæŒ‰ç…§æ·»åŠ çš„ç›¸åé¡ºåºæ‰§è¡Œã€‚

```js
// åœ¨ä¸€ä¸ªbuttonå…ƒç´ ä¸Šä½¿ç”¨attachEvent()å‡½æ•°å…ˆåç»‘å®šäº†ä¸¤ä¸ªonclickäº‹ä»¶å¤„ç†ç¨‹åº
var btn = document.getElementById("mybtn");
btn.attachEvent("onclick",function(){
    console.log("clicked");
});
btn.attachEvent("onclick",function(){
    console.log("hello world!"); 
});
// hello world!
// clicked
```
2ï¸âƒ£åœ¨IEæµè§ˆå™¨ä¸‹ï¼Œä½¿ç”¨attachEvent()å‡½æ•°æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œå› æ­¤**thisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸwindow**ã€‚åœ¨éIEæµè§ˆå™¨ä¸‹ï¼Œä½¿ç”¨addEventListener()å‡½æ•°æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºåœ¨æŒ‡å®šçš„å…ƒç´ å†…éƒ¨æ‰§è¡Œï¼Œå› æ­¤**thisæŒ‡å‘ç»‘å®šçš„å…ƒç´ **ã€‚
```html
<button id="mybtn">å•å‡»</button>
<script>
  var btn = document.getElementById("mybtn");
  // IEæµè§ˆå™¨
  btn.attachEvent("onclick", function () {
    alert(this); // æŒ‡å‘window
  });
  // éIEæµè§ˆå™¨
  btn.addEventListener("click", function () {
    alert(this); // æŒ‡å‘ç»‘å®šçš„å…ƒç´ 
  });
</script>
```
å› ä¸ºæµè§ˆå™¨çš„å·®å¼‚æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥å®ç°DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦é’ˆå¯¹ä¸åŒçš„æµè§ˆå™¨åšå…¼å®¹æ€§å¤„ç†ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ

```js
// ä»¥ä¸‹æ˜¯ä¸€æ®µé’ˆå¯¹ä¸åŒæµè§ˆå™¨æ‰€åšçš„å°è£…å¤„ç†ä»£ç ã€‚
var EventUtil = {
    addEventHandler: function (element, type, handler) {
        if (element.addEventListener) {
            element.addEventListener(type, handler);
        } else if (element.attachEvent){
            element.attachEvent("on" + type, handler);
        } else {
            element["on" + type] = handler;
        }
    },
    removeEventHandler: function (element, type, handler) {
        if (element.addEventListener) {
            element.removeEventListener(type, handler);
        } else if (element.detachEvent){
            element.detachEvent("on" + type, handler);
        } else {
            element["on" + type] = null;
        }
    }
}
```
#### DOM3çº§äº‹ä»¶å¤„ç†ç¨‹åº
æœ€é‡è¦çš„åŒºåˆ«åœ¨äºDOM3çº§äº‹ä»¶å¤„ç†ç¨‹åºå…è®¸è‡ªå®šä¹‰äº‹ä»¶ï¼Œè‡ªå®šä¹‰äº‹ä»¶ç”±createEvent("CustomEvent")å‡½æ•°åˆ›å»ºï¼Œè¿”å›çš„å¯¹è±¡æœ‰ä¸€ä¸ªinitCustomEvent()å‡½æ•°ï¼Œé€šè¿‡ä¼ é€’å¯¹åº”çš„å‚æ•°å¯ä»¥è‡ªå®šä¹‰äº‹ä»¶ã€‚
å‡½æ•°å¯ä»¥æ¥æ”¶ä»¥ä¸‹4ä¸ªå‚æ•°ã€‚
- typeï¼šå­—ç¬¦ä¸²ã€è§¦å‘çš„äº‹ä»¶ç±»å‹ã€è‡ªå®šä¹‰ï¼Œä¾‹å¦‚â€œkeyDownâ€ï¼Œâ€œselectedChangeâ€ã€‚
- bubbleï¼ˆå¸ƒå°”å€¼ï¼‰ï¼šè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥å†’æ³¡ã€‚
- cancelableï¼ˆå¸ƒå°”å€¼ï¼‰ï¼šè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚
- detailï¼ˆå¯¹è±¡ï¼‰ï¼šä»»æ„å€¼ï¼Œä¿å­˜åœ¨eventå¯¹è±¡çš„detailå±æ€§ä¸­ã€‚

åˆ›å»ºå®Œæˆçš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡dispatchEvent()å‡½æ•°å»æ‰‹åŠ¨è§¦å‘ï¼Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å…ƒç´ éœ€è¦å’Œç»‘å®šè‡ªå®šä¹‰äº‹ä»¶çš„å…ƒç´ ä¸ºåŒä¸€ä¸ªå…ƒç´ ã€‚

å®ç°çš„åœºæ™¯æ˜¯ï¼šåœ¨é¡µé¢åˆå§‹åŒ–æ—¶åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶myEventï¼Œé¡µé¢ä¸Šæœ‰ä¸ªdivç›‘å¬è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶myEventï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªbuttonæŒ‰é’®ç»‘å®šäº†å•å‡»äº‹ä»¶ï¼›å½“æˆ‘ä»¬å•å‡»buttonæ—¶ï¼Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œç”±divç›‘å¬åˆ°ï¼Œç„¶ååšå¯¹åº”çš„å¤„ç†ã€‚
- åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶ã€‚
- ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ã€‚
- è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ã€‚
```html
<div id="watchDiv">ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶çš„divå…ƒç´ </div>
<button id="btn">å•å‡»è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</button>
<script>
  // 1ï¸âƒ£åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶ï¼šé€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ã€‚è¯¥è‡ªå®šä¹‰äº‹ä»¶æ”¯æŒå†’æ³¡è€Œä¸”ä¼šæºå¸¦å‚æ•°detailDataã€‚
  // åœ¨åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶ä¹‹å‰ï¼Œéœ€è¦åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒDOM3çº§äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¯ä»¥é€šè¿‡åˆ¤æ–­ä¸‹é¢ä»£ç çš„è¿”å›å€¼æ¥ç¡®è®¤
  document.implementation.hasFeature('CustomEvents', '3.0'); // trueï¼šåˆ™è¡¨ç¤ºæµè§ˆå™¨æ”¯æŒï¼Œåä¹‹åˆ™ã€‚
  var customEvent;
  // åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶
  (function () {
    if(document.implementation.hasFeature('CustomEvents','3.0')) {
      var detailData = { name: 'ming' };
      customEvent = document.createEvent('CustomEvent');
      customEvent.initCustomEvent("myEvent", true, false, detailData);
    }
  })();
  // 2ï¸âƒ£ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼šé€šè¿‡addEventListener()å‡½æ•°ç›‘å¬è‡ªå®šä¹‰çš„myEventäº‹ä»¶ã€‚
  var div = document.querySelector("#watchDiv"); // è·å–å…ƒç´ 
  div.addEventListener('myEvent', function (e) { // ç›‘å¬myEventäº‹ä»¶
    console.log('divç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œï¼Œæºå¸¦çš„å‚æ•°ä¸ºï¼š', e.detail);
  })
  // 3ï¸âƒ£è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼šå°†è§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å…¥å£æ”¾åœ¨buttonä¸Šï¼Œå½“å•å‡»buttonæ—¶ä¼šé€šè¿‡dispatchEvent()å‡½æ•°è§¦å‘myEventäº‹ä»¶ã€‚
  var btn = document.querySelector('#btn'); // è·å–å…ƒç´ 
  btn.addEventListener('click', function() { // ç»‘å®šclickäº‹ä»¶ï¼Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶
    div.dispatchEvent(customEvent);
  })
 
</script>
```
run, click button
```js
  divç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œï¼Œæºå¸¦çš„å‚æ•°ä¸ºï¼š{ name: "ming" }
```
è¯¥ç»“æœè¡¨æ˜ï¼Œåœ¨divä¸Šç›‘å¬çš„è‡ªå®šä¹‰äº‹ä»¶å¾—åˆ°äº†è§¦å‘ï¼Œä¼ é€’çš„detailDataå‚æ•°ä¹Ÿå¾—ä»¥æ¥æ”¶ã€‚
è‡ªå®šä¹‰äº‹ä»¶æ”¯æŒäº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–è‡ªå®šä¹‰äº‹ä»¶çš„initCustomEvent()å‡½æ•°ä¸­é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æ¥è®¾ç½®äº‹ä»¶æ˜¯å¦å¯ä»¥å†’æ³¡ï¼Œä¸Šè¿°ä¾‹å­ä¸­è‡ªå®šä¹‰çš„myEventäº‹ä»¶æ˜¯æ”¯æŒå†’æ³¡çš„ã€‚
```js
// æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨documentä¸Šå¢åŠ äº†å¯¹è‡ªå®šä¹‰çš„myEventäº‹ä»¶çš„ç›‘å¬ã€‚
document.addEventListener('myEvent', function () {
  console.log('documentç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œ');
})
```
click button
```js
divç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œï¼Œæºå¸¦çš„å‚æ•°ä¸ºï¼š{ name: "ming" }
documentç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œ
```
é€šè¿‡ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç”±äºè‡ªå®šä¹‰çš„myEventäº‹ä»¶æ˜¯æ”¯æŒäº‹ä»¶å†’æ³¡çš„ï¼Œæ‰€ä»¥divå’Œdocumentéƒ½ä¼šç›‘å¬åˆ°myEventäº‹ä»¶çš„æ‰§è¡Œï¼Œè¾“å‡ºå¯¹åº”çš„ç»“æœã€‚
```js
// å½“myEventäº‹ä»¶è®¾ç½®ä¸ºä¸æ”¯æŒäº‹ä»¶å†’æ³¡æ—¶ã€‚
if(document.implementation.hasFeature('CustomEvents', '3.0')) {
  var detailData = { name: 'ming' };
  customEvent = document.createEvent("CustomEvent");
  // ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºfalseï¼Œè¡¨ç¤ºä¸æ”¯æŒäº‹ä»¶å†’æ³¡
  customEvent.initCustomEvent('myEvent', false, false, detailData);
}
```
click button
```js
divç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶çš„æ‰§è¡Œï¼Œæºå¸¦çš„å‚æ•°ä¸ºï¼š{ name: "ming" }
```
ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œdocumentä¸Šç›‘å¬çš„myEventäº‹ä»¶å¹¶æœªè§¦å‘ï¼Œäº‹ä»¶å†’æ³¡è¢«é˜»æ­¢äº†ã€‚

## Eventå¯¹è±¡
> äº‹ä»¶åœ¨æµè§ˆå™¨ä¸­æ˜¯ä»¥Eventå¯¹è±¡çš„å½¢å¼å­˜åœ¨çš„ï¼Œæ¯è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªEventå¯¹è±¡ã€‚

è¯¥å¯¹è±¡åŒ…å«æ‰€æœ‰ä¸äº‹ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬äº‹ä»¶çš„å…ƒç´ ã€äº‹ä»¶çš„ç±»å‹åŠå…¶ä»–ä¸ç‰¹å®šäº‹ä»¶ç›¸å…³çš„ä¿¡æ¯ã€‚
å› ä¸ºEventå¯¹è±¡åœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„å®ç°æ˜¯æœ‰å·®å¼‚æ€§çš„ï¼Œæµ‹è¯•æµè§ˆå™¨ç±»å‹ä¸ç‰ˆæœ¬å·åˆ†åˆ«æ˜¯ï¼šSafari 10.0.3ç‰ˆæœ¬ã€Firefox 61.0.1ç‰ˆæœ¬ã€Chrome 68.0.3440ç‰ˆæœ¬ã€‚
### è·å–Eventå¯¹è±¡
åœ¨ç»™å…ƒç´ ç»‘å®šç‰¹å®šçš„äº‹ä»¶å¤„ç†ç¨‹åºæ—¶ï¼Œå¯ä»¥è·å–åˆ°Eventå¯¹è±¡ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¸åŒæµè§ˆå™¨çš„å·®å¼‚æ€§ï¼Œè·å–Eventå¯¹è±¡çš„æ–¹å¼ä¹Ÿä¸åŒã€‚

åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œè·å–Eventå¯¹è±¡çš„æ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§ã€‚
- Eventå¯¹è±¡ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå‚æ•°åä¸ºeventã€‚
- é€šè¿‡window.eventå±æ€§è·å–Eventå¯¹è±¡ã€‚
```js
// åŒä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¸­
var btn = document.querySelector('#btn');
btn.addEventListener('click', function (event) {
  // æ–¹å¼1ï¼ševentä½œä¸ºå‚æ•°ä¼ å…¥
  console.log(event);
  // æ–¹å¼2ï¼šé€šè¿‡window.eventè·å–
  var winEvent = window.event;
  console.log(winEvent);
  console.log(event == winEvent);
})
```
åˆ†åˆ«åœ¨Chromeã€Firefoxå’ŒSafariæµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶å•å‡»idä¸ºbtnçš„æŒ‰é’®ã€‚
```js
// åœ¨Chromeæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
MouseEvent {isTrusted: true, screenX: 119, screenY: 321, â€¦}
MouseEvent {isTrusted: true, screenX: 119, screenY: 321, â€¦}
true
// åœ¨Firefoxæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
click { target: button#btn2, buttons: 0, clientX: 145, â€¦}
undefined
false
// åœ¨Safariæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
MouseEvent {isTrusted: true, screenX: 119, screenY: 321, â€¦}
MouseEvent {isTrusted: true, screenX: 119, screenY: 321, â€¦}
true
```
> Chromeæµè§ˆå™¨å’ŒSafariæµè§ˆå™¨åŒæ—¶æ”¯æŒä¸¤ç§æ–¹å¼è·å–eventå¯¹è±¡ï¼Œè€ŒFirefoxæµè§ˆå™¨åªæ”¯æŒè¿™ç§å°†eventä½œä¸ºå‚æ•°ä¼ å…¥çš„æ–¹å¼ã€‚

```js
// åœ¨è·å–äº‹ä»¶å¯¹è±¡æ—¶ï¼Œä¸ºäº†æ”¯æŒä¸åŒæµè§ˆå™¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥å®ç°å…¼å®¹ã€‚
var EventUtil = {
  // è·å–äº‹ä»¶å¯¹è±¡
  getEvent: function (event) {
    return event || window.event;
  }
}
```
### è·å–äº‹ä»¶çš„ç›®æ ‡å…ƒç´ 
åœ¨IEæµè§ˆå™¨ä¸­ï¼Œeventå¯¹è±¡ä½¿ç”¨srcElementå±æ€§æ¥è¡¨ç¤ºäº‹ä»¶çš„ç›®æ ‡å…ƒç´ ï¼›è€Œåœ¨éIEæµè§ˆå™¨ä¸­ï¼Œeventå¯¹è±¡ä½¿ç”¨targetå±æ€§æ¥è¡¨ç¤ºäº‹ä»¶çš„ç›®æ ‡å…ƒç´ ï¼Œä¸ºäº†æä¾›ä¸IEæµè§ˆå™¨ä¸‹eventå¯¹è±¡ç›¸åŒçš„ç‰¹æ€§ï¼ŒæŸäº›éIEæµè§ˆå™¨ä¹Ÿæ”¯æŒsrcElementå±æ€§ã€‚

```js
// åœ¨åŒä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¸­ä½¿ç”¨ä¸Šè¿°ä¸¤ç§å±æ€§æ¥è·å–äº‹ä»¶çš„ç›®æ ‡å…ƒç´ ã€‚
btn.addEventListener('click', function (event) {
  // è·å–eventå¯¹è±¡
  var event = EventUtil.getEvent(event);
  // ä½¿ç”¨ä¸¤ç§å±æ€§è·å–äº‹ä»¶çš„ç›®æ ‡å…ƒç´ 
  var NolETarget = event.target;
  var IETarget = event.srcElement;
  console.log(NolETarget);
  console.log(IETarget);
})
```
åˆ†åˆ«åœ¨Chromeã€Firefoxå’ŒSafariæµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶å•å‡»idä¸ºbtnçš„æŒ‰é’®ã€‚
```js
// åœ¨Chromeæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
<button id="btn">å•å‡»</button>
<button id="btn">å•å‡»</button>
// åœ¨Firefoxæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
<button id="btn">å•å‡»</button>
undefined
// åœ¨Safariæµè§ˆå™¨ä¸­è¿è¡Œæ—¶
<button id="btn">å•å‡»</button>
<button id="btn">å•å‡»</button>
```
ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒChromeæµè§ˆå™¨å’ŒSafariæµè§ˆå™¨åŒæ—¶æ”¯æŒä¸¤ç§å±æ€§æ¥è·å–äº‹ä»¶ç›®æ ‡å…ƒç´ ï¼Œè€ŒFirefoxæµè§ˆå™¨åªæ”¯æŒevent.targetå±æ€§æ¥è·å–äº‹ä»¶ç›®æ ‡å…ƒç´ ã€‚
```js
// å…¼å®¹
var EventUtil = {
  // è·å–äº‹ä»¶ç›®æ ‡å…ƒç´ 
  getTarget: function () {
    return event.target || event.srcElement;
  }
}
```
### targetä¸currentTargetå±æ€§
> ä¸¤è€…éƒ½å¯ä»¥è¡¨ç¤ºäº‹ä»¶çš„ç›®æ ‡å…ƒç´ ï¼Œä½†æ˜¯åœ¨äº‹ä»¶æµä¸­ä¸¤è€…å´æœ‰ä¸åŒçš„æ„ä¹‰ã€‚

- targetå±æ€§åœ¨**äº‹ä»¶ç›®æ ‡é˜¶æ®µ**ï¼Œç†è§£ä¸ºçœŸå®æ“ä½œçš„ç›®æ ‡å…ƒç´ ã€‚
- currentTargetå±æ€§**åœ¨äº‹ä»¶æ•è·ã€äº‹ä»¶ç›®æ ‡ã€äº‹ä»¶å†’æ³¡**è¿™3ä¸ªé˜¶æ®µï¼Œç†è§£ä¸ºå½“å‰äº‹ä»¶æµæ‰€å¤„çš„æŸä¸ªé˜¶æ®µå¯¹åº”çš„ç›®æ ‡å…ƒç´ ã€‚

ä½¿ç”¨tableå…ƒç´ ï¼Œåˆ†åˆ«åœ¨tableã€tbodyã€trã€tdå…ƒç´ ä¸Šç»‘å®šäº‹ä»¶æ•è·é˜¶æ®µå’Œäº‹ä»¶å†’æ³¡é˜¶æ®µçš„clickäº‹ä»¶ã€‚clickäº‹ä»¶ä¸­è¾“å‡ºå¯¹åº”çš„targetå±æ€§å’ŒcurrentTargetå±æ€§å€¼ï¼Œä¸ºäº†æ›´ç›´è§‚åœ°çœ‹å‡ºç»“æœï¼Œæˆ‘ä»¬å–targetå¯¹è±¡çš„tagNameå±æ€§æ¥è·å–æ ‡ç­¾åã€‚
```html
<table border="1">
    <tbody>
        <tr>
            <td>è¿™æ˜¯tdçš„å…ƒç´ </td>
        </tr>
    </tbody>
</table>
<script>
  var table = document.querySelector('table');
  var tbody = document.querySelector('tbody');
  var tr = document.querySelector('tr');
  var td = document.querySelector('td');
  // è·å–targetå±æ€§å’ŒcurrentTargetå±æ€§çš„å…ƒç´ æ ‡ç­¾å
  function getTargetAndCurrentTarget(event, stage) {
      var event = EventUtil.getEvent(event);
      var stageStr;
      if (stage === 'bubble') {
          stageStr = 'äº‹ä»¶å†’æ³¡é˜¶æ®µ';
      } else if(stage === 'capture'){
          stageStr = 'äº‹ä»¶æ•è·é˜¶æ®µ';
      } else {
          stageStr = 'äº‹ä»¶ç›®æ ‡é˜¶æ®µ';
      }
      console.log(stageStr, 'target:' + event.target.tagName.toLowerCase(),  'currentTarget: ' + event.currentTarget.tagName.toLowerCase());
  }

  // äº‹ä»¶æ•è·
  table.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'capture');
  }, true);
  // äº‹ä»¶æ•è·
  tbody.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'capture');
  }, true);
  // äº‹ä»¶æ•è·
  tr.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'capture');
  }, true);
  // äº‹ä»¶æ•è·
  td.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'target');
  }, true);

  // äº‹ä»¶å†’æ³¡
  table.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'bubble');
  }, false);
  // äº‹ä»¶å†’æ³¡
  tbody.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'bubble');
  }, false);
  // äº‹ä»¶å†’æ³¡
  tr.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'bubble');
  }, false);
  // äº‹ä»¶å†’æ³¡
  td.addEventListener('click', function (event) {
      getTargetAndCurrentTarget(event, 'target');
  }, false);
</script>
```
å½“**å•å‡»tdå…ƒç´ **æ—¶ï¼Œä¼šè§¦å‘æ•´ä¸ªäº‹ä»¶æµï¼Œå¾—åˆ°çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚
```js
äº‹ä»¶æ•è·é˜¶æ®µ target:td currentTarget: table
äº‹ä»¶æ•è·é˜¶æ®µ target:td currentTarget: tbody
äº‹ä»¶æ•è·é˜¶æ®µ target:td currentTarget: tr
äº‹ä»¶ç›®æ ‡é˜¶æ®µ target:td currentTarget: td
äº‹ä»¶ç›®æ ‡é˜¶æ®µ target:td currentTarget: td
äº‹ä»¶å†’æ³¡é˜¶æ®µ target:td currentTarget: tr
äº‹ä»¶å†’æ³¡é˜¶æ®µ target:td currentTarget: tbody
äº‹ä»¶å†’æ³¡é˜¶æ®µ target:td currentTarget: table
```
ä¸ºä»€ä¹ˆä¼šå¾—å‡ºè¿™ä¸ªç»“æœå‘¢ï¼Ÿ

åœ¨äº‹ä»¶æµçš„ä»»ä½•é˜¶æ®µï¼Œtargetå±æ€§å§‹ç»ˆæŒ‡å‘çš„æ˜¯å®é™…æ“ä½œçš„å…ƒç´ ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨tdå…ƒç´ ä¸Šè¿›è¡Œçš„å•å‡»æ“ä½œï¼Œæ‰€ä»¥targetå±æ€§å¯¹åº”çš„æ˜¯tdã€‚

åœ¨äº‹ä»¶æµçš„äº‹ä»¶æ•è·é˜¶æ®µæˆ–è€…äº‹ä»¶å†’æ³¡é˜¶æ®µï¼ŒcurrentTargetæŒ‡å‘çš„æ˜¯äº‹ä»¶æµæ‰€å¤„çš„æŸä¸ªç‰¹å®šé˜¶æ®µå¯¹åº”çš„å…ƒç´ ã€‚åœ¨è¯¥å®ä¾‹ä¸­ï¼Œäº‹ä»¶æ•è·é˜¶æ®µå…ƒç´ çš„æµè½¬é¡ºåºä¸º`table > tbody > tr`ï¼Œäº‹ä»¶å†’æ³¡é˜¶æ®µå…ƒç´ çš„æµè½¬é¡ºåºä¸º`tr > tbody > table`ã€‚

åœ¨äº‹ä»¶ç›®æ ‡é˜¶æ®µï¼ŒcurrentTargetå±æ€§æŒ‡å‘çš„ä¹Ÿæ˜¯å®é™…æ“ä½œçš„å…ƒç´ ï¼Œå³tdã€‚
å› æ­¤åªæœ‰åœ¨äº‹ä»¶ç›®æ ‡é˜¶æ®µï¼Œtargetå±æ€§å’ŒcurrentTargetå±æ€§æ‰æŒ‡å‘åŒä¸€ä¸ªå…ƒç´ ã€‚

#### ç»ƒä¹ 
é¡µé¢ä¸Šæœ‰ä¸€ä¸ªul-liæ ‡ç­¾ï¼ŒåŒæ—¶åœ¨ulå’Œç¬¬ä¸€ä¸ªliä¸Šç»‘å®šäº‹ä»¶å†’æ³¡é˜¶æ®µçš„clickäº‹ä»¶ï¼Œæ‰€æœ‰ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
```html
<ul id="ul">
    <li id="li">ç¬¬ä¸€ä¸ªå…ƒç´ </li>
    <li>ç¬¬äºŒä¸ªå…ƒç´ </li>
</ul>
<script>
    var ul = document.querySelector('#ul');
    var li = document.querySelector('#li');
    ul.addEventListener('click', function (event) {
        getTargetAndCurrentTarget(event, 'bubble');
    });
    li.addEventListener('click', function (event) {
        getTargetAndCurrentTarget(event, 'bubble');
    });
</script>
```
click li
```js
// I
li li
li ul
// result
äº‹ä»¶å†’æ³¡é˜¶æ®µ target:li currentTarget: li
äº‹ä»¶å†’æ³¡é˜¶æ®µ target:li currentTarget: ul
```
### é˜»æ­¢äº‹ä»¶å†’æ³¡
æœ‰ä¸€ä¸ªè¡¨ç¤ºå­¦ç”ŸåŸºç¡€ä¿¡æ¯çš„å®¹å™¨ulï¼Œæ¯ä¸ªliå…ƒç´ éƒ½è¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯ï¼Œå•å‡»liå…ƒç´ ä¼šæ”¹å˜liçš„èƒŒæ™¯è‰²ä»¥è¡¨ç¤ºé€‰ä¸­çš„æ ‡è¯†ã€‚åœ¨æ¯ä¸ªliå…ƒç´ å†…éƒ¨ä¼šæœ‰ä¸€ä¸ªè¡¨ç¤ºåˆ é™¤çš„buttonæŒ‰é’®ï¼Œå•å‡»buttonæŒ‰é’®åˆ™ä¼šæç¤ºæ˜¯å¦åˆ é™¤ï¼Œå•å‡»ç¡®å®šåˆ™ä¼šåˆ é™¤è¯¥å…ƒç´ ã€‚
```html
<ul>
    <li>
        <p>å§“å:å°æ˜</p>
        <p>å­¦å·:20180101</p>
        <button class="btn btn-default" id="btn">åˆ é™¤</button>
    </li>
</ul>
<script>
    var li = document.querySelector('li');
    var btn = document.querySelector('#btn');
    li.addEventListener('click', function (event) {
        // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
        console.log('å•å‡»äº†liï¼Œåšå¯¹åº”çš„å¤„ç†');
    });
    btn.addEventListener('click', function (event) {
        // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
        console.log('å•å‡»äº†buttonï¼Œåšå¯¹åº”çš„å¤„ç†');
    });
</script>
```
click button
```js
å•å‡»äº†buttonï¼Œåšå¯¹åº”çš„å¤„ç†
å•å‡»äº†liï¼Œåšå¯¹åº”çš„å¤„ç†
```
ç”±äºäº‹ä»¶å†’æ³¡çš„å­˜åœ¨ï¼Œåœ¨å•å‡»buttonæŒ‰é’®æ—¶ï¼Œäº‹ä»¶åŒæ ·ä¼šå†’æ³¡è‡³çˆ¶å…ƒç´ liä¸Šï¼Œå› æ­¤ä¸¤ä¸ªclickäº‹ä»¶éƒ½ä¼šè¢«è§¦å‘ã€‚

é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼šåœ¨buttonæŒ‰é’®çš„clickäº‹ä»¶ä¸­è°ƒç”¨event.stopPropagation()å‡½æ•°ã€‚åœ¨å•å‡»buttonæŒ‰é’®æ—¶ï¼Œäº‹ä»¶å°±**åªä¼šåœ¨äº‹ä»¶ç›®æ ‡é˜¶æ®µæ‰§è¡Œ**ï¼Œè€Œä¸ä¼šå‘ä¸Šç»§ç»­å†’æ³¡è‡³çˆ¶å…ƒç´ liä¸­ï¼Œä»è€Œè¾¾åˆ°ç›®çš„ã€‚
```js
btn.addEventListener('click', function (event) {
    var event = EventUtil.getEvent(event);
    // é˜»æ­¢äº‹ä»¶å†’æ³¡
    event.stopPropagation();
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('å•å‡»äº†buttonï¼Œåšå¯¹åº”çš„å¤„ç†');
});
```
click button
```js
å•å‡»äº†button,åšå¯¹åº”çš„å¤„ç†
```
eventå¯¹è±¡ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªstopImmediatePropagation()å‡½æ•°ï¼Œå®ƒå’ŒstopPropagation()å‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ
ä¸¤è€…çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨åŒä¸€äº‹ä»¶ç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºçš„æƒ…å†µä¸‹ã€‚
- stopPropagation()å‡½æ•°ä»…ä¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œå…¶ä»–äº‹ä»¶å¤„ç†ç¨‹åºä»ç„¶å¯ä»¥è°ƒç”¨ã€‚
- stopImmediatePropagation()å‡½æ•°ä¸ä»…ä¼šé˜»æ­¢å†’æ³¡ï¼Œä¹Ÿä¼šé˜»æ­¢å…¶ä»–äº‹ä»¶å¤„ç†ç¨‹åºçš„è°ƒç”¨ã€‚

æ²¿ç”¨ä¸Šé¢å®ä¾‹çš„ä»£ç ï¼Œå¯¹buttonæŒ‰é’®çš„clickäº‹ä»¶å¢åŠ 3ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåœ¨ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¸­ä½¿ç”¨stopPropagation()å‡½æ•°æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚
```js
var li = document.querySelector('li');
var btn = document.querySelector('#btn');
li.addEventListener('click', function (event) {
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('å•å‡»äº†liï¼Œåšå¯¹åº”çš„å¤„ç†');
});

// ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº
btn.addEventListener('click', function (event) {
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('buttonçš„ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†');
});

// ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åº
btn.addEventListener('click', function (event) {
    var event = EventUtil.getEvent(event);
    // é˜»æ­¢äº‹ä»¶å†’æ³¡
    event.stopPropagation();
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('buttonçš„ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†');
    });

// ç¬¬ä¸‰ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº
btn.addEventListener('click', function (event) {
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('buttonçš„ç¬¬ä¸‰ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†');
});
```
click button
```js
buttonçš„ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†
buttonçš„ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†
buttonçš„ç¬¬ä¸‰ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†
```
ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å†’æ³¡è¢«é˜»æ­¢ï¼Œliä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºå¹¶æœªè§¦å‘ï¼›ç»‘å®šçš„3ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºéƒ½è¢«è§¦å‘æ‰§è¡Œã€‚

ä½¿ç”¨stopImmediatePropagation()å‡½æ•°
```js
// ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åº
btn.addEventListener('click', function (event) {
    var event = EventUtil.getEvent(event);
    // é˜»æ­¢äº‹ä»¶å†’æ³¡
    event.stopImmediatePropagation();
    // çœŸå®æ“ä½œï¼Œä½¿ç”¨consoleæ¥ä»£æ›¿
    console.log('btnçš„ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†');
});
```
click button
```js
buttonçš„ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†
buttonçš„ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåšå¯¹åº”çš„å¤„ç†
```
ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å†’æ³¡è¢«é˜»æ­¢ï¼Œliä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºå¹¶æœªè§¦å‘ï¼›åªæœ‰ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†ç¨‹åºè¢«è§¦å‘æ‰§è¡Œï¼Œè€Œç¬¬ä¸‰ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå¹¶æœªæ‰§è¡Œã€‚
### é˜»æ­¢é»˜è®¤è¡Œä¸º
åœ¨ä¼—å¤šçš„HTMLæ ‡ç­¾ä¸­ï¼Œæœ‰ä¸€äº›æ ‡ç­¾æ˜¯å…·æœ‰é»˜è®¤è¡Œä¸ºçš„ï¼Œè¿™é‡Œç®€å•åœ°åˆ—ä¸¾3ä¸ªã€‚
- aæ ‡ç­¾ï¼Œåœ¨å•å‡»åé»˜è®¤è¡Œä¸ºä¼šè·³è½¬è‡³hrefå±æ€§æŒ‡å®šçš„é“¾æ¥ä¸­ã€‚
- å¤é€‰æ¡†checkboxï¼Œåœ¨å•å‡»åé»˜è®¤è¡Œä¸ºæ˜¯é€‰ä¸­çš„æ•ˆæœã€‚
- è¾“å…¥æ¡†textï¼Œåœ¨è·å–ç„¦ç‚¹åï¼Œé”®ç›˜è¾“å…¥çš„å€¼ä¼šå¯¹åº”å±•ç¤ºåˆ°textè¾“å…¥æ¡†ä¸­ã€‚

åœ¨ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯å…è®¸æ ‡ç­¾çš„é»˜è®¤è¡Œä¸ºçš„ï¼Œå°±åƒç”¨æˆ·çš„æ­£å¸¸æ“ä½œï¼Œä½†æ˜¯åœ¨æŸäº›æ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦é˜»æ­¢è¿™äº›æ ‡ç­¾çš„é»˜è®¤è¡Œä¸ºçš„ï¼ŒåŒæ ·ä½¿ç”¨ä¸Šè¿°3ç§åœºæ™¯ä½œä¸ºè¯´æ˜ã€‚
- aæ ‡ç­¾ï¼Œå‡å¦‚aæ ‡ç­¾ä¸Šæ˜¾ç¤ºçš„æ–‡æ¡ˆä¸ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬åœ¨å•å‡»aæ ‡ç­¾æ—¶å°†ä¸ä¼šè·³è½¬è‡³å¯¹åº”çš„é“¾æ¥ä¸­å»ã€‚
- å¤é€‰æ¡†checkboxï¼Œå‡å¦‚å·²é€‰ä¸­çš„å¤é€‰æ¡†åœ¨å•å‡»çš„æ—¶å€™ä¸ä¼šè¢«å–æ¶ˆï¼Œä¾ç„¶æ˜¯é€‰ä¸­çš„çŠ¶æ€ã€‚
- è¾“å…¥æ¡†textï¼Œå‡å¦‚æˆ‘ä»¬é™åˆ¶ç”¨æˆ·è¾“å…¥çš„å€¼åªèƒ½æ˜¯æ•°å­—å’Œå¤§å°å†™

é‚£ä¹ˆè¯¥å¦‚ä½•ç¼–å†™ä»£ç æ¥é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸ºå‘¢ï¼Ÿ
> é€šè¿‡event.preventDefault()å‡½æ•°å»å®ç°ã€‚

åœºæ™¯æè¿°ï¼šé™åˆ¶ç”¨æˆ·è¾“å…¥çš„å€¼åªèƒ½æ˜¯æ•°å­—å’Œå¤§å°å†™å­—æ¯ï¼Œå…¶ä»–çš„å€¼åˆ™ä¸èƒ½è¾“å…¥ï¼Œå¦‚è¾“å…¥å…¶ä»–å€¼åˆ™ç»™å‡ºæç¤ºä¿¡æ¯ï¼Œæç¤ºä¿¡æ¯åœ¨ä¸¤ç§’åæ¶ˆå¤±ã€‚

åœ¨æœ¬å®ä¾‹ä¸­ï¼Œå› ä¸ºæ¶‰åŠé”®ç›˜è¾“å…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç›‘å¬keypressäº‹ä»¶ï¼Œé€šè¿‡å…¼å®¹æ€§æ¥å¤„ç†è·å–å½“å‰æŒ‰é”®çš„å€¼ï¼Œç„¶ååˆ¤æ–­è¾“å…¥çš„å€¼æ˜¯å¦åˆæ³•ï¼Œä»è€Œæ§åˆ¶é”®ç›˜è¾“å…¥çš„è¡Œä¸ºã€‚

é”®ç›˜çš„æ¯ä¸ªé”®æœ‰å¯¹åº”çš„Unicodeç¼–ç ã€‚
éœ€è¦è·å–çš„æ•°å­—å’Œå­—æ¯çš„Unicodeç¼–ç èŒƒå›´å¦‚ä¸‹æ‰€ç¤ºã€‚
- æ•°å­—çš„Unicodeç¼–ç èŒƒå›´æ˜¯48ï½57ã€‚
- å¤§å†™å­—æ¯Aï½Zçš„Unicodeç¼–ç èŒƒå›´æ˜¯65ï½90ã€‚
- å°å†™å­—æ¯aï½zçš„Unicodeç¼–ç èŒƒå›´æ˜¯97ï½122ã€‚

åŒæ ·æ˜¯å› ä¸ºæµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ï¼ŒEventå¯¹è±¡æä¾›äº†å¤šç§ä¸åŒçš„å±æ€§æ¥è·å–é”®çš„Unicodeç¼–ç ï¼Œåˆ†åˆ«æ˜¯event.keyCodeã€event.charCodeå’Œevent.whichã€‚
```js
// å…¼å®¹æ€§å¤„ç†
var charCode = event.keyCode || event.which || event.charCode;
```
æœ€ç»ˆæ‰€å¾—çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º
```html
<input type="text" id="text">
<div id="tip"></div>
<script>
    var text = document.querySelector('#text');
    var tip = document.querySelector('#tip');
    text.addEventListener('keypress', function (event) {
        var charCode = event.keyCode || event.which || event.charCode;
        // æ»¡è¶³è¾“å…¥æ•°å­—
        var numberFlag = charCode <= 57 && charCode >= 48;
        // æ»¡è¶³è¾“å…¥å¤§å†™å­—æ¯
        var lowerFlag = charCode <= 90 && charCode >= 65;
        // æ»¡è¶³è¾“å…¥å°å†™å­—æ¯
        var supperFlag = charCode <= 122 && charCode >= 97;

        if (!numberFlag && !lowerFlag && !supperFlag) {
            // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œä¸å…è®¸è¾“å…¥
            event.preventDefault();
            tip.innerText = 'åªå…è®¸è¾“å…¥æ•°å­—å’Œå¤§å°å†™å­—æ¯';
        }
        // è®¾ç½®å®šæ—¶å™¨,æ¸…ç©ºæç¤ºè¯­
        setTimeout(function () {
            tip.innerText = '';
        }, 2000);
    });
</script>
```
è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œåœ¨é¡µé¢å‡ºç°çš„textæ–‡æœ¬æ¡†ä¸­è¿›è¡Œè¾“å…¥ï¼Œè¾“å…¥0ï½9æˆ–å¤§å°å†™å­—æ¯æ—¶å¯ä»¥æ­£å¸¸è¾“å…¥ï¼Œè€Œè¾“å…¥ä¸‹ç”»çº¿ï¼ˆ_ï¼‰ã€åŠ å·ï¼ˆ+ï¼‰ç­‰å­—ç¬¦æ—¶æ˜¯æ— æ³•è¾“å…¥çš„ï¼ŒåŒæ—¶æ–‡æœ¬æ¡†ä¸‹ä¼šå‡ºç°â€œåªå…è®¸è¾“å…¥æ•°å­—å’Œå¤§å°å†™å­—æ¯â€çš„æç¤ºã€‚

## äº‹ä»¶å§”æ‰˜
> **åˆ©ç”¨äº‹ä»¶å†’æ³¡åŸç†**ï¼Œç®¡ç†æŸä¸€ç±»å‹çš„æ‰€æœ‰äº‹ä»¶ï¼Œåˆ©ç”¨çˆ¶å…ƒç´ æ¥ä»£è¡¨å­å…ƒç´ çš„æŸä¸€ç±»å‹äº‹ä»¶çš„å¤„ç†æ–¹å¼ã€‚
### å·²æœ‰å…ƒç´ çš„äº‹ä»¶ç»‘å®š 
åœºæ™¯ï¼šå‡å¦‚é¡µé¢ä¸Šæœ‰ä¸€ä¸ªulæ ‡ç­¾ï¼Œé‡Œé¢åŒ…å«1000ä¸ªliå­æ ‡ç­¾ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å•å‡»æ¯ä¸ªliæ—¶ï¼Œè¾“å‡ºliä¸­çš„æ–‡æœ¬å†…å®¹ã€‚

1. ç»™æ¯ä¸ªliæ ‡ç­¾ç»‘å®šä¸€ä¸ªclickäº‹ä»¶ï¼Œåœ¨clickäº‹ä»¶ä¸­è¾“å‡ºliæ ‡ç­¾çš„æ–‡æœ¬å†…å®¹
```html
<ul>
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li>æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
    <!-- å‰©ä½™995 -->
</ul>
<script>
    // 1.è·å–æ‰€æœ‰çš„liæ ‡ç­¾
    var children = document.querySelectorAll('li');
    // 2.éå†æ·»åŠ clickäº‹ä»¶å¤„ç†ç¨‹åº
    for (var i = 0; i < children.length; i++) {
        children[i].addEventListener('click', function () {
            console.log(this.innerText);
        });
    }
</script>
```
click li
```js
æ–‡æœ¬1
æ–‡æœ¬6
æ–‡æœ¬9
æ–‡æœ¬7
```
é‡‡ç”¨ä¸Šè¿°çš„æ–¹æ³•å¯¹æµè§ˆå™¨çš„æ€§èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ä¸¤æ–¹é¢åŸå› ã€‚
- äº‹ä»¶å¤„ç†ç¨‹åºè¿‡å¤šå¯¼è‡´é¡µé¢äº¤äº’æ—¶é—´è¿‡é•¿ã€‚
å‡å¦‚æœ‰1000ä¸ªliå…ƒç´ ï¼Œåˆ™éœ€è¦ç»‘å®š1000ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œäº‹ä»¶å¤„ç†ç¨‹åºéœ€è¦ä¸æ–­åœ°ä¸DOMèŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œå› æ­¤å¼•èµ·æµè§ˆå™¨é‡ç»˜å’Œé‡æ’çš„æ¬¡æ•°ä¹Ÿä¼šå¢å¤šï¼Œä»è€Œä¼šå»¶é•¿é¡µé¢äº¤äº’æ—¶é—´ã€‚
- äº‹ä»¶å¤„ç†ç¨‹åºè¿‡å¤šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šã€‚
åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ã€‚å‡å¦‚é¡µé¢æœ‰10000ä¸ªliæ ‡ç­¾ï¼Œåˆ™ä¼šæœ‰10000ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå ç”¨çš„å†…å­˜ç©ºé—´ä¼šæ€¥å‰§ä¸Šå‡ï¼Œä»è€Œå½±å“æµè§ˆå™¨çš„æ€§èƒ½ã€‚

è§£å†³åŠæ³•ï¼šåˆ©ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ã€‚
ä¸»è¦æ€æƒ³æ˜¯å°†äº‹ä»¶ç»‘å®šè‡³çˆ¶å…ƒç´ ä¸Šï¼Œç„¶ååˆ©ç”¨äº‹ä»¶å†’æ³¡åŸç†ï¼Œå½“äº‹ä»¶è¿›å…¥å†’æ³¡é˜¶æ®µæ—¶ï¼Œé€šè¿‡ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Šçš„äº‹ä»¶å¯¹è±¡æ¥åˆ¤æ–­å½“å‰äº‹ä»¶æµæ­£åœ¨è¿›è¡Œçš„å…ƒç´ ã€‚å¦‚æœå’ŒæœŸæœ›çš„å…ƒç´ ç›¸åŒï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„äº‹ä»¶ä»£ç ã€‚
```js
// 1.è·å–çˆ¶å…ƒç´ 
var parent = document.querySelector('ul');
// 2.çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶
parent.addEventListener('click', function (event) {
    // 3.è·å–äº‹ä»¶å¯¹è±¡
    var event = EventUtil.getEvent(event);
    // 4.è·å–ç›®æ ‡å…ƒç´ 
    var target = EventUtil.getTarget(event);
    // 5.åˆ¤æ–­å½“å‰äº‹ä»¶æµæ‰€å¤„çš„å…ƒç´ 
    if (target.nodeName.toLowerCase() === 'li') {
          // 6.ä¸ç›®æ ‡å…ƒç´ ç›¸åŒï¼Œåšå¯¹åº”çš„å¤„ç†
        console.log(target.innerText);
    }
});
```
å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶æ˜¯ç»‘å®šåœ¨çˆ¶å…ƒç´ ulä¸Šçš„ï¼Œä¸ç®¡å­å…ƒç´ liæœ‰å¤šå°‘ä¸ªï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°é¡µé¢ä¸­äº‹ä»¶å¤„ç†ç¨‹åºçš„ä¸ªæ•°ï¼Œå› æ­¤å¯ä»¥æå¤§åœ°æé«˜æµè§ˆå™¨çš„æ€§èƒ½ã€‚

å¦‚æœåŒä¸€ä¸ªulä¸‹çš„liå­˜åœ¨é’ˆå¯¹ä¸åŒå…ƒç´ æ‰€åšçš„å¤„ç†ä¸ä¸€æ ·ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨äº‹ä»¶å§”æ‰˜ã€‚

åœºæ™¯ï¼šåœ¨é¡µé¢ä¸Šæœ‰4ä¸ªbuttonæŒ‰é’®ï¼Œåˆ†åˆ«è¡¨ç¤ºå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢è¿™4ä¸ªåŠŸèƒ½ã€‚æ¯ä¸ªæŒ‰é’®ç»‘å®šç›¸åŒçš„clickäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä½†æ˜¯å…·ä½“çš„è¡Œä¸ºä¸åŒã€‚åœ¨è¿™4ä¸ªæŒ‰é’®è§¦å‘clickäº‹ä»¶åï¼Œåˆ†åˆ«è¾“å‡ºâ€œæ–°å¢â€â€œåˆ é™¤â€â€œä¿®æ”¹â€â€œæŸ¥è¯¢â€ç­‰æ–‡å­—ã€‚
```html
<div id="box">
    <input type="button" id="add" value="æ–°å¢" />
    <input type="button" id="remove" value="åˆ é™¤" />
    <input type="button" id="update" value="ä¿®æ”¹" />
    <input type="button" id="search" value="æŸ¥è¯¢" />
</div>
<script>
  // ä¼ ç»Ÿå†™æ³•
    var add = document.querySelector('#add');
    var remove = document.querySelector('#remove');
    var update = document.querySelector('#update');
    var search = document.querySelector('#search');
    // æ–°å¢æŒ‰é’®ç»‘å®šäº‹ä»¶
    add.addEventListener('click', function () {
        console.log('æ–°å¢');
    });
    // åˆ é™¤æŒ‰é’®ç»‘å®šäº‹ä»¶
    remove.addEventListener('click', function () {
            console.log('åˆ é™¤');
    });
    // ä¿®æ”¹æŒ‰é’®ç»‘å®šäº‹ä»¶
    update.addEventListener('click', function () {
        console.log('ä¿®æ”¹');
    });
    // æŸ¥è¯¢æŒ‰é’®ç»‘å®šäº‹ä»¶
    search.addEventListener('click', function () {
        console.log('æŸ¥è¯¢');
    });
</script>
```
å¯¹äºä¸åŒçš„æŒ‰é’®éƒ½éœ€è¦ç»‘å®šä¸€ä¸ªclickäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™æ ·åœ¨æ€§èƒ½ä¸Šä¼šå­˜åœ¨ä¸€å®šçš„å½±å“ã€‚

ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼š
- è·å–buttonçš„çˆ¶å…ƒç´ ï¼Œåœ¨çˆ¶å…ƒç´ ä¸Šç»‘å®šclickäº‹ä»¶å¤„ç†ç¨‹åºã€‚
- è·å–eventäº‹ä»¶å¯¹è±¡ï¼Œç´§æ¥ç€é€šè¿‡eventäº‹ä»¶å¯¹è±¡è·å–åˆ°ç›®æ ‡å…ƒç´ ã€‚
- è·å–ç›®æ ‡å…ƒç´ çš„idå€¼ï¼Œä¸HTMLå…ƒç´ ä¸­å„ä¸ªbuttonçš„idè¿›è¡Œæ¯”è¾ƒï¼Œè¾“å‡ºå¯¹åº”çš„æ–‡å­—ã€‚
```js
// 1.è·å–çˆ¶å…ƒç´ ï¼Œå¹¶ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åº
var parent = document.querySelector('#parent');
parent.addEventListener('click', function (event) {
    // 2.è·å–eventå’Œtarget
    var event = EventUtil.getEvent(event);
    var target = EventUtil.getTarget(event);
    // 3.åˆ¤æ–­idå±æ€§ï¼Œè¾“å‡ºå¯¹åº”çš„æ–‡å­—
    switch (target.id) {
        case 'add':
            console.log('æ–°å¢');
            break;
        case 'remove':
            console.log('åˆ é™¤');
            break;
        case 'update':
            console.log('ä¿®æ”¹');
            break;
        case 'search':
            console.log('æŸ¥è¯¢');
            break;
    }
});
```
### æ–°åˆ›å»ºå…ƒç´ çš„äº‹ä»¶ç»‘å®š
åœºæ™¯ï¼šå‡å¦‚é¡µé¢ä¸Šæœ‰ä¸€ä¸ªulæ ‡ç­¾ï¼Œé‡Œé¢åŒ…å«9ä¸ªliå­æ ‡ç­¾ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å•å‡»æ¯ä¸ªliæ—¶ï¼Œè¾“å‡ºliä¸­çš„æ–‡æœ¬å†…å®¹ï¼›åœ¨é¡µé¢ä¸Šæœ‰ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œå•å‡»buttonæŒ‰é’®ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„liå…ƒç´ ï¼Œå•å‡»æ–°åˆ›å»ºçš„liå…ƒç´ ï¼Œè¾“å‡ºå®ƒçš„æ–‡æœ¬å†…å®¹ã€‚
#### æ‰‹åŠ¨ç»‘å®šæ–¹æ³•
```html
<ul>
    <li>æ–‡æœ¬1</li>
    <li>æ–‡æœ¬2</li>
    <li>æ–‡æœ¬3</li>
    <li>æ–‡æœ¬4</li>
    <li>æ–‡æœ¬5</li>
    <li>æ–‡æœ¬6</li>
    <li>æ–‡æœ¬7</li>
    <li>æ–‡æœ¬8</li>
    <li>æ–‡æœ¬9</li>
</ul>
<script>
// 1.è·å–æ‰€æœ‰çš„liæ ‡ç­¾
var children = document.querySelectorAll('li');
// 2.éå†æ·»åŠ clickäº‹ä»¶å¤„ç†ç¨‹åº
for (var i = 0; i < children.length; i++) {
    children[i].addEventListener('click', function () {
        console.log(this.innerText);
    });
}
</script>
```
ç„¶ååœ¨é¡µé¢ä¸Šæ·»åŠ ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œç”¨äºæ–°å¢ä¸€ä¸ªliå…ƒç´ ã€‚
```js
<button id="add">æ–°å¢</button>
var ul = document.querySelector('ul');
var add = document.querySelector('#add');
add.addEventListener('click', function () {
    // åˆ›å»ºæ–°çš„liå…ƒç´ 
    var newLi = document.createElement('li');
    var newText = document.createTextNode('æ–‡æœ¬10');
    newLi.appendChild(newText);
    // æ·»åŠ è‡³çˆ¶å…ƒç´ ulä¸­
    ul.appendChild(newLi);
});
```
1. click button, append liï¼šæ–‡æœ¬10ã€‚
2. click new li,  no logã€‚

why?
å› ä¸ºé€šè¿‡querySelectorAll()å‡½æ•°è·å–åˆ°çš„liå…ƒç´ è™½ç„¶ä¼š**å®æ—¶æ„ŸçŸ¥åˆ°æ•°é‡çš„å˜åŒ–**ï¼Œä½†å¹¶**ä¸ä¼šå®æ—¶å¢åŠ å¯¹äº‹ä»¶çš„ç»‘å®š**ã€‚å¦‚æœéœ€è¦æ–°å…ƒç´ ä¹Ÿå…·æœ‰ç›¸åŒçš„äº‹ä»¶ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨äº‹ä»¶ç»‘å®šçš„ä»£ç ã€‚

è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ã€‚
1ï¸âƒ£å°†éå†æ·»åŠ clickäº‹ä»¶å¤„ç†ç¨‹åºä»£ç å°è£…æˆä¸€ä¸ªå‡½æ•°ã€‚
```js
function bindEvent() {
  for(var i = 0; i < children.length; i++) {
    children[i].addEventListener('click', function() {
      console.log(this.innerText);
    })
  }
}
```
2ï¸âƒ£åœ¨æ·»åŠ å®Œæ–°å…ƒç´ åï¼Œé‡æ–°è°ƒç”¨ä¸€æ¬¡1ï¸âƒ£ä¸­å°è£…çš„å‡½æ•°ã€‚
```js
add.addEventListener('click', function() {
  var newLi = document.createElement('li');
  var newText = document.createTextNode('æ–‡æœ¬10');
  newLi.appendChild(newText);
  ul.appendChild(newLi);
  // é‡æ–°æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº
  bindEvent();
})
```
æ¯æ¬¡åœ¨æ–°å¢ä¸€ä¸ªå…ƒç´ åéƒ½éœ€è¦æ‰‹åŠ¨ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™æ ·çš„æ“ä½œæ˜¯å¾ˆçƒ¦ççš„ï¼Œè€Œä¸”éšç€ç»‘å®šçš„äº‹ä»¶å¤„ç†ç¨‹åºè¶Šæ¥è¶Šå¤šï¼Œæ€§èƒ½ä¹Ÿå°†å—åˆ°å½±å“ã€‚

#### äº‹ä»¶å§”æ‰˜æ–¹æ³•
> å¯ä»¥æ›´åŠ æ–¹ä¾¿å¿«æ·åœ°å®ç°æ–°åˆ›å»ºå…ƒç´ çš„äº‹ä»¶ç»‘å®šã€‚ç”±äºäº‹ä»¶å§”æ‰˜æœºåˆ¶æ˜¯åˆ©ç”¨çš„äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå³ä½¿åœ¨å…ƒç´ è‡ªèº«æ²¡æœ‰ç»‘å®šäº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œäº‹ä»¶ä»ç„¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ä¸­ï¼Œå› æ­¤å¯¹äºæ–°å¢çš„å…ƒç´ ï¼Œåªè¦å¤„ç†äº‹ä»¶æµå°±å¯ä»¥è§¦å‘å…¶äº‹ä»¶ã€‚
```html
<script>
    // 1.è·å–çˆ¶å…ƒç´ 
    var parent = document.querySelector('ul');
    // 2.çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶
    parent.addEventListener('click', function (event) {
        // 3.è·å–äº‹ä»¶å¯¹è±¡
        var event = EventUtil.getEvent(event);
        // 4.è·å–ç›®æ ‡å…ƒç´ 
        var target = EventUtil.getTarget(event);
        // 5.åˆ¤æ–­å½“å‰äº‹ä»¶æµæ‰€å¤„çš„å…ƒç´ 
        if (target.nodeName.toLowerCase() === 'li') {
            // 6.ä¸ç›®æ ‡å…ƒç´ ç›¸åŒï¼Œåšå¯¹åº”çš„å¤„ç†
            console.log(target.innerText);
        }
    });
</script>
```
ç„¶ååœ¨é¡µé¢ä¸Šæ·»åŠ ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œç”¨äºæ–°å¢ä¸€ä¸ªliå…ƒç´ ã€‚
```js
<button id="add">æ–°å¢</button>
var ul = document.querySelector('ul');
var add = document.querySelector('#add');
add.addEventListener('click', function () {
    // åˆ›å»ºæ–°çš„liå…ƒç´ 
    var newLi = document.createElement('li');
    var newText = document.createTextNode('æ–‡æœ¬10');
    newLi.appendChild(newText);
    // æ·»åŠ è‡³çˆ¶å…ƒç´ ulä¸­
    ul.appendChild(newLi);
});
```
1. click button, append liã€‚
2. click new li, log: æ–‡æœ¬10ã€‚

## contextmenuå³é”®äº‹ä»¶
åœ¨JavaScriptä¸­æœ‰ä¸€ç³»åˆ—å¸¸ç”¨çš„äº‹ä»¶ç±»å‹ï¼Œè¿™é‡Œæ€»ç»“å¦‚ä¸‹ã€‚
- ç„¦ç‚¹ç›¸å…³çš„focusã€blurç­‰äº‹ä»¶ã€‚
- å•å‡»ç›¸å…³çš„clickã€dblclickã€contextmenuç­‰äº‹ä»¶ã€‚
- é¼ æ ‡ç›¸å…³çš„mouseoverã€mouseoutã€mouseenterç­‰äº‹ä»¶ã€‚
- é”®ç›˜ç›¸å…³çš„keydownã€keypressã€keyupäº‹ä»¶ã€‚
- æ‹–æ›³ç›¸å…³çš„dragäº‹ä»¶ã€‚
- ç§»åŠ¨ç«¯touchäº‹ä»¶ã€‚

é€šè¿‡contextmenuäº‹ä»¶æ¥å®ç°ä¸€ä¸ªå®šåˆ¶åŒ–çš„é¼ æ ‡å³é”®æ•ˆæœã€‚
é€šè¿‡å³å‡»ä¼šå‡ºç°è‡ªå®šä¹‰çš„å†…å®¹ï¼Œè€Œä¸”ç»‘å®šäº†clickäº‹ä»¶ï¼Œåœ¨å•å‡»å„ä¸ªé€‰é¡¹æ—¶ä¼šè¾“å‡ºå¯¹åº”çš„å†…å®¹ã€‚
```html
<ul class="tasks" id="tasks">
    <li class="task" data-id="1">
        <div class="task_ _content">first content</div>
    </li>
    <li class="task" data-id="2">
        <div class="task_ _content">second content</div>
    </li>
    <li class="task" data-id="3">
        <div class="task_ _content">third content</div>
    </li>
    <li class="task" data-id="4">
        <div class="task_ _content">fourth content</div>
    </li>
    <li class="task" data-id="5">
        <div class="task_ _content">fifth content</div>
    </li>
</ul>
<!-- å³å‡»å‡ºç°çš„è‡ªå®šä¹‰èœå• -->
<nav class="context-menu" id="context-menu">
    <ul class="context-menu_ _items">
        <li class="context-menu_ _item">
            <a href="#" class="context-menu_ _link" data-action="view">
                <i class="fa fa-eye m-r-5"></i>View Task
            </a>
        </li>
        <li class="context-menu_ _item">
            <a href="#" class="context-menu_ _link" data-action="edit">
                <i class="fa fa-edit m-r-5"></i>Edit Task
            </a>
        </li>
        <li class="context-menu_ _item">
            <a href="#" class="context-menu_ _link" data-action="delete">
                <i class="fa fa-times m-r-5"></i>Delete Task
            </a>
        </li>
    </ul>
</nav>
<script>
  // è‡ªå®šä¹‰èœå•å…ƒç´ 
  var menu = document.querySelector('#context-menu');
  // è‡ªå®šä¹‰èœå•çŠ¶æ€
  var menuState = 0;
  // è‡ªå®šä¹‰èœå•æ˜¾ç¤ºæ ·å¼
  var active = 'context-menu--active';
  // è‡ªå®šä¹‰èœå•ä½ç½®å¯¹è±¡
  var menuPosition;
  // è‡ªå®šä¹‰èœå•æ°´å¹³ä½ç½®
  var menuPositionX;
  // è‡ªå®šä¹‰èœå•çºµå‘ä½ç½®
  var menuPositionY;
  // å•å‡»çš„liå…ƒç´ 
  var targetLi;
  // åˆå§‹åŒ–äº‹ä»¶
  function init() {
      //ç»™liå…ƒç´ æ·»åŠ å³é”®äº‹ä»¶
      contextListener();
      //å•å‡»äº‹ä»¶ï¼Œå•å‡»åéšè—menu
      clickListener();
      //keyupäº‹ä»¶ï¼Œå½“æŒ‰ä¸‹ESCé”®æ—¶éšè—menu
      keyupListener();
      //èœå•çš„å•å‡»äº‹ä»¶
      menuListener();
  }
  // -----------------é€šè¿‡äº‹ä»¶å§”æ‰˜ï¼Œç»™liå…ƒç´ æ·»åŠ å³é”®äº‹ä»¶ã€‚-------------------
// ç»™liå…ƒç´ æ·»åŠ å³é”®äº‹ä»¶
function contextListener() {
  document.addEventListener('contextmenu', function(e) {
    if (clickInContextLister(e)) {
      e.preventDefault();
      targetLi = e.target;
      // æ˜¾ç¤ºè‡ªå®šä¹‰èœå•
      toggleMenuOn();
      // å®šä½è‡ªå®šä¹‰èœå•çš„ä½ç½®
      positionMenu(e);
    } else {
      targetLi = null;
      // éšè—è‡ªå®šä¹‰èœå•
      toggleMenuOff();
    }
  })
}
// åˆ¤æ–­å•å‡»çš„ä½ç½®æ˜¯å¦å¤„äºliå…ƒç´ å†…éƒ¨ã€‚
// åªéœ€è¦åˆ¤æ–­å½“å‰å•å‡»å…ƒç´ æˆ–è€…å…¶ç¥–å…ˆå…ƒç´ çš„nodeNameå±æ€§æ˜¯å¦ä¸ºâ€œLIâ€å³å¯ã€‚
function clickInContextLister(e) {
  var target = e.target || e.srcElement;
  while(target) {
    if (target.nodeName.toUpperCase() === 'LI') {
      return true;
    }
    // å¾€ä¸Šè¿½æº¯çˆ¶å…ƒç´ 
    target = target.parentNode;
  }
  return false;
}
// å•å‡»åï¼Œéšè—è‡ªå®šä¹‰èœå•ã€‚
function clickLister() {
  document.addEventListener('click', function (e) {
    // ç›‘å¬é¼ æ ‡æŒ‰é”®ï¼Œå·¦é”®æ˜¯1ï¼Œæ»šè½®æ˜¯2ï¼Œå³é”®æ˜¯3
    var code = e.which || e.button;
    if (code === 1) {
      // éšè—è‡ªå®šä¹‰èœå•
      toggleMenuOff();
    }
  });
}
// æŒ‰ä¸‹ESCé”®æ—¶éšè—è‡ªå®šä¹‰èœå•ã€‚
function keyupListener() {
  window.addEventListener('keyup', function (e) {
    if(e.keyCode === 27) {
      // éšè—è‡ªå®šä¹‰èœå•
      toggleMenuOff();
    }
  })
}
// å³å‡»å‡ºç°èœå•åï¼Œå•å‡»è‡ªå®šä¹‰èœå•é€‰é¡¹äº‹ä»¶ã€‚
function menuListener() {
  menu.addEventListener('click', function (e) {
    if (e.target.nodeName.toUpperCase() === 'A') {
      var result = 'the operation is: ' + e.target.dateset.action + '\nthe id is: ' + targetLi.dataset.id;
      alert(result); 
    }
  })
}
// æ˜¾ç¤ºè‡ªå®šä¹‰èœå•ã€‚
function toggleMenuOn() {
  if (menuState !== 1) {
    menuState = 1;
    menu.classList.add(active);
  }
}
// éšè—è‡ªå®šä¹‰èœå•ã€‚
function toggleMenuOff() {
   if (menuState !== 0) {
    menuState = 0;
    menu.classList.add(active);
  }
}
// æ ¹æ®äº‹ä»¶è§¦å‘çš„ä½ç½®è¿”å›å…·ä½“çš„åæ ‡ç‚¹ã€‚
function getPosition(e) {
  var posx = 0;
  var posy = 0;
  if (!e) var e = window.event;
  if (e.pageX || e.pageY) {
    posx = e.pageX;
    posy = e.pageY;
  } else if (e.clientX || e.clientY) {
    posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
    posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
  }
  return {
    x: posx,
    y: posy
  }
}
// ç¡®å®šè‡ªå®šä¹‰èœå•å‡ºç°çš„ä½ç½®
function positionMenu(e) {
    menuPosition = getPosition(e);
    menuPositionX = menuPosition.x + 'px';
    menuPositionY = menuPosition.y + 'px';
    menu.style.left = menuPositionX;
    menu.style.top = menuPositionY;
}
</script>
```
## æ–‡æ¡£åŠ è½½å®Œæˆäº‹ä»¶
åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šåœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™å»æ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªç”µå•†ç½‘ç«™é¡µé¢ï¼Œåœ¨ç”¨æˆ·ç™»å½•è¿›å…¥é¦–é¡µåè·å–ç”¨æˆ·å¸¸ä¹°çš„å•†å“åˆ—è¡¨ã€‚

è¿™ä¸ªåœºæ™¯æ¶‰åŠé¡µé¢åˆå§‹åŒ–çš„æ“ä½œã€‚é¡µé¢åˆå§‹åŒ–çš„æ“ä½œå¯ä»¥ç†è§£ä¸ºæ–‡æ¡£åŠ è½½å®Œæˆåæ‰§è¡Œçš„æ“ä½œï¼Œæ‰€ä»¥è¿™ä¸€åœºæ™¯å¯ä»¥ç†è§£ä¸ºæ–‡æ¡£åŠ è½½å®Œæˆåæ‰§è¡Œç‰¹å®šçš„äº‹ä»¶ã€‚

åœ¨DOMä¸­ï¼Œæ–‡æ¡£åŠ è½½å®Œæˆæœ‰ä¸¤ä¸ªäº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯loadäº‹ä»¶ï¼Œåœ¨åŸç”ŸJavaScriptå’ŒjQueryä¸­å‡æœ‰å®ç°ï¼›å¦ä¸€ä¸ªæ˜¯jQueryæä¾›çš„readyäº‹ä»¶ã€‚
- readyäº‹ä»¶çš„è§¦å‘è¡¨ç¤ºæ–‡æ¡£ç»“æ„å·²ç»åŠ è½½å®Œæˆï¼Œä¸åŒ…å«å›¾ç‰‡ã€flashç­‰éæ–‡å­—åª’ä½“å†…å®¹ã€‚
- onloadäº‹ä»¶çš„è§¦å‘è¡¨ç¤ºé¡µé¢ä¸­åŒ…å«çš„å›¾ç‰‡ã€flashç­‰æ‰€æœ‰å…ƒç´ éƒ½åŠ è½½å®Œæˆã€‚
### loadäº‹ä»¶
> loadäº‹ä»¶ä¼šåœ¨é¡µé¢ã€è„šæœ¬æˆ–è€…å›¾ç‰‡åŠ è½½å®Œæˆåè§¦å‘ã€‚å…¶ä¸­ï¼Œæ”¯æŒonloadäº‹ä»¶çš„æ ‡ç­¾æœ‰bodyã€frameã€framesetã€iframeã€imgã€linkã€scriptã€‚

å¦‚æœloadäº‹ä»¶ç”¨äºé¡µé¢åˆå§‹åŒ–ï¼Œåˆ™æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚ç¬¬ä¸€ç§æ–¹å¼æ˜¯åœ¨bodyæ ‡ç­¾ä¸Šä½¿ç”¨onloadå±æ€§ï¼Œç±»ä¼¼äºonclickå±æ€§çš„è®¾ç½®ï¼Œå…¶å®å°±æ˜¯**DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº**ã€‚
```html
<!-- ä½¿ç”¨onloadå±æ€§ -->
<body onload="bodyLoad()">
<script>
    function bodyLoad() {
        console.log('æ–‡æ¡£åŠ è½½å®Œæˆï¼Œæ‰§è¡Œonloadæ–¹æ³•');
    }
</script>
</body>
```
ç¬¬äºŒç§æ–¹å¼æ˜¯è®¾ç½®windowå¯¹è±¡çš„onloadå±æ€§ï¼Œå±æ€§å€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚
```js
window.onload = function () {
    console.log('æ–‡æ¡£åŠ è½½å®Œæˆï¼Œæ‰§è¡Œonloadæ–¹æ³•');
};
```
ä½¿ç”¨ä»¥ä¸Šä¸¤ç§æ–¹å¼ä¸­çš„ä»»ä½•ä¸€ç§ï¼Œé¡µé¢åœ¨åŠ è½½å®Œæˆåï¼Œéƒ½ä¼šè¾“å‡ºâ€œæ–‡æ¡£åŠ è½½å®Œæˆï¼Œæ‰§è¡Œonloadæ–¹æ³•â€ã€‚
ç¬¬ä¸€ç§æ–¹å¼çš„ä¼˜å…ˆçº§ä¼šé«˜äºç¬¬äºŒç§æ–¹å¼ï¼Œå¦‚æœåŒæ—¶é‡‡ç”¨ä¸¤ç§æ–¹å¼ï¼Œåˆ™åªæœ‰ç¬¬ä¸€ç§æ–¹å¼ä¼šç”Ÿæ•ˆã€‚

loadäº‹ä»¶æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼š
å¾ˆå¤šæ—¶å€™ä¼šå°†JavaScriptä»£ç å—å†™åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡scriptæ ‡ç­¾è¿›è¡Œå¼•ç”¨ã€‚åœ¨ä½¿ç”¨scriptæ ‡ç­¾è¿›è¡Œå¼•ç”¨æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿JavaScriptä»£ç çš„ç»„ç»‡ï¼Œä¼šå°†å…¶ç»Ÿä¸€æ”¾åœ¨headæ ‡ç­¾ä¸­ã€‚ç”±äºheadæ ‡ç­¾ä¼šå…ˆäºbodyæ ‡ç­¾è¿›è¡Œè§£æï¼Œå› æ­¤å¦‚æœJavaScriptä»£ç åŒ…å«äº†å¯¹bodyæ ‡ç­¾ä¸­å…¶ä»–æ ‡ç­¾çš„å¤„ç†ï¼Œå°±ä¼šå‡ºç°ä»£ç ä¸­æ“ä½œçš„å¯¹è±¡æœªè¢«åŠ è½½çš„æƒ…å†µã€‚
é€šè¿‡ä»¥ä¸‹åœºæ™¯æ¥çœ‹çœ‹ï¼Œé¡µé¢ä¸­æœ‰ä¸€ä¸ªdivå…ƒç´ ï¼Œåˆå§‹åŒ–å†…å®¹ä¸ºâ€œé¡µé¢åˆå§‹åŒ–â€ï¼Œç­‰åˆ°é¡µé¢åŠ è½½å®Œæˆådivå…ƒç´ å†…å®¹å˜ä¸ºâ€œé¡µé¢åŠ è½½å®Œæˆâ€ã€‚
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        document.querySelector('#content').innerText = 'é¡µé¢åŠ è½½å®Œæˆ';
    </script>
</head>
<body>
   <div id="content">é¡µé¢åˆå§‹åŒ–</div>
</body>
</html>
```
è¿è¡Œä¸Šé¢çš„ä»£ç åï¼Œå‘ç°é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹ä¸ºâ€œé¡µé¢åˆå§‹åŒ–â€ï¼Œè€Œå¹¶ä¸æ˜¯â€œé¡µé¢åŠ è½½å®Œæˆâ€ã€‚

è¿™æ˜¯å› ä¸ºscriptè„šæœ¬åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œå¹¶æœªè§£æåˆ°bodyæ ‡ç­¾å¤„ï¼Œidä¸ºcontentçš„å…ƒç´ å¹¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥é€šè¿‡`document.querySelector('#content')`è·å–åˆ°çš„å…ƒç´ å…¶å®ä¸ºnullï¼Œç„¶åè®¾ç½®innerTextå±æ€§æ—¶ä¼šæŠ¥é”™ã€‚

loadäº‹ä»¶ä¼šåœ¨é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ å…¨éƒ¨åŠ è½½å®Œæˆåæ‰ä¼šå»è°ƒç”¨ï¼Œå› æ­¤å¦‚æœåœ¨loadäº‹ä»¶ä¸­è·å–idä¸ºcontentçš„å…ƒç´ æ˜¯å¯ä»¥è·å–åˆ°çš„ï¼Œç„¶åå°±å¯ä»¥è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        window.onload = function () {
            document.querySelector('#content').innerText = 'é¡µé¢åŠ è½½å®Œæˆ';
        };
    </script>
</head>
<body>
   <div id="content">é¡µé¢åˆå§‹åŒ–</div>
</body>
</html>
```
åœ¨ä»£ç è¿è¡Œåå‘ç°ï¼Œé¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹ä¸ºâ€œé¡µé¢åŠ è½½å®Œæˆâ€ã€‚

æ­¤å¤–ï¼Œåœ¨jQueryä¸­åŒæ ·æä¾›äº†å¯¹loadäº‹ä»¶çš„å®ç°ï¼Œé‚£å°±æ˜¯load()å‡½æ•°ï¼Œå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚
```js
$(window).load(function(){...});
$(document).load(function(){...}); // ä¸ä¼šç”Ÿæ•ˆ
```
jQueryçš„load()å‡½æ•°å…·æœ‰çš„åŠŸèƒ½ä¸åŸç”ŸJavaScriptçš„onload()å‡½æ•°æ˜¯ä¸€è‡´çš„ï¼Œè€Œä¸”ç›¸æ¯”äºwindow.onload()å‡½æ•°è¿˜æœ‰ä¸¤å¤§ä¼˜ç‚¹ã€‚
- å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ª$(window).load()å‡½æ•°ã€‚
```js
// å‡å¦‚åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œéœ€è¦åŒæ—¶è§¦å‘å¤šä¸ªæ“ä½œï¼Œå¯ä»¥åŒæ—¶ç¼–å†™å¤šä¸ª$(window).load()å‡½æ•°ã€‚
// æ“ä½œ1
$(window).load(function () {
    // do action1
});
// æ“ä½œ2
$(window).load(function () {
    // do action2
});
// æ“ä½œ3
$(window).load(function () {
    // do action3
});
```
è€Œä½¿ç”¨window.load()å‡½æ•°åˆ™ä¸èƒ½è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå› ä¸ºwindow.load()å‡½æ•°åªèƒ½ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚
```html
<!-- åœ¨bodyæ ‡ç­¾ä¸­ä½¿ç”¨onloadå±æ€§å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å†™æ³•ä¸Šå¦‚ä¸‹æ‰€ç¤ºã€‚ -->
<body onload="fn1(),fn2(),fn3()"></body>
<!-- ä»£ç çœ‹èµ·æ¥ä¸è§„æ•´ï¼Œå› æ­¤å¹¶ä¸æ¨èè¿™ç§å†™æ³•ã€‚ -->
```
- ä½¿ç”¨$(window).load()å‡½æ•°å¯ä»¥å°†JavaScriptä»£ç ä¸HTMLä»£ç è¿›è¡Œåˆ†ç¦»ï¼Œè€Œè®¾ç½®bodyæ ‡ç­¾çš„onloadå±æ€§ä¸å¯ä»¥å°†JavaScriptä»£ç ä¸HTMLä»£ç è¿›è¡Œå®Œå…¨éš”ç¦»ã€‚ä¸€æ—¦ä»£ç å†—ä½™åœ¨ä¸€èµ·ï¼Œåç»­çš„ä»£ç ç»´æŠ¤å°†ä¼šå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚

åˆ°è¿™é‡Œäº†è§£äº†loadäº‹ä»¶çš„æ‰§è¡ŒåŸç†ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸æ˜¯åˆå§‹åŒ–å®Œæˆæœ€å¥½çš„å®ç°æ–¹æ¡ˆå‘¢ï¼Ÿå¹¶ä¸æ˜¯çš„ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªå›¾ç‰‡ç½‘ç«™æ¥è¯´ï¼Œå¦‚æœéœ€è¦ç­‰åˆ°æ‰€æœ‰çš„å›¾ç‰‡éƒ½åŠ è½½å®Œæˆå†å»æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œè¿™å°†ä¼šç»™ç”¨æˆ·å¸¦æ¥ä¸€æ®µå¾ˆé•¿çš„ç­‰å¾…æ—¶é—´ï¼Œå› ä¸ºå›¾ç‰‡çš„åŠ è½½ç›¸æ¯”äºæ™®é€šçš„HTMLå…ƒç´ ä¼šæ¶ˆè€—æ›´é•¿çš„æ—¶é—´ã€‚
### readyäº‹ä»¶
> readyäº‹ä»¶åªéœ€è¦ç­‰å¾…æ–‡æ¡£ç»“æ„åŠ è½½å®Œæˆå°±å¯ä»¥æ‰§è¡Œã€‚

é’ˆå¯¹ä¸€ä¸ªå›¾ç‰‡ç½‘ç«™ï¼Œä½¿ç”¨readyäº‹ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç­‰å¾…HTMLä¸­çš„æ‰€æœ‰çš„imgæ ‡ç­¾åŠ è½½å®Œæˆå°±å¯ä»¥æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè€Œä¸éœ€è¦ç­‰åˆ°imgæ ‡ç­¾çš„srcå±æ€§å®Œå…¨åŠ è½½å‡ºæ¥ã€‚è¿™æ ·å°†èŠ‚çœå¾ˆé•¿çš„ç­‰å¾…æ—¶é—´ï¼Œå¯¹æ€§èƒ½æ¥è¯´æ˜¯ä¸€å¤§æå‡ã€‚

> readyäº‹ä»¶å¹¶ä¸æ˜¯åŸç”ŸJavaScriptæ‰€å…·æœ‰çš„ï¼Œè€Œæ˜¯åœ¨**jQuery**ä¸­å®ç°çš„ï¼Œreadyäº‹ä»¶æŒ‚è½½åœ¨documentå¯¹è±¡ä¸Šã€‚

```js
// ä½¿ç”¨è¯­æ³•
$(document).ready(function () {...});
// å› ä¸ºready()å‡½æ•°ä»…èƒ½ç”¨äºå½“å‰æ–‡æ¡£ï¼Œæ— é¡»é€‰æ‹©å™¨ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥æ‰documentè€Œç®€å†™ä¸ºå¦‚ä¸‹ä»£ç ã€‚
$().ready(function () {...});
// åˆå› ä¸º$é»˜è®¤çš„äº‹ä»¶ä¸ºreadyäº‹ä»¶ï¼Œæ‰€ä»¥ready()å‡½æ•°ä¹Ÿå¯ä»¥çœç•¥ï¼Œä»è€Œæ›´åŠ ç²¾ç®€ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
$(function () {...});
```
åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ä½¿ç”¨ä¸Šè¿°3ç§æ–¹å¼å®šä¹‰readyäº‹ä»¶ã€‚
```js
// æ–¹å¼1:æœ€å®Œæ•´å†™æ³•
$(document).ready(function () {
    console.log('æ–¹å¼1:æœ€å®Œæ•´å†™æ³•');
});
// æ–¹å¼2:çœç•¥documentçš„å†™æ³•
$().ready(function () {
    console.log('æ–¹å¼2:çœç•¥documentçš„å†™æ³•');
});
// æ–¹å¼3:æœ€ç²¾ç®€çš„å†™æ³•
$(function () {
    console.log('æ–¹å¼3:æœ€ç²¾ç®€çš„å†™æ³•');
});
```
run
```js
æ–¹å¼1:æœ€å®Œæ•´å†™æ³•
æ–¹å¼2:çœç•¥documentçš„å†™æ³•
æ–¹å¼3:æœ€ç²¾ç®€çš„å†™æ³•
```
### åŠ è½½å®Œæˆäº‹ä»¶çš„æ‰§è¡Œé¡ºåº
é¡µé¢åŠ è½½å®Œæˆä¸€å…±æœ‰5ç§å¤„ç†æ–¹å¼ã€‚
- ä½¿ç”¨jQueryçš„$(document).ready(function () {...})ã€‚
- ä½¿ç”¨jQueryçš„$(function () {...})ï¼Œå…¶å®æ˜¯ä¸Šä¸€ç§æ–¹å¼çš„ç®€å†™ã€‚
- ä½¿ç”¨jQueryçš„$(window).load(function(){...})ã€‚
- ä½¿ç”¨åŸç”ŸJavaScriptçš„window.onload= function(){...}ã€‚
- åœ¨bodyæ ‡ç­¾ä¸Šä½¿ç”¨onloadå±æ€§ï¼Œ`<body onload="bodyLoad()"></body>`ã€‚

åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­åŒæ—¶ä½¿ç”¨5ç§çš„æ‰§è¡Œé¡ºåºã€‚
äº‹ä»¶çš„æ‰§è¡Œé¡ºåºä¼šéšç€äº‹ä»¶å®šä¹‰é¡ºåºçš„ä¸åŒè€Œä¸åŒã€‚è€Œäº‹ä»¶çš„å®šä¹‰ä¼šå†™åœ¨scriptæ ‡ç­¾ä¸­ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯scriptæ ‡ç­¾æ‰€æ”¾çš„ä½ç½®ï¼Œä¸€ä¸ªæ˜¯å°†scriptæ ‡ç­¾å†™åœ¨headæ ‡ç­¾ä¸­ï¼Œä¸€ä¸ªæ˜¯å°†scriptæ ‡ç­¾å†™åœ¨bodyæ ‡ç­¾ä¸­ã€‚
#### å°†scriptæ ‡ç­¾å†™åœ¨headæ ‡ç­¾ä¸­
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>readyä¸loadäº‹ä»¶æ‰§è¡Œé¡ºåº</title>
 <script src="https://cdnjs.cloudï¬‚are.com/ajax/libs/jquery/1.9.0/jquery.min.
js"></script>
    <script>
        // æ–¹å¼1: $(document).ready()
        $(document).ready(function () {
            console.log('æ‰§è¡Œæ–¹å¼1: $(document).ready()');
        });
        // æ–¹å¼2: $(function(){})
        $(function () {
            console.log('æ‰§è¡Œæ–¹å¼2: $(function(){})');
        });
        // æ–¹å¼3: $(window).load()
        $(window).load(function () {
            console.log('æ‰§è¡Œæ–¹å¼3: $(window).load()');
        });
        // æ–¹å¼4: window.onload
        window.onload = function () {
            console.log('æ‰§è¡Œæ–¹å¼4: window.onload');
        };
        // æ–¹å¼5: bodyæ ‡ç­¾çš„onloadå±æ€§
        function bodyOnLoad() {
            console.log('æ‰§è¡Œæ–¹å¼5: bodyæ ‡ç­¾çš„onloadå±æ€§');
        }
    </script>
</head>
<body onload="bodyOnLoad()">
</body>
</html>
```
run
```js
æ‰§è¡Œæ–¹å¼1: $(document).ready()
æ‰§è¡Œæ–¹å¼2: $(function(){})
æ‰§è¡Œæ–¹å¼3: $(window).load()
æ‰§è¡Œæ–¹å¼5: bodyæ ‡ç­¾çš„onloadå±æ€§
```
#### å°†scriptæ ‡ç­¾å†™åœ¨bodyæ ‡ç­¾ä¸­
```html
<<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>readyä¸loadäº‹ä»¶æ‰§è¡Œé¡ºåº</title>
</head>
<body onload="bodyOnLoad()">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.
js"></script>
<script>
    // æ–¹å¼1: $(document).ready()
    $(document).ready(function () {
        console.log('æ‰§è¡Œæ–¹å¼1: $(document).ready()');
    });
    // æ–¹å¼2: $(function(){})
    $(function () {
        console.log('æ‰§è¡Œæ–¹å¼2: $(function(){})');
    });
    // æ–¹å¼3: $(window).load()
    $(window).load(function () {
        console.log('æ‰§è¡Œæ–¹å¼3: $(window).load()');
    });
    // æ–¹å¼4: window.onload
    window.onload = function () {
        console.log('æ‰§è¡Œæ–¹å¼4: window.onload');
    };
    // æ–¹å¼5: bodyæ ‡ç­¾çš„onloadå±æ€§
    function bodyOnLoad() {
        console.log('æ‰§è¡Œæ–¹å¼5: bodyæ ‡ç­¾çš„onloadå±æ€§');
    }
</script>
</body>
</html>
```
run
```js
æ‰§è¡Œæ–¹å¼1: $(document).ready()
æ‰§è¡Œæ–¹å¼2: $(function(){})
æ‰§è¡Œæ–¹å¼4: window.onload
æ‰§è¡Œæ–¹å¼3: $(window).load()
```
é€šè¿‡ä»¥ä¸Šä¸¤ç§ä¸åŒçš„æ‰§è¡Œç»“æœå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºã€‚
1ï¸âƒ£ ä½¿ç”¨jQueryçš„readyäº‹ä»¶æ€»ä¼šæ¯”loadäº‹ä»¶å…ˆæ‰§è¡Œï¼ŒjQueryæä¾›çš„readyäº‹ä»¶çš„ä¸¤ç§å½¢å¼å…¶å®æ˜¯ç­‰æ•ˆçš„ï¼Œå®šä¹‰åœ¨å‰é¢çš„ä¼šå…ˆæ‰§è¡Œã€‚
2ï¸âƒ£ loadäº‹ä»¶çš„æ‰§è¡Œé¡ºåºå–å†³äºæ–¹æ³•å®šä¹‰ä¸­çš„ä½ç½®ï¼Œå½“å°†scriptæ ‡ç­¾å†™åœ¨bodyæ ‡ç­¾ä¸­æ—¶ï¼Œæ–¹å¼4ä¸­window.onloadä¼šæ¯”æ–¹å¼3ä¸­jQueryçš„load()å‡½æ•°å…ˆæ‰§è¡Œã€‚
3ï¸âƒ£ å†™åœ¨bodyæ ‡ç­¾ä¸­çš„onloadå±æ€§ä¼˜å…ˆçº§ä¼šé«˜äºwindow.onloadå±æ€§ã€‚
4ï¸âƒ£ æ–¹å¼4ä¸­window.onloadä¸æ–¹å¼3ä¸­jQueryçš„load()å‡½æ•°ï¼Œæ˜¯è°å…ˆå®šä¹‰åˆ™è°å…ˆæ‰§è¡Œã€‚
## æµè§ˆå™¨çš„é‡æ’å’Œé‡ç»˜
> è™½ç„¶å¯ä»¥é€šè¿‡JavaScriptæ“ä½œDOMå…ƒç´ ï¼Œä½†æ˜¯ä»£ä»·å´æ˜¯é«˜æ˜‚çš„ã€‚

å¯ä»¥å°†DOMå’ŒJavaScriptæƒ³è±¡æˆä¸¤ä¸ªå²›ï¼Œå®ƒä»¬ä¹‹é—´çš„è¿æ¥éœ€è¦é€šè¿‡ä¸€åº§æ¡¥ï¼Œè€ŒJavaScriptå¯¹DOMçš„è®¿é—®å°±éœ€è¦é€šè¿‡è¿™åº§æ¡¥ï¼Œå¹¶æ”¶å–â€œè¿‡æ¡¥è´¹â€ï¼Œéšç€å¯¹DOMè®¿é—®æ¬¡æ•°çš„å¢åŠ ï¼Œè´¹ç”¨ä¹Ÿå°±è¶Šé«˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°½é‡å‡å°‘â€œè¿‡æ¡¥â€çš„æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯å‡å°‘å¯¹DOMçš„è®¿é—®å’Œä¿®æ”¹ï¼Œè€Œè¿™ä¹Ÿæ˜¯**ä¼˜åŒ–DOMæ€§èƒ½**çš„æ‰‹æ®µä¹‹ä¸€ã€‚

> å¯¹DOMçš„ä¿®æ”¹ç›¸æ¯”äºå¯¹DOMçš„è®¿é—®ï¼Œåœ¨æ€§èƒ½ä¸Šçš„å½±å“ä¼šæ›´å¤§ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä¼šå¸¦æ¥æµè§ˆå™¨çš„é‡æ’æˆ–é‡ç»˜ã€‚

æµè§ˆå™¨æ¸²æŸ“HTMLçš„è¿‡ç¨‹ï¼š
- HTMLæ–‡ä»¶è¢«HTMLè§£æå™¨è§£ææˆå¯¹åº”çš„DOMæ ‘ï¼ŒCSSæ ·å¼æ–‡ä»¶è¢«CSSè§£æå™¨è§£æç”Ÿæˆå¯¹åº”çš„æ ·å¼è§„åˆ™é›†ã€‚
- DOMæ ‘ä¸CSSæ ·å¼é›†è§£æå®Œæˆåï¼Œé™„åŠ åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ¸²æŸ“æ ‘ã€‚
- èŠ‚ç‚¹ä¿¡æ¯çš„è®¡ç®—ï¼Œå³æ ¹æ®æ¸²æŸ“æ ‘è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ã€‚
- æ¸²æŸ“ç»˜åˆ¶ï¼Œå³æ ¹æ®è®¡ç®—å®Œæˆçš„èŠ‚ç‚¹ä¿¡æ¯ç»˜åˆ¶æ•´ä¸ªé¡µé¢ã€‚
[æ¸²æŸ“HTML](./assets/drowio/draw_html.drawio ':include :type=code')

### é‡æ’ğŸ‘ğŸ‘ğŸ‘
> æµè§ˆå™¨æ¸²æŸ“é¡µé¢é»˜è®¤é‡‡ç”¨çš„æ˜¯æµå¼å¸ƒå±€æ¨¡å‹ã€‚

æ‰€ä»¥å¯¹æŸä¸€ä¸ªDOMèŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå°±éœ€è¦å¯¹è¯¥DOMç»“æ„è¿›è¡Œé‡æ–°è®¡ç®—ã€‚
è¯¥DOMç»“æ„çš„ä¿®æ”¹ä¼šå†³å®šå‘¨è¾¹DOMç»“æ„çš„æ›´æ”¹èŒƒå›´ï¼Œä¸»è¦åˆ†ä¸ºå…¨å±€èŒƒå›´å’Œå±€éƒ¨èŒƒå›´ã€‚
- å…¨å±€èŒƒå›´å°±æ˜¯ä»é¡µé¢çš„æ ¹èŠ‚ç‚¹htmlæ ‡ç­¾å¼€å§‹ï¼Œå¯¹æ•´ä¸ªæ¸²æŸ“æ ‘è¿›è¡Œé‡æ–°è®¡ç®—ã€‚
  - ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æ”¹å˜çª—å£çš„å°ºå¯¸æˆ–è€…ä¿®æ”¹äº†æ ¹å…ƒç´ çš„å­—ä½“å¤§å°æ—¶
- å±€éƒ¨èŒƒå›´åªä¼šå¯¹æ¸²æŸ“æ ‘çš„æŸéƒ¨åˆ†è¿›è¡Œé‡æ–°è®¡ç®—
  - ä¾‹å¦‚è¦æ”¹å˜é¡µé¢ä¸­æŸä¸ªdivçš„å®½åº¦ï¼Œåªéœ€è¦é‡æ–°è®¡ç®—æ¸²æŸ“æ ‘ä¸­ä¸è¯¥divç›¸å…³çš„éƒ¨åˆ†å³å¯ã€‚

è€Œé‡æ’çš„è¿‡ç¨‹å°±å‘ç”Ÿåœ¨DOMèŠ‚ç‚¹ä¿¡æ¯ä¿®æ”¹çš„æ—¶å€™ï¼Œé‡æ’å®é™…æ˜¯æ ¹æ®æ¸²æŸ“æ ‘ä¸­æ¯ä¸ªæ¸²æŸ“å¯¹è±¡çš„ä¿¡æ¯ï¼Œè®¡ç®—å‡ºå„è‡ªæ¸²æŸ“å¯¹è±¡çš„å‡ ä½•ä¿¡æ¯ï¼Œä¾‹å¦‚DOMå…ƒç´ çš„ä½ç½®ã€å°ºå¯¸ã€å¤§å°ç­‰ï¼Œç„¶åå°†å…¶å®‰ç½®åœ¨ç•Œé¢ä¸­æ­£ç¡®çš„ä½ç½®ã€‚

é‡æ’æ˜¯ä¸€ç§æ˜æ˜¾çš„æ”¹å˜é¡µé¢å¸ƒå±€çš„æ“ä½œï¼Œä¸‹é¢æ€»ç»“äº†å¸¸è§çš„å¼•èµ·é‡æ’çš„æ“ä½œã€‚
1. é¡µé¢é¦–æ¬¡æ¸²æŸ“ã€‚
åœ¨é¡µé¢é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒHTMLé¡µé¢çš„å„ä¸ªå…ƒç´ ä½ç½®ã€å°ºå¯¸ã€å¤§å°ç­‰ä¿¡æ¯å‡æ˜¯æœªçŸ¥çš„ï¼Œéœ€è¦é€šè¿‡ä¸CSSæ ·å¼è§„åˆ™é›†æ‰èƒ½ç¡®å®šå„ä¸ªå…ƒç´ çš„å‡ ä½•ä¿¡æ¯ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå¾ˆå¤šå…ƒç´ å‡ ä½•ä¿¡æ¯è®¡ç®—çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿé‡æ’æ“ä½œã€‚
2. æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜
é¡µé¢æ¸²æŸ“å®Œæˆåï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå›ºå®šçš„æ¸²æŸ“æ ‘ã€‚å¦‚æœæ­¤æ—¶å¯¹æµè§ˆå™¨çª—å£è¿›è¡Œç¼©æ”¾æˆ–è€…æ‹‰ä¼¸æ“ä½œï¼Œæ¸²æŸ“æ ‘ä¸­ä»æ ¹å…ƒç´ htmlæ ‡ç­¾å¼€å§‹çš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½ä¼šé‡æ–°è®¡ç®—å…¶å‡ ä½•ä¿¡æ¯ï¼Œä»è€Œäº§ç”Ÿé‡æ’æ“ä½œã€‚
3. å…ƒç´ å°ºå¯¸æˆ–ä½ç½®å‘ç”Ÿæ”¹å˜ã€‚
4. å…ƒç´ å†…å®¹å‘ç”Ÿå˜åŒ–ã€‚
5. å…ƒç´ å­—ä½“å‘ç”Ÿå˜åŒ–ã€‚
ä¸Šè¿°3ç§æƒ…å†µï¼Œå‡æ˜¯ç›´è§‚åœ°è¡¨è¿°DOMå…ƒç´ å‡ ä½•å±æ€§çš„å˜åŒ–ã€‚è¿™äº›æ“ä½œå‡ä¼šå¯¼è‡´æ¸²æŸ“æ ‘ä¸­ç›¸å…³çš„èŠ‚ç‚¹å¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–ï¼Œé‡æ–°æ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ï¼Œä»è€Œäº§ç”Ÿé‡æ’æ“ä½œã€‚
6. æ·»åŠ æˆ–åˆ é™¤å¯è§çš„DOMå…ƒç´ ã€‚
å› ä¸ºæµè§ˆå™¨é‡‡ç”¨çš„æ˜¯æµå¼å¸ƒå±€æ¨¡å‹ï¼Œå®é™…ä¸ºä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³ä¾æ¬¡éå†å…ƒç´ çš„è¿‡ç¨‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ ï¼Œåˆ™å½“å‰å…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¸ä¼šå—åˆ°å½±å“ï¼›è€Œå½“å‰å…ƒç´ ä¹‹åçš„å…ƒç´ å‡ä¼šé‡æ–°è®¡ç®—å‡ ä½•ä¿¡æ¯ï¼Œæ¸²æŸ“æ ‘ä¹Ÿéœ€è¦é‡æ–°æ„å»ºä¿®æ”¹åçš„èŠ‚ç‚¹ï¼Œä»è€Œäº§ç”Ÿé‡æ’æ“ä½œã€‚
7. è·å–æŸäº›ç‰¹å®šçš„å±æ€§ã€‚
ä¹Ÿè®¸å‡ è¡Œç®€å•çš„JavaScriptä»£ç å°±ä¼šå¼•èµ·å¾ˆå¤šé‡æ’çš„æ“ä½œï¼Œè€Œé¢‘ç¹çš„é‡æ’æ“ä½œä¼šå¯¹æµè§ˆå™¨å¼•æ“äº§ç”Ÿå¾ˆå¤§çš„æ¶ˆè€—ã€‚æ‰€ä»¥æµè§ˆå™¨ä¸ä¼šé’ˆå¯¹æ¯ä¸ªJSæ“ä½œéƒ½è¿›è¡Œä¸€æ¬¡é‡æ’ï¼Œè€Œæ˜¯ç»´æŠ¤ä¸€ä¸ªä¼šå¼•èµ·é‡æ’æ“ä½œçš„é˜Ÿåˆ—ï¼Œç­‰é˜Ÿåˆ—ä¸­çš„æ“ä½œè¾¾åˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå»flushä¸€æ¬¡é˜Ÿåˆ—ï¼Œè¿›è¡ŒçœŸæ­£çš„é‡æ’æ“ä½œã€‚

è™½ç„¶æµè§ˆå™¨ä¼šæœ‰è¿™ä¸ªä¼˜åŒ–ï¼Œä½†æˆ‘ä»¬å†™çš„ä¸€äº›ä»£ç å¯èƒ½ä¼šå¼ºåˆ¶æµè§ˆå™¨æå‰flushé˜Ÿåˆ—ï¼Œä¾‹å¦‚æˆ‘ä»¬è·å–ä»¥ä¸‹è¿™äº›æ ·å¼ä¿¡æ¯çš„æ—¶å€™ã€‚
- offsetTop, offsetLeft, offsetWidth, offsetHeight
- scrollTop/Left/Width/Height
- clientTop/Left/Width/Height
- width,height
- è°ƒç”¨getComputedStyle()å‡½æ•°
å½“æˆ‘ä»¬è¯·æ±‚ä»¥ä¸Šè¿™äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºäº†è¿”å›æœ€ç²¾å‡†çš„ä¿¡æ¯ï¼Œéœ€è¦flushé˜Ÿåˆ—ï¼Œå› ä¸ºé˜Ÿåˆ—ä¸­çš„æŸäº›æ“ä½œå¯èƒ½ä¼šå½±å“åˆ°æŸäº›å€¼çš„è·å–ã€‚å› æ­¤ï¼Œå³ä½¿ä½ è·å–çš„æ ·å¼ä¿¡æ¯ä¸é˜Ÿåˆ—ä¸­çš„æ“ä½œæ— å…³ï¼Œæµè§ˆå™¨ä»ç„¶ä¼šå¼ºåˆ¶flushé˜Ÿåˆ—ï¼Œä»è€Œå¼•èµ·æµè§ˆå™¨é‡æ’çš„æ“ä½œã€‚

åœ¨è·å–ä»¥ä¸‹ä¸€äº›å¸¸è§çš„å±æ€§å’Œå‡½æ•°æ—¶ï¼Œä¼šå¼•å‘é‡æ’çš„æ“ä½œã€‚
- widthï¼šå®½åº¦ã€‚
- heightï¼šé«˜åº¦ã€‚
- marginï¼šå¤–è¾¹è·ã€‚
- paddingï¼šå†…è¾¹è·ã€‚
- displayï¼šå…ƒç´ æ˜¾ç¤ºæ–¹å¼ã€‚
- borderï¼šè¾¹æ¡†ã€‚
- positionï¼šå…ƒç´ å®šä½æ–¹å¼ã€‚
- overflowï¼šå…ƒç´ æº¢å‡ºå¤„ç†æ–¹å¼ã€‚
- clientWidthï¼šå…ƒç´ å¯è§†åŒºå®½åº¦ã€‚
- clientHeightï¼šå…ƒç´ å¯è§†åŒºé«˜åº¦ã€‚
- clientLeftï¼šå…ƒç´ è¾¹æ¡†å®½åº¦ã€‚
- clientTopï¼šå…ƒç´ è¾¹æ¡†é«˜åº¦ã€‚
- offsetWidthï¼šå…ƒç´ æ°´å¹³æ–¹å‘å æ®çš„å®½åº¦ã€‚
- offsetHeightï¼šå…ƒç´ æ°´å¹³æ–¹å‘å æ®çš„é«˜åº¦ã€‚
- offsetLeftï¼šå…ƒç´ å·¦å¤–è¾¹æ¡†è‡³çˆ¶å…ƒç´ å·¦å†…è¾¹æ¡†çš„è·ç¦»ã€‚
- offsetTopï¼šå…ƒç´ ä¸Šå¤–è¾¹æ¡†è‡³çˆ¶å…ƒç´ ä¸Šå†…è¾¹æ¡†çš„è·ç¦»ã€‚
- scrollWidthï¼šå…ƒç´ å†…å®¹å æ®çš„å®½åº¦ã€‚
- scrollHeightï¼šå…ƒç´ å†…å®¹å æ®çš„é«˜åº¦ã€‚
- scrollLeftï¼šå…ƒç´ æ¨ªå‘æ»šåŠ¨çš„è·ç¦»ã€‚
- scrollTopï¼šå…ƒç´ çºµå‘æ»šåŠ¨çš„è·ç¦»ã€‚
- scrollIntoView()ï¼šå…ƒç´ æ»šåŠ¨è‡³å¯è§†åŒºçš„å‡½æ•°ã€‚
- scrollTo()ï¼šå…ƒç´ æ»šåŠ¨è‡³æŒ‡å®šåæ ‡çš„å‡½æ•°ã€‚
- getComputedStyle()ï¼šè·å–å…ƒç´ çš„CSSæ ·å¼çš„å‡½æ•°ã€‚
- getBoundingClientRect()ï¼šè·å–å…ƒç´ ç›¸å¯¹äºè§†çª—çš„ä½ç½®é›†åˆçš„å‡½æ•°ã€‚
- scrollIntoViewIfNeeded()ï¼šå…ƒç´ æ»šåŠ¨è‡³æµè§ˆå™¨çª—å£å¯è§†åŒºçš„å‡½æ•°ã€‚ï¼ˆéæ ‡å‡†ç‰¹æ€§ï¼Œè°¨æ…ä½¿ç”¨ï¼‰

### é‡ç»˜
> é‡ç»˜åªæ˜¯æ”¹å˜å…ƒç´ åœ¨é¡µé¢ä¸­çš„å±•ç°æ ·å¼ï¼Œè€Œä¸ä¼šå¼•èµ·å…ƒç´ åœ¨æ–‡æ¡£æµä¸­ä½ç½®çš„æ”¹å˜ã€‚

ä¾‹å¦‚æ›´æ”¹äº†å…ƒç´ çš„å­—ä½“é¢œè‰²ã€èƒŒæ™¯è‰²ã€é€æ˜åº¦ç­‰ï¼Œæµè§ˆå™¨å‡ä¼šå°†è¿™äº›æ–°æ ·å¼èµ‹äºˆå…ƒç´ å¹¶é‡æ–°ç»˜åˆ¶ã€‚

åœ¨ä¿®æ”¹æŸäº›å¸¸è§çš„å±æ€§æ—¶ï¼Œä¼šå¼•å‘é‡ç»˜çš„æ“ä½œï¼Œæ¥ä¸‹æ¥åˆ—ä¸¾å‡ºäº†ä¸€éƒ¨åˆ†ã€‚
- colorï¼šé¢œè‰²ã€‚
- border-styleï¼šè¾¹æ¡†æ ·å¼ã€‚
- visibilityï¼šå…ƒç´ æ˜¯å¦å¯è§ã€‚
- backgroundï¼šå…ƒç´ èƒŒæ™¯æ ·å¼ï¼ŒåŒ…æ‹¬èƒŒæ™¯è‰²ã€èƒŒæ™¯å›¾ã€èƒŒæ™¯å›¾å°ºå¯¸ã€èƒŒæ™¯å›¾ä½ç½®ç­‰ã€‚
- text-decorationï¼šæ–‡æœ¬è£…é¥°ï¼ŒåŒ…æ‹¬æ–‡æœ¬åŠ ä¸‹ç”»çº¿ã€ä¸Šåˆ’çº¿ã€è´¯ç©¿çº¿ç­‰ã€‚
- outlineï¼šå…ƒç´ çš„å¤–è½®å»“çš„æ ·å¼ï¼Œåœ¨è¾¹æ¡†å¤–çš„ä½ç½®ã€‚
- border-radiusï¼šè¾¹æ¡†åœ†è§’ã€‚
- box-shadowï¼šå…ƒç´ çš„é˜´å½±ã€‚

é‡æ’ä¸é‡ç»˜çš„æ“ä½œå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ
**é‡æ’ä¸€å®šä¼šå¼•èµ·é‡ç»˜çš„æ“ä½œï¼Œè€Œé‡ç»˜å´ä¸ä¸€å®šä¼šå¼•èµ·é‡æ’çš„æ“ä½œã€‚**
å› ä¸ºåœ¨å…ƒç´ é‡æ’çš„è¿‡ç¨‹ä¸­ï¼Œå…ƒç´ çš„ä½ç½®ç­‰å‡ ä½•ä¿¡æ¯ä¼šé‡æ–°è®¡ç®—ï¼Œå¹¶ä¼šå¼•èµ·å…ƒç´ çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™å°±ä¼šäº§ç”Ÿé‡ç»˜çš„æ“ä½œã€‚è€Œåœ¨é‡ç»˜æ—¶ï¼Œåªæ˜¯æ”¹å˜äº†å…ƒç´ çš„å±•ç°æ ·å¼ï¼Œè€Œä¸ä¼šå¼•èµ·å…ƒç´ åœ¨æ–‡æ¡£æµä¸­ä½ç½®çš„æ”¹å˜ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå¼•èµ·é‡æ’çš„æ“ä½œã€‚

### æ€§èƒ½ä¼˜åŒ–
> å‡å°‘æµè§ˆå™¨çš„é‡æ’ä¸é‡ç»˜æ˜¯å› ä¸ºå®ƒä»¬æ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½çš„æ“ä½œã€‚
#### å°†å¤šæ¬¡æ”¹å˜æ ·å¼çš„å±æ€§æ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡
ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„æ ·å¼ï¼Œå¦‚æœåªä¿®æ”¹styleå±æ€§ã€‚
```js
var changeDiv = document.querySelector('#changeDiv');
changeDiv.style.width = '100px';
changeDiv.style.background = '#e3e3e3';
changeDiv.style.height = '100px';
changeDiv.style.marginTop = '10px';
```
ä¸Šé¢çš„æ“ä½œå¤šæ¬¡ä¿®æ”¹äº†styleå±æ€§ï¼Œä¼šå¼•å‘å¤šæ¬¡é‡æ’ä¸é‡ç»˜çš„æ“ä½œã€‚å¯ä»¥å°†è¿™äº›CSSå±æ€§åˆå¹¶ä¸ºä¸€ä¸ªclassç±»ã€‚
```css
div.changeDiv {
    width: '100px',
    background: #e3e3e3;
    height: 100px;
    margin-top: 10px;
}
```
ç„¶åé€šè¿‡JavaScriptç›´æ¥ä¿®æ”¹å…ƒç´ çš„classç±»ã€‚
```js
document.getElementById('changeDiv').className = 'changeDiv';
```
è¿™æ ·å°±å¯ä»¥åªåœ¨æœ€åä¸€æ­¥ä¿®æ”¹classç±»ï¼Œä»è€Œåªå¼•èµ·ä¸€æ¬¡é‡æ’ä¸é‡ç»˜çš„æ“ä½œã€‚

#### å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ è®¾ç½®ä¸ºç»å¯¹å®šä½
> å¸¸è§çš„æ“ä½œå°±æ˜¯è®¾ç½®å…¶positionä¸ºabsoluteæˆ–è€…fixedã€‚

éœ€è¦è¿›è¡Œé‡æ’çš„å…ƒç´ éƒ½æ˜¯å¤„äºæ­£å¸¸çš„æ–‡æ¡£æµä¸­çš„ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ ä¸å¤„äºæ–‡æ¡£æµä¸­ï¼Œé‚£ä¹ˆå®ƒçš„å˜åŒ–å°±ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ çš„å˜åŒ–ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·é‡æ’çš„æ“ä½œã€‚

å‡å¦‚ä¸€ä¸ªé¡µé¢æœ‰åŠ¨ç”»å…ƒç´ ï¼Œå¦‚æœå®ƒä¼šé¢‘ç¹åœ°æ”¹å˜ä½ç½®ã€å®½é«˜ç­‰ä¿¡æ¯ï¼Œé‚£ä¹ˆæœ€å¥½å°†å…¶è®¾ç½®ä¸ºç»å¯¹å®šä½

#### åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ è‡³æ–‡æ¡£æ ‘ä¸­
éœ€æ±‚ï¼šé€šè¿‡å¼‚æ­¥è¯·æ±‚è·å–è¡¨æ ¼çš„æ•°æ®åï¼Œå°†å…¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚
è¿™ä¸ªéœ€æ±‚å¯ä»¥æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯æ¯æ¬¡æ„é€ ä¸€è¡Œæ•°æ®çš„HTMLç‰‡æ®µï¼Œåˆ†å¤šæ¬¡æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ï¼›å¦ä¸€ç§æ˜¯å…ˆåœ¨å†…å­˜ä¸­æ„å»ºå‡ºå®Œæ•´çš„HTMLç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ã€‚
```js
// æ–¹æ³•1ï¼šæ¯æ¬¡æ„é€ ä¸€è¡Œæ•°æ®ï¼Œå¤šæ¬¡æ·»åŠ ã€‚
// å°†æ•°æ®æ¸²æŸ“è‡³table
function renderTable(list) {
    // ç›®æ ‡tableå…ƒç´ 
    var table = $('#table');
    var rowHTML = '';
    // éå†æ•°æ®é›†
    list.forEach(function(item) {
        rowHTML += '<tr>';
        rowHTML += '<td>' + item.name + '</td>';
        rowHTML += '<td>' + item.address + '</td>';
        rowHTML += '<td>' + item.email + '</td>';
        rowHTML += '</tr>';
        // æ¯æ¬¡æ·»åŠ ä¸€è¡Œæ•°æ®
        table.append($(rowHTML));
        // æ·»åŠ å®Œåæ¸…ç©º
        rowHTML = '';
    });
}
// æ–¹æ³•2ï¼šä¸€æ¬¡æ€§æ„é€ å®Œæ•´çš„æ•°æ®ï¼Œç„¶åæ·»åŠ ã€‚
// å°†æ•°æ®æ¸²æŸ“è‡³table
function renderTable(list) {
    // ç›®æ ‡tableå…ƒç´ 
    var table = $('#table');
    var allHTML = '';
    // éå†æ•°æ®é›†
    list.forEach(function(item) {
        allHTML += '<tr>';
        allHTML += '<td>' + item.name + '</td>';
        allHTML += '<td>' + item.address + '</td>';
        allHTML += '<td>' + item.email + '</td>';
        allHTML += '</tr>';
    });
    // è·å–å®Œæ•´ç‰‡æ®µå,ä¸€æ¬¡æ€§æ¸²æŸ“
    table.append($(allHTML));
}
```
åœ¨æ–¹æ³•1ä¸­æ¯æ¬¡æ·»åŠ ä¸€è¡Œæ•°æ®æ—¶ï¼Œéƒ½ä¼šå¼•å‘ä¸€æ¬¡æµè§ˆå™¨é‡æ’å’Œé‡ç»˜çš„æ“ä½œï¼Œå¦‚æœè¡¨æ ¼çš„æ•°æ®å¾ˆå¤§ï¼Œåˆ™ä¼šå¯¹æ¸²æŸ“é€ æˆå¾ˆå¤§çš„å½±å“ã€‚è€Œæ–¹æ³•2åœ¨å†…å­˜ä¸­ä¸€æ¬¡æ€§æ„é€ å‡ºå®Œæ•´çš„HTMLä»£ç æ®µï¼Œå†é€šè¿‡ä¸€æ¬¡æ“ä½œå»æ¸²æŸ“è¡¨æ ¼ï¼Œè¿™æ ·åªä¼šå¼•èµ·ä¸€æ¬¡æµè§ˆå™¨é‡æ’å’Œé‡ç»˜çš„æ“ä½œï¼Œä»è€Œå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚

#### å°†è¦è¿›è¡Œå¤æ‚å¤„ç†çš„å…ƒç´ å¤„ç†ä¸ºdisplayå±æ€§ä¸ºnoneï¼Œå¤„ç†å®Œæˆåå†è¿›è¡Œæ˜¾ç¤º
å› ä¸ºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸ä¼šå‡ºç°åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œå¤„ç†å¹¶ä¸ä¼šå¼•èµ·å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å½“æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå…ƒç´ åšå¤æ‚å¤„ç†æ—¶ï¼Œå¯ä»¥å°†å…¶displayå±æ€§è®¾ç½®ä¸ºnoneï¼Œæ“ä½œå®Œæˆåï¼Œå†å°†å…¶æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±**åªä¼šåœ¨éšè—å’Œæ˜¾ç¤ºçš„æ—¶å€™å¼•å‘ä¸¤æ¬¡é‡æ’æ“ä½œ**ã€‚

#### å°†é¢‘ç¹è·å–ä¼šå¼•èµ·é‡æ’çš„å±æ€§ç¼“å­˜è‡³å˜é‡
åœ¨è·å–ä¸€äº›ç‰¹å®šå±æ€§æ—¶ï¼Œä¼šå¼•å‘é‡æ’æˆ–è€…é‡ç»˜çš„æ“ä½œã€‚å› æ­¤åœ¨è·å–è¿™äº›å±æ€§æ—¶ï¼Œåº”è¯¥é€šè¿‡ä¸€ä¸ªå˜é‡å»ç¼“å­˜ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ç›´æ¥è·å–ç‰¹å®šçš„å±æ€§ã€‚

åœºæ™¯ï¼šåœ¨è·å–ä¸€ä¸ªç‰¹å®šå…ƒç´ åï¼Œæ ¹æ®å‡ ä¸ªä¸åŒçš„åˆ¤æ–­æ¡ä»¶ï¼Œéœ€è¦æ”¹å˜å…ƒç´ çš„å®½åº¦ã€‚
```js
// âŒä¸æ¨èä»¥ä¸‹è¿™ç§å†™æ³•ã€‚
var element = document.querySelector('#ele');
// åˆ¤æ–­æ¡ä»¶1
if(true) {
    element.style.width = '200px';
}
// åˆ¤æ–­æ¡ä»¶2
if(true) {
    element.style.width = '300px';
}
// åˆ¤æ–­æ¡ä»¶3
if(true) {
    element.style.width = '400px';
}
// åœ¨ä½¿ç”¨è¿™ç§å†™æ³•æ—¶ï¼Œåœ¨æ¡ä»¶éƒ½é€šè¿‡åï¼Œéœ€è¦è·å–3æ¬¡widthå±æ€§ï¼Œä»è€Œä¼šå¼•å‘3æ¬¡é‡æ’çš„æ“ä½œã€‚

// âœ”æ¨èä»¥ä¸‹è¿™ç§å†™æ³•ã€‚
var ele = document.querySelector('#ele');
// å…ˆè·å–widthå±æ€§
var width = ele.style.width;
// åˆ¤æ–­æ¡ä»¶1
if(true) {
    width = '200px';
}
// åˆ¤æ–­æ¡ä»¶2
if(true) {
    width = '300px';
}
// åˆ¤æ–­æ¡ä»¶3
if(true) {
    width = '400px';
}
// æœ€åæ‰§è¡Œä¸€æ¬¡widthå±æ€§èµ‹å€¼
ele.style.width = width;
```
è¿™ç§å†™æ³•åªä¼šåœ¨å¼€å§‹æ—¶è·å–ä¸€æ¬¡widthå±æ€§ï¼Œåˆ¤æ–­æ¡ä»¶æ‰§è¡Œç»“æŸåè¿›è¡Œä¸€æ¬¡widthå±æ€§çš„èµ‹å€¼ï¼Œæ‰€ä»¥ä¸ç®¡ä¸­é—´æ‰§è¡Œäº†å¤šå°‘æ¬¡é€»è¾‘å¤„ç†ï¼Œå§‹ç»ˆåªä¼šæœ‰ä¸¤æ¬¡é‡æ’çš„æ“ä½œã€‚ç›¸æ¯”äºå‰ä¸€ç§æ–¹æ³•ï¼Œæ¯æ‰§è¡Œä¸€ä¸ªåˆ¤æ–­é€»è¾‘å°±äº§ç”Ÿä¸€æ¬¡é‡æ’çš„æ“ä½œä¼šæå‡ä¸€å®šçš„æ€§èƒ½ã€‚

#### å°½é‡å‡å°‘ä½¿ç”¨tableå¸ƒå±€
å¦‚æœtableä¸­ä»»ä½•ä¸€ä¸ªå…ƒç´ è§¦å‘äº†é‡æ’çš„æ“ä½œï¼Œé‚£ä¹ˆæ•´ä¸ªtableéƒ½ä¼šè§¦å‘é‡æ’çš„æ“ä½œï¼Œå°¤å…¶æ˜¯å½“ä¸€ä¸ªtableå†…å®¹æ¯”è¾ƒåºå¤§æ—¶ï¼Œæ›´åŠ ä¸æ¨èä½¿ç”¨tableå¸ƒå±€ã€‚

å¦‚æœä¸å¾—å·²ä½¿ç”¨äº†tableï¼Œå¯ä»¥è®¾ç½®table-layout:autoæˆ–è€…æ˜¯table-layout:fixedã€‚è¿™æ ·å¯ä»¥è®©tableä¸€è¡Œä¸€è¡Œåœ°æ¸²æŸ“ï¼Œè¿™ç§åšæ³•ä¹Ÿæ˜¯ä¸ºäº†é™åˆ¶é‡æ’çš„å½±å“èŒƒå›´ã€‚

#### [ä½¿ç”¨äº‹ä»¶å§”æ‰˜ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åº](#äº‹ä»¶å§”æ‰˜)
åœ¨å¯¹å¤šä¸ªåŒçº§å…ƒç´ åšäº‹ä»¶ç»‘å®šæ—¶ï¼Œæ¨èä½¿ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶è¿›è¡Œå¤„ç†ã€‚ä½¿ç”¨äº‹ä»¶å§”æ‰˜å¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº‹ä»¶å¤„ç†ç¨‹åºçš„æ•°é‡ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚

#### åˆ©ç”¨DocumentFragmentæ“ä½œDOMèŠ‚ç‚¹
> DocumentFragmentæ˜¯ä¸€ä¸ªæ²¡æœ‰çˆ¶çº§èŠ‚ç‚¹çš„æœ€å°æ–‡æ¡£å¯¹è±¡ï¼Œå®ƒå¯ä»¥ç”¨äºå­˜å‚¨å·²ç»æ’å¥½ç‰ˆæˆ–è€…å°šæœªç¡®å®šæ ¼å¼çš„HTMLç‰‡æ®µã€‚

DocumentFragmentæœ€æ ¸å¿ƒçš„çŸ¥è¯†ç‚¹åœ¨äºå®ƒä¸æ˜¯çœŸå®DOMæ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå¼•èµ·DOMæ ‘é‡æ–°æ¸²æŸ“çš„æ“ä½œï¼Œä¹Ÿå°±ä¸ä¼šå¼•èµ·æµè§ˆå™¨é‡æ’å’Œé‡ç»˜çš„æ“ä½œï¼Œä»è€Œå¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚

å› ä¸ºDocumentFragmentå…·æœ‰çš„ç‰¹æ€§ï¼Œåœ¨éœ€è¦é¢‘ç¹è¿›è¡ŒDOMæ–°å¢æˆ–è€…åˆ é™¤çš„æ“ä½œä¸­ï¼Œå®ƒå°†å˜å¾—éå¸¸æœ‰ç”¨ã€‚

ä¸€èˆ¬çš„æ“ä½œæ–¹æ³•åˆ†ä¸ºä»¥ä¸‹ä¸¤æ­¥ã€‚
- å°†éœ€è¦å˜æ›´çš„DOMå…ƒç´ æ”¾ç½®åœ¨ä¸€ä¸ªæ–°å»ºçš„DocumentFragmentä¸­ï¼Œå› ä¸ºDocumentFragmentä¸å­˜åœ¨äºçœŸå®çš„DOMæ ‘ä¸­ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æ“ä½œä¸ä¼šå¸¦æ¥ä»»ä½•æ€§èƒ½å½±å“ã€‚
- å°†DocumentFragmentæ·»åŠ è‡³çœŸæ­£çš„æ–‡æ¡£æ ‘ä¸­ï¼Œè¿™ä¸€æ­¥æ“ä½œå¤„ç†çš„ä¸æ˜¯DocumentFragmentè‡ªèº«ï¼Œè€Œæ˜¯DocumentFragmentçš„å…¨éƒ¨å­èŠ‚ç‚¹ã€‚å¯¹DocumentFragmentçš„æ“ä½œæ¥è¯´ï¼Œåªä¼šäº§ç”Ÿä¸€æ¬¡æµè§ˆå™¨é‡æ’å’Œé‡ç»˜çš„æ“ä½œï¼Œç›¸æ¯”äºé¢‘ç¹æ“ä½œçœŸå®DOMå…ƒç´ çš„æ–¹æ³•ï¼Œä¼šæœ‰å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚

åº”ç”¨åœºæ™¯ï¼šå‡å¦‚å¾€é¡µé¢çš„ulå…ƒç´ ä¸­æ·»åŠ 100ä¸ªliå…ƒç´ ã€‚
æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡createElement()å‡½æ•°æ¥å®ç°ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡createDocumentFragment()å‡½æ•°æ¥å®ç°ã€‚

æ¥ä¸‹æ¥åˆ†åˆ«é€šè¿‡ä¸¤æ®µä»£ç ä¸è¿è¡Œç»“æœæ¥çœ‹çœ‹å®ƒä»¬çš„å¤„ç†æ•ˆç‡ã€‚
##### createElement()å‡½æ•°
```html
<!-- æœ€åŸå§‹çš„ä¸€ç§æ–¹æ³• -->
<ul id="list"></ul>
<script>
  var list = document.querySelector('#list');
  for (var i = 0; i < 100; i++) {
    var li = document.createElement('li');
    var text = document.createTextNode('èŠ‚ç‚¹' + i);
    li.append(text);
    list.append(li);
  }
</script>
```
liståœ¨æ¯æ¬¡appendæ–°å…ƒç´ liæ—¶ï¼Œéƒ½ä¼šå¼•å‘ä¸€æ¬¡é‡æ’çš„æ“ä½œã€‚
##### createDocumentFragment()å‡½æ•°
ä½¿ç”¨DocumentFragment()å‡½æ•°æ—¶ä¸€èˆ¬åˆ†ä¸º3æ­¥ã€‚
- åˆ›å»ºä¸€ä¸ªæ–°çš„DocumentFragmentå¯¹è±¡ã€‚
- å°†å¾…å¤„ç†çš„å…ƒç´ æ·»åŠ è‡³DocumentFragmentå¯¹è±¡ä¸­ã€‚
- å¤„ç†DocumentFragmentå¯¹è±¡ã€‚

```html
<ul id="list2"></ul>
<script>
  var list = document.querySelector('#list2');
  // 1.æ–°åˆ›å»ºçš„DocumentFragmentå¯¹è±¡
  var fragment = document.createDocumentFragment();
  for(var i = 0; i < 100; i++) {
    var li = document.createElement('li');
    var text = document.createTextNode('èŠ‚ç‚¹' + i);
    li.append(text);
    // 2.å°†æ–°å¢çš„å…ƒç´ æ·»åŠ è‡³DocumentFragmentå¯¹è±¡ä¸­
    fragment.append(li);
  }
  // 3.å¤„ç†DocumentFragmentå¯¹è±¡
  list.append(fragment);
</script>
```
ä½¿ç”¨DocumentFragment()å‡½æ•°å¤„ç†DOMå…ƒç´ æ—¶ï¼Œåªæœ‰åœ¨æœ€ç»ˆappendçš„æ—¶å€™æ‰ä¼šå»çœŸæ­£å¤„ç†çœŸå®çš„DOMå…ƒç´ ï¼Œå› æ­¤åªä¼šå¼•å‘ä¸€æ¬¡é‡æ’æ“ä½œï¼Œä»è€Œæå‡äº†æµè§ˆå™¨æ¸²æŸ“çš„æ€§èƒ½ã€‚
