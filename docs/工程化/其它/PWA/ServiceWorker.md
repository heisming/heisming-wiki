# Service Worker
随着时代的发展，用户对应用体验的要求愈加苛刻，我们虽然可以通过各种优化手段来减少页面加载时间，但当用户处于移动状态，潜在的网络切换很可能导致短暂的离线，如果用户在此时进行事务处理，那么此刻应用的不可用很可能导致用户流失。也许正是由于 Web 应用在离线处理上的弱势，才最终导致其地位在移动时代不如原生应用这一局面。

## Service Worker 与 Web Worker
- Web Worker 是现代浏览器提供的一个 JavaScript 多线程解决方案，我们可以将一些复杂、耗时的运算交给 Web Worker 执行以达到释放主线程的目的；
- Service Worker 则是建立在 Web Worker 之上，旨在通过请求代理、本地缓存、后台同步等机制来提供离线处理能力。两者的主要异同点如下：

### 相同点
- 都独立于主线程，以单独线程的形式运行。
- 都不能直接访问并操作 DOM、window 对象。
- 都是通过 postMessage 接口与主线程进行交互。

### 不同点
- Service Worker 内部大部分为基于 Promise 的异步操作。
- Service Worker 必须运行在 HTTPS 环境下以避免中间人攻击。
- Service Worker 的生命周期完全独立于网页，且可在不用时被中止、在下次有需要时重启。

### 生命周期