# ã€Šå¿«é€Ÿæå®šå‰ç«¯æŠ€æœ¯ä¸€é¢ åŒ¹é…å¤§å‚é¢è¯•è¦æ±‚ã€‹

![](D:\å¤§å‰ç«¯å­¦ä¹ \MarkDown\0åŸºç¡€\good\æ€ç»´å¯¼å›¾.png)

## 1ã€HTML&CSSé¢è¯•é¢˜

### HTML

#### 1ã€å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–ï¼Ÿ

```html
<div>æ ‡é¢˜</div>
<div>
	<div>ä¸€æ®µæ–‡å­—</div>
    <div>
    	<div>åˆ—è¡¨1</div>
        <div>åˆ—è¡¨2</div>
    </div>
</div>
```

```html
<h1>æ ‡é¢˜</h1>
<div>
	<p>ä¸€æ®µæ–‡å­—</p>
    <ul>
    	<li>åˆ—è¡¨1</li>
        <li>åˆ—è¡¨2</li>
    </ul>
</div>
```

æ ¹æ®æ–‡æ¡£é¡µé¢ç»“æ„åˆç†çš„å†™å‡ºè®©äººï¼ˆå¢åŠ ä»£ç å¯è¯»æ€§ï¼‰å’Œæœºå™¨ï¼ˆæœç´¢å¼•æ“SEOä¼˜åŒ–ï¼‰éƒ½æ–¹ä¾¿è¯»å–çš„ä»£ç ï¼Œå³ä½¿CSSæ ·å¼ä¸¢å¤±ç»“æ„ä¹Ÿä¼šå¾ˆæ¸…æ™°



#### 2ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œå“ªäº›HTMLæ ‡ç­¾æ˜¯å—çŠ¶å…ƒç´ ï¼Œå“ªäº›æ˜¯å†…è”å…ƒç´ ï¼Ÿ

å—çŠ¶å…ƒç´ ï¼šdiv, p, h1~h6, ul, ol, li, table

å†…è”å…ƒç´ ï¼šspan, a, i, u, strong, 



#### 3ã€W3Cæ ‡å‡†

##### **1ã€ä»€ä¹ˆæ˜¯DOCTYPE**

DOCTYPEæ˜¯document type(æ–‡æ¡£ç±»å‹)çš„ç®€å†™ï¼Œç”¨æ¥è¯´æ˜ä½ ç”¨çš„XHTMLæˆ–è€…HTMLæ˜¯ä»€ä¹ˆç‰ˆæœ¬ã€‚å…¶ä¸­çš„DTD(ä¾‹å¦‚xhtml1-transitional.dtd)å«æ–‡æ¡£ç±»å‹å®šä¹‰ï¼Œé‡Œé¢åŒ…å«äº†æ–‡æ¡£çš„è§„åˆ™ï¼Œæµè§ˆå™¨å°±æ ¹æ®ä½ å®šä¹‰çš„DTDæ¥è§£é‡Šä½ é¡µé¢çš„æ ‡è¯†ï¼Œå¹¶å±•ç°å‡ºæ¥ã€‚è¦å»ºç«‹ç¬¦åˆæ ‡å‡†çš„ç½‘é¡µï¼ŒDOCTYPEå£°æ˜æ˜¯å¿…ä¸å¯å°‘çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼›é™¤éä½ çš„XHTMLç¡®å®šäº†ä¸€ä¸ªæ­£ç¡®çš„DOCTYPEï¼Œå¦åˆ™ä½ çš„æ ‡è¯†å’ŒCSSéƒ½ä¸ä¼šç”Ÿæ•ˆã€‚
XHTML 1.0 æä¾›äº†ä¸‰ç§DTDå£°æ˜å¯ä¾›é€‰æ‹©ï¼š

i) **è¿‡æ¸¡çš„**(Transitional)ï¼šè¦æ±‚éå¸¸å®½æ¾çš„DTDï¼Œå®ƒå…è®¸ä½ ç»§ç»­ä½¿ç”¨HTML4.01çš„æ ‡è¯†(ä½†æ˜¯è¦ç¬¦åˆxhtmlçš„å†™æ³•)ã€‚ 

```html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">	
```

ii) **ä¸¥æ ¼çš„**(Strict)ï¼šè¦æ±‚ä¸¥æ ¼çš„DTDï¼Œä½ ä¸èƒ½ä½¿ç”¨ä»»ä½•è¡¨ç°å±‚çš„æ ‡è¯†å’Œå±æ€§ï¼Œä¾‹å¦‚

```html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
```

iii) **æ¡†æ¶çš„**(Frameset)ï¼šä¸“é—¨é’ˆå¯¹æ¡†æ¶é¡µé¢è®¾è®¡ä½¿ç”¨çš„DTDï¼Œå¦‚æœä½ çš„é¡µé¢ä¸­åŒ…å«æœ‰æ¡†æ¶ï¼Œéœ€è¦é‡‡ç”¨è¿™ç§DTDã€‚

```html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
```

æ³¨ï¼šDOCTYPEå£°æ˜å¿…é¡»æ”¾åœ¨æ¯ä¸€ä¸ªXHTMLæ–‡æ¡£æœ€é¡¶éƒ¨ï¼Œåœ¨æ‰€æœ‰ä»£ç å’Œæ ‡è¯†ä¹‹ä¸Šã€‚

##### **2ã€åå­—ç©ºé—´ namespace**

```html
<html xmlns="http://www.w3.org/1999/xhtml" lang="gb2312">
```

é€šå¸¸æˆ‘ä»¬HTML4.0çš„ä»£ç åªæ˜¯<html>ï¼Œè¿™é‡Œçš„"xmlns"æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
è¿™ä¸ªâ€œxmlnsâ€æ˜¯XHTML namespaceçš„ç¼©å†™ï¼Œå«åšâ€œåå­—ç©ºé—´â€å£°æ˜ã€‚XHTMLæ˜¯HTMLå‘XMLè¿‡æ¸¡çš„æ ‡è¯†è¯­è¨€ï¼Œå®ƒéœ€è¦ç¬¦åˆXMLæ–‡æ¡£è§„åˆ™ï¼Œå› æ­¤ä¹Ÿéœ€è¦å®šä¹‰åå­—ç©ºé—´ã€‚åˆå› ä¸ºXHTML1.0ä¸èƒ½è‡ªå®šä¹‰æ ‡è¯†ï¼Œæ‰€ä»¥å®ƒçš„åå­—ç©ºé—´éƒ½ç›¸åŒï¼Œå°±æ˜¯"http://www.w3.org/1999/xhtml"ã€‚ç›®å‰é˜¶æ®µæˆ‘ä»¬åªè¦ç…§æŠ„ä»£ç å°±å¯ä»¥äº†ã€‚

##### **3ã€å®šä¹‰è¯­è¨€ç¼–ç **

```html
<meta http-equiv=â€œContent-Typeâ€ content=â€œtext/html; charset=gb2312â€ />
```

ä¸ºäº†è¢«æµè§ˆå™¨æ­£ç¡®è§£é‡Šå’Œé€šè¿‡W3Cä»£ç æ ¡éªŒï¼Œæ‰€æœ‰çš„XHTMLæ–‡æ¡£éƒ½å¿…é¡»å£°æ˜å®ƒä»¬æ‰€ä½¿ç”¨çš„ç¼–ç è¯­è¨€ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨gb2312(ç®€ä½“ä¸­æ–‡)ï¼Œåˆ¶ä½œå¤šå›½è¯­è¨€é¡µé¢ä¹Ÿæœ‰å¯èƒ½ç”¨Unicodeã€ISO-8859-1ç­‰ï¼Œæ ¹æ®ä½ çš„éœ€è¦å®šä¹‰ã€‚
æ³¨ï¼šå¦‚æœå¿˜è®°äº†å®šä¹‰è¯­è¨€ç¼–ç ,å¯èƒ½å°±ä¼šå‡ºç°,ä½ åœ¨DW(dreamweaver)åšå®Œä¸€ä¸ªé¡µé¢ï¼Œç¬¬äºŒæ¬¡æ‰“å¼€æ—¶æ‰€æœ‰çš„ä¸­æ–‡å˜æˆäº†ä¹±ç ã€‚

##### **4ã€Javascriptå®šä¹‰**

Jså¿…é¡»è¦ç”¨<script language="javascript" type="text/javascript">æ¥å¼€å¤´å®šä¹‰ï¼Œè€Œä¸æ˜¯åŸæ¥çš„<script language=javascript>æˆ–å¹²è„†ç›´æ¥<script>ï¼Œå¹¶ä¸”éœ€è¦åŠ ä¸ªæ³¨é‡Šç¬¦<!--  -->ï¼Œä»¥ä¿è¯ä¸åœ¨ä¸æ”¯æŒjsçš„æµè§ˆå™¨ä¸Šç›´æ¥æ˜¾ç¤ºå‡ºä»£ç æ¥ã€‚ 

```html
<script language="javascript" type="text/javascript"> 
//<![CDATA[ 
function show_layout(selObj){ 
var n = selObj.options[selObj.selectedIndex].value; 
document.getElementById('stylesheet').href = n; 
} 
//]]> 
</script> 
```

##### **5ã€CSSå®šä¹‰**

CSSå¿…é¡»è¦ç”¨<style type="text/css">å¼€å¤´æ¥å®šä¹‰ï¼Œè€Œä¸æ˜¯åŸæ¥çš„ç›´æ¥<style>ï¼Œä¹Ÿä¸å»ºè®®ç›´æ¥å†™åœ¨å†…å®¹ä»£ç é‡Œå¦‚ï¼š<div style="padding-left:20px;"></div>ï¼Œå¹¶éœ€è¦åŠ ä¸ªæ³¨é‡Šç¬¦<!-- --> 

```html
<style type="text/css" media="screen"> 
<!-- 
body {margin:0px;padding:0px;font-size:12px;text-align:center} 
--> 
</style>
```

ä¸ºä¿è¯å„æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œåœ¨å†™CSSæ—¶è¯·éƒ½å†™ä¸Šæ•°é‡å•ä½ï¼Œä¾‹å¦‚ï¼šé”™è¯¯ï¼š.space_10{padding-left:10} æ­£ç¡®ï¼š.space_10 {padding-left:10px}

##### **6ã€ä¸è¦åœ¨æ³¨é‡Šå†…å®¹ä¸­ä½¿ç”¨â€œ--â€**

â€œ--â€åªèƒ½å‘ç”Ÿåœ¨XHTMLæ³¨é‡Šçš„å¼€å¤´å’Œç»“æŸï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å†…å®¹ä¸­å®ƒä»¬ä¸å†æœ‰æ•ˆã€‚
ä¾‹å¦‚ä¸‹é¢çš„ä»£ç æ˜¯æ— æ•ˆçš„ï¼š<!--è¿™é‡Œæ˜¯æ³¨é‡Š-----------è¿™é‡Œæ˜¯æ³¨é‡Š-->
æ­£ç¡®çš„åº”ç”¨ç­‰å·æˆ–è€…ç©ºæ ¼æ›¿æ¢å†…éƒ¨çš„è™šçº¿ã€‚<!--è¿™é‡Œæ˜¯æ³¨é‡Š============è¿™é‡Œæ˜¯æ³¨é‡Š-->

##### **7ã€æ‰€æœ‰æ ‡ç­¾çš„å…ƒç´ å’Œå±æ€§çš„åå­—éƒ½å¿…é¡»ä½¿ç”¨å°å†™**

ä¸HTMLä¸ä¸€æ ·ï¼ŒXHTMLå¯¹å¤§å°å†™æ˜¯æ•æ„Ÿçš„ï¼Œ<title>å’Œ<TITLE>æ˜¯ä¸åŒçš„æ ‡ç­¾ã€‚XHTMLè¦æ±‚æ‰€æœ‰çš„æ ‡ç­¾å’Œå±æ€§çš„åå­—éƒ½å¿…é¡»ä½¿ç”¨å°å†™ã€‚ä¾‹å¦‚ï¼š<BODY>å¿…é¡»å†™æˆ<body>ã€‚å¤§å°å†™å¤¹æ‚ä¹Ÿæ˜¯ä¸è¢«è®¤å¯çš„ï¼Œé€šå¸¸dreamweaverè‡ªåŠ¨ç”Ÿæˆçš„å±æ€§åå­—"onMouseOver"ä¹Ÿå¿…é¡»ä¿®æ”¹æˆ"onmouseover"ã€‚

##### **8ã€æ‰€æœ‰çš„å±æ€§å¿…é¡»ç”¨å¼•å·""æ‹¬èµ·æ¥**

åœ¨HTMLä¸­ï¼Œä½ å¯ä»¥ä¸éœ€è¦ç»™å±æ€§å€¼åŠ å¼•å·ï¼Œä½†æ˜¯åœ¨XHTMLä¸­ï¼Œå®ƒä»¬å¿…é¡»è¢«åŠ å¼•å·ã€‚
ä¾‹å¦‚ï¼š<height=80>å¿…é¡»ä¿®æ”¹ä¸ºï¼š<height="80">ã€‚
ç‰¹æ®Šæƒ…å†µï¼Œä½ éœ€è¦åœ¨å±æ€§å€¼é‡Œä½¿ç”¨åŒå¼•å·ï¼Œä½ å¯ä»¥ç”¨"ï¼Œå•å¼•å·å¯ä»¥ä½¿ç”¨&apos;ï¼Œä¾‹å¦‚ï¼š<alt="say&apos;hello&apos;">

##### **9ã€æŠŠæ‰€æœ‰<å’Œ&ç‰¹æ®Šç¬¦å·ç”¨ç¼–ç è¡¨ç¤º**

ä»»ä½•å°äºå·ï¼ˆ<ï¼‰ï¼Œä¸æ˜¯æ ‡ç­¾çš„ä¸€éƒ¨åˆ†ï¼Œéƒ½å¿…é¡»è¢«ç¼–ç ä¸º &lt;
ä»»ä½•å¤§äºå·ï¼ˆ>ï¼‰ï¼Œä¸æ˜¯æ ‡ç­¾çš„ä¸€éƒ¨åˆ†ï¼Œéƒ½å¿…é¡»è¢«ç¼–ç ä¸º &gt;
ä»»ä½•ä¸å·ï¼ˆ&ï¼‰ï¼Œä¸æ˜¯å®ä½“çš„ä¸€éƒ¨åˆ†çš„ï¼Œéƒ½å¿…é¡»è¢«ç¼–ç ä¸º &amp; 

é”™è¯¯ï¼š
http://club.china.alibaba.com/forum/thread/search_forum.html?action=SearchForum&doSearchForum=true&main=1&catcount=10&keywords=mp3 
æ­£ç¡®ï¼š
http://club.china.alibaba.com/forum/thread/search_forum.html?action=SearchForum&amp;doSearchForum=true&amp;main=1&amp;catcount=10&amp;keywords=mp3

##### **10ã€ç»™æ‰€æœ‰å±æ€§èµ‹ä¸€ä¸ªå€¼**

XHTMLè§„å®šæ‰€æœ‰å±æ€§éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå€¼ï¼Œæ²¡æœ‰å€¼çš„å°±é‡å¤æœ¬èº«ã€‚ä¾‹å¦‚ï¼š 
<td nowrap><input type="checkbox" name="shirt" value="medium" checked>å¿…é¡»ä¿®æ”¹ä¸ºï¼š
<td nowrap="nowrap"><input type="checkbox" name="shirt" value="medium" checked="checked" />

##### **11ã€æ‰€æœ‰çš„æ ‡è®°éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªç›¸åº”çš„ç»“æŸæ ‡è®°**

ä»¥å‰åœ¨HTMLä¸­ï¼Œä½ å¯ä»¥æ‰“å¼€è®¸å¤šæ ‡ç­¾ï¼Œä¾‹å¦‚<p>å’Œ<li>è€Œä¸ä¸€å®šå†™å¯¹åº”çš„</p>å’Œ</li>æ¥å…³é—­å®ƒä»¬ã€‚ä½†åœ¨XHTMLä¸­è¿™æ˜¯ä¸åˆæ³•çš„ã€‚XHTMLè¦æ±‚æœ‰ä¸¥è°¨çš„ç»“æ„ï¼Œæ‰€æœ‰æ ‡ç­¾å¿…é¡»å…³é—­ã€‚å¦‚æœæ˜¯å•ç‹¬ä¸æˆå¯¹çš„æ ‡ç­¾ï¼Œåœ¨æ ‡ç­¾æœ€ååŠ ä¸€ä¸ª"/"æ¥å…³é—­å®ƒã€‚ ä¾‹å¦‚ï¼š<br />

```html
<img height="80" alt="ç½‘é¡µ" title="ç½‘é¡µ" src="logo.gif" width="200" /> 
```

ç‰¹æ®Šç»“æŸæ ‡è®° 

é”™è¯¯ï¼šDocument.write("<td width=\"300\"><a href=\"1.html\">ok</a></td>");

æ­£ç¡®: Document.write("<td width=\"300\"><a href=\"1.html\">ok<\/a><\/td>");

åœ¨jsä¸­ï¼ŒåŸå·²ç»“æŸçš„æ ‡ç­¾éœ€è¦å†è½¬ä¹‰å†ç»“æŸã€‚

##### **12ã€æ‰€æœ‰çš„æ ‡è®°éƒ½å¿…é¡»åˆç†åµŒå¥—** 

åŒæ ·å› ä¸ºXHTMLè¦æ±‚æœ‰ä¸¥è°¨çš„ç»“æ„ï¼Œå› æ­¤æ‰€æœ‰çš„åµŒå¥—éƒ½å¿…é¡»æŒ‰é¡ºåºï¼Œä»¥å‰æˆ‘ä»¬è¿™æ ·å†™çš„ä»£ç ï¼š <p><b></p></b>å¿…é¡»ä¿®æ”¹ä¸ºï¼š<p><b></b></p> å°±æ˜¯è¯´ï¼Œä¸€å±‚ä¸€å±‚çš„åµŒå¥—å¿…é¡»æ˜¯ä¸¥æ ¼å¯¹ç§°ã€‚

é”™è¯¯ï¼š<table><tr><form><td></td></form></tr></table>

æ­£ç¡®ï¼š<form><table><tr><td></td></tr></table></form>

##### **13ã€å›¾ç‰‡æ·»åŠ æœ‰æ„ä¹‰çš„altå±æ€§**

ä¾‹å¦‚ï¼š

```html
<img src="logo.gif" width="100" height="100" align="middle" boder="0" alt="w3cschool" />
```

å°½å¯èƒ½çš„è®©ä½œä¸ºå†…å®¹çš„å›¾ç‰‡éƒ½å¸¦æœ‰å±äºè‡ªå·±çš„altå±æ€§ã€‚
åŒç†ï¼šæ·»åŠ æ–‡å­—é“¾æ¥çš„titleå±æ€§ã€‚

```html
<a href="#" target="_blank" title="æ–°é—»æ–°é—»æ–°é—»æ–°é—»">æ–°é—»æ–°é—»â€¦</a>ï¼Œ
```

åœ¨ä¸€äº›é™å®šå­—æ•°çš„å†…å®¹å±•ç¤ºå°¤ä¸ºé‡è¦ï¼Œå¸®åŠ©æ˜¾ç¤ºä¸å®Œæˆçš„å†…å®¹æ˜¾ç¤ºå®Œæ•´ï¼Œè€Œä¸ç”¨è€ƒè™‘é¡µé¢ä¼šå› æ­¤è€Œæ’‘å¤§ã€‚

##### **14ã€åœ¨formè¡¨å•ä¸­å¢åŠ lableï¼Œä»¥å¢åŠ ç”¨æˆ·å‹å¥½åº¦** 

```html
<form action="http://somesite.com/prog/adduser" method="post">
  <label for="firstname">first name: </label>
  <input type="text" id="firstname" />
  <label for="lastname">last name: </label>
  <input type="text" id="lastname" />
</form>
```

**é™„å½•ä¸€
1ã€XHTMLæ ¡éªŒ**
æ ¡éªŒç½‘å€ï¼šhttp://validator.w3.org/
æ ¡éªŒæ–¹å¼ï¼šç½‘å€æ ¡éªŒã€æ–‡ä»¶ä¸Šä¼ æ ¡éªŒ
ä¸€èˆ¬é€‰æ‹©"Show Source"å’Œ"Verbose Output"å¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°é”™è¯¯ä»£ç æ‰€åœ¨è¡Œå’Œé”™è¯¯åŸå› ã€‚

XHTMLæ ¡éªŒå¸¸è§é”™è¯¯åŸå› å¯¹ç…§è¡¨
1.No DOCTYPE Found! Falling Back to HTML 4.01 Transitional--æœªå®šä¹‰DOCTYPEã€‚
2.No Character Encoding Found! Falling back to UTF-8.--æœªå®šä¹‰è¯­è¨€ç¼–ç ã€‚
3.end tag for "img" omitted, but OMITTAG NO was specified--å›¾ç‰‡æ ‡ç­¾æ²¡æœ‰åŠ "/"å…³é—­ã€‚
4.an attribute value specification must be an attribute value literal unless SHORTTAG YES is specified--å±æ€§å€¼å¿…é¡»åŠ å¼•å·ã€‚
5.element "DIV" undefined---DIVæ ‡ç­¾ä¸èƒ½ç”¨å¤§å†™ï¼Œè¦æ”¹æˆå°å†™divã€‚
6.required attribute "alt" not specified---å›¾ç‰‡éœ€è¦åŠ altå±æ€§ã€‚
7.required attribute "type" not specified---JSæˆ–è€…CSSè°ƒç”¨çš„æ ‡ç­¾æ¼äº†typeå±æ€§ã€‚
å…¶ä¸­æœ€æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯æ ‡ç­¾çš„å¤§å°å†™é—®é¢˜äº†ã€‚é€šå¸¸è¿™äº›é”™è¯¯éƒ½æ˜¯å…³è”çš„ï¼Œæ¯”å¦‚å¿˜è®°äº†ä¸€ä¸ª</li>å…¶ä»–<li>æ ‡ç­¾éƒ½ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ä¸è¦çœ‹åˆ°ä¸€å †çš„é”™è¯¯å®³æ€•ï¼Œé€šå¸¸è§£å†³äº†ä¸€ä¸ªé”™è¯¯ï¼Œå…¶ä»–çš„é”™è¯¯ä¹Ÿéƒ½æ²¡æœ‰äº†ã€‚

**é™„å½•äºŒ
2ã€CSS2æ ¡éªŒ**
æ ¡éªŒç½‘å€ï¼šhttp://jigsaw.w3.org/css-validator/
æ ¡éªŒæ–¹å¼ï¼šç½‘å€æ ¡éªŒã€æ–‡ä»¶ä¸Šä¼ æ ¡éªŒã€ç›´æ¥è´´å…¥ä»£ç æ ¡éªŒ
æ ¡éªŒæˆåŠŸï¼Œä¼šæ˜¾ç¤º"æ­å–œæ­å–œï¼Œæ­¤æ–‡æ¡£å·²ç»é€šè¿‡æ ·å¼è¡¨æ ¡éªŒ! "ã€‚æ ¡éªŒå¤±è´¥ï¼Œä¼šæ˜¾ç¤ºä¸¤ç±»é”™è¯¯ï¼šé”™è¯¯å’Œè­¦å‘Šã€‚é”™è¯¯è¡¨ç¤ºä¸€å®šè¦ä¿®æ­£ï¼Œå¦åˆ™æ— æ³•é€šè¿‡æ ¡éªŒï¼›è­¦å‘Šè¡¨ç¤ºæœ‰ä»£ç ä¸è¢«W3Cæ¨è,å»ºè®®ä¿®æ”¹ã€‚
åŒæ ·ï¼Œé€šè¿‡æ£€éªŒåï¼Œå¯ä»¥æ”¾ç½®ä¸€ä¸ªCSSæ ¡éªŒé€šè¿‡å›¾æ ‡ã€‚

CSS2æ ¡éªŒå¸¸è§é”™è¯¯åŸå› å¯¹ç…§è¡¨
1.(é”™è¯¯)æ— æ•ˆæ•°å­—ï¼šcolor909090ä¸æ˜¯ä¸€ä¸ªcolorå€¼ï¼Œ909090---åå…­è¿›åˆ¶é¢œè‰²å€¼å¿…é¡»åŠ "#"å·ï¼Œå³#909090
2.(é”™è¯¯)æ— æ•ˆæ•°å­—ï¼šmargin-topUnknown dimensionï¼š6pixels ---pixelsä¸æ˜¯ä¸€ä¸ªå•ä½å€¼ï¼Œæ­£ç¡®å†™æ³•6px
3.(é”™è¯¯)å±æ€§ï¼šscrollbar-face-color ä¸å­˜åœ¨ : #eeeeee --- å®šä¹‰æ»šåŠ¨æ¡é¢œè‰²æ˜¯éæ ‡å‡†çš„å±æ€§
4.(é”™è¯¯)å€¼ï¼šcursorhandä¸å­˜åœ¨ : handæ˜¯éæ ‡å‡†å±æ€§å€¼ï¼Œä¿®æ”¹ä¸ºcursor:pointer
5.(è­¦å‘Š)Line:0 font-family: å»ºè®®ä½ æŒ‡å®šä¸€ä¸ªç§ç±»æ—ç§‘ä½œä¸ºæœ€åçš„é€‰æ‹© --W3Cå»ºè®®å­—ä½“å®šä¹‰çš„æ—¶å€™ï¼Œæœ€åä»¥ä¸€ä¸ªç±»åˆ«çš„å­—ä½“ç»“æŸï¼Œä¾‹å¦‚"sans-serif"ï¼Œä»¥ä¿è¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸‹ï¼Œç½‘é¡µå­—ä½“éƒ½èƒ½è¢«æ˜¾ç¤ºã€‚
6.(è­¦å‘Š)Line:0 can't find the warning message for otherprofile --è¡¨ç¤ºåœ¨ä»£ç ä¸­æœ‰éæ ‡å‡†å±æ€§æˆ–å€¼ï¼Œæ ¡éªŒç¨‹åºæ— æ³•åˆ¤æ–­å’Œæä¾›ç›¸åº”çš„è­¦å‘Šä¿¡æ¯ã€‚

### CSSï¼ˆå æ¯”20åˆ†é’Ÿï¼‰

#### 1ã€å¸ƒå±€

##### 1.1ã€ç›’å­æ¨¡å‹çš„å®½åº¦å¦‚ä½•è®¡ç®—ï¼Ÿ

width + padding + border = 122px

```html
<!-- div1çš„offsetWidthæ˜¯å¤šé•¿ï¼Ÿ -->
<style>
#div1{
  width: 100px;
  padding: 10px;
  border: 1px solid #ccc;
  margin: 10px;
}
</style>
<body><div id="div1"></div></body>
<script>console.log(document.getElementById('div1').offsetWidth)</script>
```

offsetWidth = ( å†…å®¹å®½åº¦width + å†…è¾¹è·padding + è¾¹æ¡†border )ï¼Œæ— å¤–è¾¹è·margin

è¿½é—®ï¼šå¦‚æœè®©offsetWidth=100pxï¼Œæ€ä¹ˆå®ç°ï¼Ÿ

```css
box-sizing: border-box;
```



##### 1.2ã€marginç«–ç›´æ–¹å‘é‡å é—®é¢˜ï¼Ÿ

ç›¸é‚»å…ƒç´ çš„margin-topå’Œmargin-bottomä¼šå‘ç”Ÿé‡å 

ç©ºç™½å†…å®¹çš„<p></p>ä¹Ÿä¼šé‡å 

æ‰€ä»¥ç­”æ¡ˆæ˜¯ï¼š15px

```HTML
<!-- AAAå’ŒBBBä¹‹é—´çš„è·ç¦»æ˜¯å¤šå°‘ï¼Ÿ -->
<p>AAA</p>
<!-- ç©ºæ ‡ç­¾æ²¡æœ‰é«˜åº¦ï¼Œæ‰€ä»¥åªå‰©marginäº†ï¼Œå¯¼è‡´é‡å åœ¨å…¶ä¸­ï¼Œæœ€å¤§å€¼æ˜¯15px -->
<p></p>
<p></p>
<p></p>
<p>BBB</p>
```

```CSS
p{
  font-size: 16px;
  line-height: 1;
  margin-top: 10px;
  margin-bottom: 15px;
}
```



##### 1.3ã€marginè´Ÿå€¼çš„é—®é¢˜

â€‹	å¯¹marginçš„top left right bottomè®¾ç½®è´Ÿå€¼ï¼Œæœ‰ä½•æ•ˆæœï¼Ÿ

â€‹		**margin-topè´Ÿå€¼å…ƒç´ å‘ä¸Šç§»åŠ¨ï¼Œmargin-leftè´Ÿå€¼å…ƒç´ å‘å·¦ç§»åŠ¨**

```html
    <p>ç”¨äºæµ‹è¯• margin top bottom çš„è´Ÿæ•°æƒ…å†µ</p>
    <div class="container">
        <div class="item border-blue" style="margin-bottom: -20px">
            this is item 1
        </div>
        <div class="item border-red" >
            this is item 2
        </div>
    </div>
    <p>ç”¨äºæµ‹è¯• margin left right çš„è´Ÿæ•°æƒ…å†µ</p>
    <div class="container clearfix">
        <div class="item border-blue float-left" style="margin-right: -20px">
            this is item 3
        </div>
        <div class="item border-red float-left" >
            this is item 4
        </div>
    </div>
```

```css
body {
    margin: 20px;
}
.float-left {
    float: left;
}
.clearfix:after {
    content: '';
    display: table;
    clear: both;
}
.container {
    border: 1px solid #ccc;
    padding: 10px;
}
.container .item {
    width: 100px;
    height: 100px;
}
.container .border-blue {
    border: 1px solid blue;
}
.container .border-red {
    border: 1px solid red;
}
```

â€‹     **margin-rightè´Ÿå€¼ï¼Œå³ä¾§å…ƒç´ å·¦ç§»ï¼Œè‡ªèº«ä¸å—å½±å“**

â€‹	 **margin-bottomè´Ÿå€¼ï¼Œä¸‹æ–¹å…ƒç´ ä¸Šç§»ï¼Œè‡ªèº«ä¸å—å½±å“**



##### 1.4ã€BFCçš„ç†è§£å’Œåº”ç”¨

###### 	ä»€ä¹ˆæ˜¯BFC? å¦‚ä½•åº”ç”¨ï¼Ÿ

â€‹		=> block fromat context,å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡

â€‹		=> ä¸€å—ç‹¬ç«‹æ¸²æŸ“åŒºåŸŸï¼Œå†…éƒ¨å…ƒç´ çš„æ¸²æŸ“ä¸ä¼šå½±å“è¾¹ç•Œä»¥å¤–çš„å…ƒç´ 

###### 	å½¢æˆBFCçš„æ¡ä»¶

â€‹		=> floatä¸æ˜¯none

â€‹		=> positionæ˜¯absoluteæˆ–fixed

â€‹		=> overflowä¸æ˜¯visible

â€‹		=> displayæ˜¯flex inline-block

###### 	åº”ç”¨ï¼šæ¸…é™¤æµ®åŠ¨	

```html
<div class="container bfc">
    <img src="https://www.imooc.com/static/img/index/logo.png" class="left" style="margin-right: 10px;"/>
    <p class="bfc">æŸä¸€æ®µæ–‡å­—â€¦â€¦</p>
</div>
```

```css
.left {
    float: left;
}
.bfc {
    overflow: hidden; /* è§¦å‘å…ƒç´  BFC */
}
```

##### 1.5ã€floatå¸ƒå±€ï¼ˆä¼ ç»ŸPCï¼‰çš„é—®é¢˜ï¼Œä»¥åŠæ‰‹å†™clearfix

###### 	Â·åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€ï¼ˆç›®çš„ï¼‰

â€‹		=> ä¸‰æ å¸ƒå±€ï¼Œä¸­é—´ä¸€æ æœ€å…ˆåŠ è½½å’Œæ¸²æŸ“ï¼ˆå†…å®¹æœ€é‡è¦ï¼‰

â€‹		=> ä¸¤ä¾§å†…å®¹å›ºå®šï¼Œä¸­é—´å†…å®¹éšç€å®½åº¦è‡ªé€‚åº”

â€‹		=> ä¸€èˆ¬ç”¨äºPCç½‘é¡µ

â€‹		**å¦‚ä½•å®ç°**

â€‹		1ã€ä½¿ç”¨floatå¸ƒå±€  

â€‹		2ã€ä¸¤ä¾§ä½¿ç”¨marginè´Ÿå€¼ï¼Œä»¥ä¾¿å’Œä¸­é—´å†…å®¹æ¨ªå‘é‡å 

â€‹		3ã€é˜²æ­¢ä¸­é—´å†…å®¹è¢«ä¸¤ä¾§è¦†ç›–ï¼Œä¸€ä¸ªç”¨paddingä¸€ä¸ªç”¨margin

###### åœ£æ¯å¸ƒå±€

```html
<div id="header">this is header</div>
    <div id="container" class="clearfix">
        <div id="center" class="column">this is center</div>
        <div id="left" class="column">this is left</div>
        <div id="right" class="column">this is right</div>
    </div>
<div id="footer">this is footer</div>
```

```css
body {
    min-width: 550px;
}
#header {
    text-align: center;
    background-color: #f1f1f1;
}
#container {
    padding-left: 200px;
    padding-right: 150px;
}
#container .column {
    float: left;
}
#center {
    background-color: #ccc;
    width: 100%;
}
#left {
    width: 200px;   
    background-color: yellow;    
    margin-left: -100%;
    position: relative;
    right: 200px;
}
#right {
    background-color: red;
    width: 150px;
    margin-right: -150px;
}
#footer {
    text-align: center;
    background-color: #f1f1f1;
}
.clearfix:after {
  content: '';
  display: table;
  clear: both;
}
```



###### åŒé£ç¿¼å¸ƒå±€

```html
<div id="main" class="col">
    <div id="main-wrap">
        this is main
    </div>
</div>
<div id="left" class="col">
    this is left
</div>
<div id="right" class="col">
    this is right
</div>
```

```css
.col {
    float: left;
}
#main {
    width: 100%;
    height: 200px;
    background-color: #ccc;
}
#main-wrap {
    margin: 0 190px 0 190px;
}
#left {
    width: 190px;
    height: 200px;
    background-color: #0000FF;
    margin-left: -100%;
}
#right {
    width: 190px;
    height: 200px;
    background-color: #FF0000;
    margin-left: -190px;
}
```



###### 	Â·æ‰‹å†™clearfix

```css
.clearfix::after{
    content: '';
    display: block;
    clear: both;
    overflow: hidden;
}
```

```css
.clearfix::after {
  content: '';
  display: table;
  clear: both;
}
```

```css
/* å…¼å®¹IEä½ç‰ˆæœ¬ */
.clearfix{
    *zoom: 1;
}
```

##### 1.6ã€flexç”»éšæœºç‚¹æ•°çš„éª°å­ğŸ²

###### 	ä¸‰ç‚¹æ•°

â€‹	ä¸»è¦è€ƒå¯Ÿç‚¹ï¼šflex-directionï¼Œjustify-contentï¼Œalign-itemsï¼Œflex-warpï¼Œalign-self

```html
<div class="parent">
    <div class="left" style="background-color: green;"></div>
    <div class="center" style="background-color: red;"></div>
    <div class="right" style="background-color: blue;"></div>
</div>
```

```css
.parent{
    display: flex;
    flex-direction: row;
    justify-content: space-betw
    width: 200px;
    height: 200px;
    background-color: #f1f1f1;
    border-radius: 20px;
    padding: 25px;
}
.left,.center,.right{
    width: 50px;
    height: 50px;
    border-radius: 50%;
}
.left{
    /* å‚ç›´æ–¹å‘å°¾å¯¹é½ */
    align-self:flex-end;
}
.center{
    /* å‚ç›´æ–¹å‘å±…ä¸­å¯¹é½ */
    align-self: center;
}
.right{
    align-self:flex-start;
}
```



#### 2ã€å®šä½

##### absoluteå’Œrelativeåˆ†åˆ«ä¾æ®ä»€ä¹ˆå®šä½ï¼Ÿ

â€‹	absolute**é»˜è®¤æ˜¯bodyå®šä½**ï¼Œå…¶ä»–æƒ…å†µä¾æ®**æœ€è¿‘ä¸€å±‚çš„å®šä½å…ƒç´ **å®šä½

â€‹	relativeä¾æ®è‡ªèº«ä½ç½®å®šä½

```html
 <div class="relative">
     <div class="absolute">
         this is absolute
     </div>
 </div>
```

```css
.relative {
    /* æ³¨é‡Šè¿™æ¡åabsoluteç›’å­å°±ä¼šæ‰¾bodyå®šä½*/
    position: relative;
    width: 400px;
    height: 200px;
    border: 1px solid #ccc;
    top: 20px;
    left: 50px;
}
.absolute {
    position: absolute;
    width: 200px;
    height: 100px;
    border: 1px solid blue;
    top: 20px;
    left: 50px;
}
```



##### å±…ä¸­å¯¹é½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ

###### 	æ°´å¹³å±…ä¸­

â€‹		inlineå…ƒç´ ï¼štext-align: center

```html
<div class="container">
    <span>ä¸€æ®µæ–‡å­—</span>
</div>
```

```css
.container {
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px
    text-align: center;
}
```

â€‹		

â€‹		blockå…ƒç´ ï¼šmargin:auto;

```html
<div class="container">
    <div class="item">
        this is block item
    </div>
</div>
```

```css
.container {
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px;
}
.container.item {
    width: 500px;
    margin: auto;
    background-color: #ccc;
}
```

â€‹	

â€‹	absoluteå…ƒç´ ï¼šleft:50%,margin-leftè´Ÿå€¼or transform:translateX(-50%)

```html
<div class="container">
    <div class="item">
        this is absolute item
    </div>
</div>
```

```css
.container {
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px;
}
.container .item {
    width: 300px;
    height: 100px;
    position: absolute;
    left: 50%;
    /* è®©ç›’å­å‘å·¦ç§»åŠ¨è‡ªå·±çš„ä¸€åŠå®½åº¦ï¼Œç›¸å½“äºå°†å¹³åˆ†çº¿æ‹‰åˆ°äº†ç›’å­çš„ä¸­é—´ */
    margin-left: -150px;
    /*transform:translateX(-50%)*/
}
```



###### 	å‚ç›´å±…ä¸­

â€‹		inlineå…ƒç´ ï¼šline-height = height

```html
<div class="container container-1">
    <span>ä¸€æ®µæ–‡å­—</span>
</div>
```

```css
.container {
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px;
    height: 200px;
}
.container-1{
    text-align: center;
    line-height: 200px;
    height: 200px;
}
```

â€‹		

â€‹		absoluteå…ƒç´ ï¼štop:50%,margin-topè´Ÿå€¼or transform:translateY(-50%)

```html
<div class="container">
    <div class="item">
        this is item
    </div>
</div>
```

```css
.container {
 	position: relative;
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px;
    height: 200px;
}
.container .item {
    width: 300px;
    height: 100px;
    position: absolute;
    left: 50%;    
    top: 50%;
    margin-left: -150px;
    margin-top: -50px;
    /* å°†marginæ¢æˆè¿™ä¸€æ¡ä¹Ÿè¡Œ*/
    /* transform: translate(-50%, -50%) */
    background-color: #ccc;
}
```

â€‹	

â€‹	absoluteå…ƒç´ ï¼štop, left, bottom, right = 0  + margin: auto;

â€‹	æ—¢è¦ä¿è¯å…¼å®¹æ€§ï¼Œå­å…ƒç´ é«˜åº¦æœªçŸ¥

```html
<div class="container">
    <div class="item">
        this is item
    </div>
</div>
```

```css
.container {
	position: relative;
    border: 1px solid #ccc;
    margin: 10px;
    padding: 10px;
    height: 200px;
}
.container .item {
    width: 100px;
    height: 50px;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    /* è‡ªåŠ¨å¡«å…… */
    margin: auto;
    background-color: #ccc;
}
```



#### 3ã€å›¾æ–‡æ ·å¼

##### line-heightçš„ç»§æ‰¿é—®é¢˜

â€‹	å†™å…·ä½“æ•°å€¼ï¼Œå¦‚30pxï¼Œåˆ™ç»§æ‰¿æ”¹å€¼ã€‚

â€‹	å†™æ¯”ä¾‹ï¼Œå¦‚2/1.5ï¼Œåˆ™ç»§æ‰¿è¯¥æ¯”ä¾‹ã€‚

â€‹	å†™ç™¾åˆ†æ¯”ï¼Œå¦‚200%ï¼Œåˆ™ç»§æ‰¿è®¡ç®—å‡ºæ¥çš„å€¼ã€‚

```html
<p>è¿™æ˜¯ä¸€è¡Œæ–‡å­—</p>
```

```css
body {
    font-size: 20px;   
    /* line-height: 30px; */
    /* line-height: 1.5; */
    line-height: 200%;
}
p {
    background-color: #ccc;
    font-size: 16px;
    /* 30px */
    /* 1.5 * 16 = 24px */
    /* 20px * 200% = 40px */
}
```



#### 4ã€å“åº”å¼

##### remæ˜¯ä»€ä¹ˆï¼Ÿ

â€‹	pxæ˜¯ç»å¯¹é•¿åº¦å•ä½ï¼Œå¸¸ç”¨

â€‹	emæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºçˆ¶å…ƒç´ ï¼Œä¸å¸¸ç”¨

â€‹	remæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºæ ¹å…ƒç´ ï¼Œå¸¸ç”¨äºå“åº”å¼å¸ƒå±€

```html
<p style="font-size: 0.1rem">rem 1</p>
<p style="font-size: 0.2rem">rem 1</p>
<p style="font-size: 0.3rem">rem 1</p>
<div style="width: 1rem;">
    this is div1
</div>
<div style="width: 2rem;">
    this is div2
</div>
<div style="width: 3rem;">
    this is div3
</div>
```

```css
/* æ ¹å…ƒç´  */
html {
    font-size: 100px;
}
div {
    background-color: #ccc;
    margin-top: 10px;
    font-size: 0.16rem;
}
```



##### å¦‚ä½•å®ç°å“åº”å¼ï¼Ÿ

â€‹	media-queryæ ¹æ®ä¸åŒçš„å±å¹•å®½åº¦è®¾ç½®æ ¹å…ƒç´ font-size

â€‹	æå°‘ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯å…¨å±€å®šä¹‰çš„ï¼ŒåŸºæœ¬åªå†™ä¸€æ¬¡

```html
<div id="div1">
    this is div
</div>
```

```css
@media only screen and (max-width: 374px) {
    /* iphone5 æˆ–è€…æ›´å°çš„å°ºå¯¸ï¼Œä»¥ iphone5 çš„å®½åº¦ï¼ˆ320pxï¼‰æ¯”ä¾‹è®¾ç½® font-size */
    html {
        font-size: 86px;
    }
}
@media only screen and (min-width: 375px) and (max-width: 413px) {
    /* iphone6/7/8 å’Œ iphone x */
    html {
        font-size: 130px;
    }
}
@media only screen and (min-width: 414px) {
    /* iphone6p æˆ–è€…æ›´å¤§çš„å°ºå¯¸ï¼Œä»¥ iphone6p çš„å®½åº¦ï¼ˆ414pxï¼‰æ¯”ä¾‹è®¾ç½® font-size */
    html {
        font-size: 180px;
    }
}
body {
    font-size: 0.16rem;
}
#div1 {
    width: 1rem;
    background-color: #ccc;
}
```



##### remçš„å¼Šç«¯ï¼Ÿ

â€‹	æœ‰"é˜¶æ¢¯"æ€§

##### ç½‘é¡µè§†å£å°ºå¯¸

â€‹	å±å¹•é«˜åº¦(å¯ä»¥å‘å…‰çš„) => window.screen.height

â€‹	ç½‘é¡µè§†å£é«˜åº¦(é™¤äº†æµè§ˆå™¨è‡ªå·±åº•éƒ¨å’Œé¡¶éƒ¨èœå•çš„é«˜åº¦ï¼Œå³å¯æ˜¾ç¤ºå†…å®¹çš„é«˜åº¦) => window.innerHeight

â€‹	bodyé«˜åº¦(å®é™…å†…å®¹çš„é«˜åº¦) => document.body.clientHeight

##### vw/vh

â€‹	vh => **ç½‘é¡µè§†å£**é«˜åº¦çš„1/100

â€‹	vw => **ç½‘é¡µè§†å£**å®½åº¦çš„1/100

â€‹	vmaxå–vhå’Œvm(å³é«˜åº¦å’Œå®½åº¦)ä¸­çš„ä¸¤è€…æœ€å¤§å€¼ï¼Œvminå–ä¸¤è€…æœ€å°å€¼

```html
<div id="container">
</div>
```

```css
body {
    margin: 0;
    padding: 0;
}
#container {
    background-color: red;
    width: 10vw;
    height: 10vh;
}
```

```js
window.innerHeight === 100vh
window.innerWidth === 100vw
```



#### 5ã€CSS3

##### CSS3åŠ¨ç”»ï¼ˆéé‡ç‚¹ï¼‰

â€‹	å¹¶ä¸æ˜¯é¢è¯•çš„é‡ç‚¹ï¼Œé™¤éä½ é¢è¯•æ˜¯ä¸€ä¸ªä¸“é—¨åšåŠ¨ç”»çš„èŒä½









## 2ã€JSåŸºç¡€

### 2.1ã€ã€Šå˜é‡å’Œè®¡ç®—ã€‹

#### é¢˜ç›®

typeofèƒ½åˆ¤æ–­å“ªäº›ç±»å‹ï¼Ÿ

ç­”ï¼šæ‰€æœ‰å€¼ç±»å‹ï¼Œå‡½æ•°ã€æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹

ä½•æ—¶ä½¿ç”¨=== ä½•æ—¶ä½¿ç”¨==ï¼Ÿ

==ä¼šåšéšå¼ç±»å‹è£…æ¢ï¼Œé™¤äº†nullï¼Œå…¶ä»–ä¸€å¾‹ç”¨===

å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«

```js
const obj1 = { x:100, y:200 }
const obj2 = obj1
let x1 = obj1.x
obj2.x = 101
x1 = 102
console.log(obj1.x) // 101
```

æ‰‹å†™æ·±æ‹·è´

Â·æ³¨æ„åˆ¤æ–­å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹

Â·æ³¨æ„åˆ¤æ–­æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡

Â·é€’å½’

#### çŸ¥è¯†ç‚¹

#### å˜é‡ç±»å‹

##### å€¼ç±»å‹VSå¼•ç”¨ç±»å‹

```js
// å€¼ç±»å‹
let a = 100
let b = a
a = 200
console.log(b) // 100
```

```js
// å¼•ç”¨ç±»å‹
let a = { age: 20 }
let b = a
b.age = 21
console.log(a.age) //21
```

###### å·®å¼‚åŸå› 

å€¼ç±»å‹åœ¨ä¸åŒçš„æ ˆå†…å­˜ï¼Œå ç”¨ç©ºé—´å°

å¼•ç”¨ç±»å‹åœ¨ç›¸åŒçš„å †å†…å­˜ï¼Œå ç”¨ç©ºé—´å¤§

![image-20210905082438346](D:\front-end\study\MarkDown\0åŸºç¡€\img\å€¼ä¸å¼•ç”¨ç±»å‹.png)

å¸¸è§å€¼ç±»å‹

```js
const a //æŠ¥é”™
let z //undefined
const abc = 'abc'
const n = 100
const b = true
const s = Symbol('s')
```

å¸¸è§å¼•ç”¨ç±»å‹

```js
const obj = { x: 100}
const arr = ['a', 'b', 'c']
const n = null //ç‰¹æ®Šå¼•ç”¨ç±»å‹ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸ºç©ºåœ°å€
// ç‰¹æ®Šå¼•ç”¨ç±»å‹ï¼Œä½†ä¸ç”¨äºå­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥æ²¡æœ‰â€œæ‹·è´ã€å¤åˆ¶å‡½æ•°â€è¿™ä¸€è¯´
function fn() {}
```



##### typeofè¿ç®—ç¬¦

è¯†åˆ«æ‰€æœ‰çš„**å€¼ç±»å‹**

```js
let z //undefined
const str = 'abc'
const n = 100
const b = true
const s = Symbol('s')
typeof a // 'undefined'
typeof str // 'string'
typeof n // 'number'
typeof b // 'boolean'
typeof s // 'symbol'
```

è¯†åˆ«å‡½æ•°

```js
typeof console.log // 'function'
typeof function () {}  // 'function'
```

åˆ¤æ–­æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹

```js
// åªèƒ½è¯†åˆ«æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹
typeof null // 'object'
typeof ['a', 'b'] // 'object'
typeof { x: 100 } // 'object'
```

###### æ‰‹å†™æ·±æ‹·è´

```js
const obj1 = { 
	age:20,
	name: 'xxx',
	address:{
	  city:'beijing'
	},
	arr:['a', 'b', 'c']
}
/**	æ·±æ‹·è´
  *	objè¦æ‹·è´çš„å¯¹è±¡
  */
function deepClone(obj = {}){
    // ä¸æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼Œç›´æ¥è¿”å›
	if(typeof obj !== 'object' || obj == null) return obj
    // åˆå§‹åŒ–è¿”å›ç»“æœ
    let result
    // åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„
    if(obj instanceof Array){
        result = []
    } else {
        result = {}
    }
    for(let key in obj){
       // ä¿è¯keyä¸æ˜¯åŸå‹çš„å±æ€§
       if(obj.hasOwnProperty(key)){
         // é€’å½’å†è°ƒç”¨ï¼ï¼ï¼
       	result[key] = deepClone(obj[key])
       }
    }
    // è¿”å›ç»“æœ
    return result
}
```

```js
//åŸæ•°ç»„
var arr1 = [33,44,11,22,[88,66]];
//å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«é€’å½’
function deepClone(arr){
    //ç»“æœæ•°ç»„,æ¯ä¸€å±‚éƒ½æœ‰ä¸€ä¸ªç»“æœæ•°ç»„
    var result = []
    //éå†æ•°ç»„çš„æ¯ä¸€é¡¹
    for(var i = 0; i < arr.length; i++){
        //ç±»å‹åˆ¤æ–­ï¼Œå¦‚æœéå†åˆ°çš„é¡¹æ˜¯æ•°ç»„
        if(Array.isArray(arr[i])){
            //é€’å½’
            result.push(deepClone(arr[i]))
        }else{
            //å¦‚æœéå†åˆ°é¡¹æ˜¯åŸºæœ¬ç±»å‹å€¼ï¼Œåˆ™ç›´æ¥æ¨å…¥ç»“æœæ•°ç»„ï¼›
            //é€’å½’çš„å‡ºå£
            result.push(arr[i])
        }
    }
    return result
}
```

#### å˜é‡è®¡ç®—

ç±»å‹è½¬æ¢

##### å­—ç¬¦ä¸²æ‹¼æ¥

```js
const a = 100 + 10 // 110
const b = 100 + '10' // '10010'
const c = true + '10' // 'true10'
```

##### == è¿ç®—ç¬¦

```js
100 == '100' //true
0 == '' // true
0 == false // true
false == '' // true
null == undefined // true

//é™¤äº† == null ä¹‹åï¼Œå…¶ä»–ä¸€å¾‹ä½¿ç”¨ ===
const obj = { x: 100 }
if(obj.a == null) {}
// ç›¸å½“äº:
// if(obj.a === null || obj.a === undefined) {}
```



##### ifè¯­å¥ä¸é€»è¾‘è¿ç®—

trulyå˜é‡ï¼š!!a === trueçš„å˜é‡

```js
const n = 100
!n // false
!!n // true
!!{} // true
```

faslelyå˜é‡ï¼š!!a === falseçš„å˜é‡,ç›¸å½“äºè°ƒç”¨äº†Boolean()å‡½æ•°

```js
const z = 0
!z // true
!!z // false
!!null // false
!!undefined // false
!!'' // false
!!0 // false
!!NaN // false
!!false // false
```

é€»è¾‘åˆ¤æ–­

```js
10 && 0 // 0
'' || 'abc' // 'abc'
!window.abc // true
```



### ã€ŠåŸå‹å’ŒåŸå‹é“¾ã€‹

#### é¢˜ç›®

å¦‚ä½•å‡†å¤‡åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯æ•°ç»„ï¼Ÿ

```js
// ES6
arr instanceof Array
// ES5
Array.isArray(arr)
```

æ‰‹å†™ä¸€ä¸ªç®€æ˜“çš„jQueryï¼Œè€ƒè™‘æ’ä»¶å’Œæ‰©å±•æ€§

```js
class jQuery{
  constructor(selector){
    const result = document.querySelectorAll(selector)
    const length = result.length
    for(let i = 0; i < length; i++){
       this[i] = result[i]
    }
    this.length = length  
    this.selector = selector  
  }
  get(index){
    return this[index]
  }
  each(fn){
    for(let i = 0; i < length; i++){
      const elem = this[i]  
      fn(elem)
    }
  }
  on(type, fn){
     return this.each(elem => {
        elem.addEventListener(type, fn, false)
     })
  }
  // æ‰©å±•DOM API
}

// æ’ä»¶
jQuery.prototype.dialog = function (info){
    alert(info)
}
// æ‰©å±•æ€§ â€œé€ è½®å­â€
class myJQuery extends jQuery{
   constructor(selector){
      super(selector)
   }
   // æ‰©å±•è‡ªå·±çš„æ–¹æ³•
   addClass(className){
       
   }
   style(data){
       
   }
}
// const $p = new jQuery('p')
// $p.get(1)
// $p.each((elem) => console.log(elem.nodeName))
// $p.on('click', () => alert('clicked'))
```

classçš„åŸå‹æœ¬è´¨ï¼Œæ€ä¹ˆç†è§£ï¼Ÿ



#### çŸ¥è¯†ç‚¹

##### classå’Œç»§æ‰¿

```js
// ç±»
class Student {
    // construcotr
    constructor(name, number) {
        // å±æ€§
        this.name = name
        this.number = number
        // this.gender = 'male'
    }
    // æ–¹æ³•
    sayHi() {
        console.log(
            `å§“å ${this.name} ï¼Œå­¦å· ${this.number}`
        )
        // console.log(
        //     'å§“å ' + this.name + ' ï¼Œå­¦å· ' + this.number
        // )
    }
    // study() {
    // }
}

// é€šè¿‡ç±» new å¯¹è±¡/å®ä¾‹
const xialuo = new Student('å¤æ´›', 100)
console.log(xialuo.name)
console.log(xialuo.number)
xialuo.sayHi()
//ç±»ä¼¼äºä½¿ç”¨xialuo.__proto__.sayHi.cal(xiaoluo)
xialuo.__proto__.sayHi()
const madongmei = new Student('é©¬å†¬æ¢…', 101)
console.log(madongmei.name)
console.log(madongmei.number)
madongmei.sayHi()
```

ç»§æ‰¿

```js
// çˆ¶ç±»
class People {
    constructor(name) {
        this.name = name
    }
    eat() {
        console.log(`${this.name} eat something`)
    }
}
// å­ç±»
class Student extends People {
    constructor(name, number) {
        super(name)
        this.number = number
    }
    sayHi() {
        console.log(`å§“å ${this.name} å­¦å· ${this.number}`)
    }
}
// å­ç±»
class Teacher extends People {
    constructor(name, major) {
        super(name)
        this.major = major
    }
    teach() {
        console.log(`${this.name} æ•™æˆ ${this.major}`)
    }
}
// å®ä¾‹
const xialuo = new Student('å¤æ´›', 100)
console.log(xialuo.name)
console.log(xialuo.number)
xialuo.sayHi()
xialuo.eat()
// å®ä¾‹
const wanglaoshi = new Teacher('ç‹è€å¸ˆ', 'è¯­æ–‡')
console.log(wanglaoshi.name)
console.log(wanglaoshi.major)
wanglaoshi.teach()
wanglaoshi.eat()
```



##### ç±»å‹åˆ¤æ–­ instanceof

```js
xialuo instanceof Student // true
xialuo instanceof People // true
xialuo instanceof Object // true
[] instanceof Array // true
[] instanceof Object // true
{} instanceof Object // true
```



##### åŸå‹å’ŒåŸå‹é“¾

###### åŸå‹å…³ç³»

æ¯ä¸ªclasséƒ½æœ‰æ˜¾ç¤ºåŸå‹prototype

æ¯ä¸ªå®ä¾‹éƒ½æœ‰éšå¼åŸå‹__ prototype__

å®ä¾‹çš„__ prototype__æŒ‡å‘å¯¹åº”classçš„prototype

```js
// class å®é™…ä¸Šæ˜¯å‡½æ•°ï¼Œå¯è§æ˜¯è¯­æ³•ç³–
typeof Student // 'function'
typeof People // 'function'
// éšå¼åŸå‹
console.log( xialuo.__proto__ )
// æ˜¾ç¤ºåŸå‹
console.log( Student.prototype )
console.log( xialuo.__proto__ === Student.prototype )
```

![image-20210905100347100](D:\front-end\study\MarkDown\0åŸºç¡€\img\prototype-base.png)

###### æ‰§è¡Œè§„åˆ™

è·å–å±æ€§xialuo.nameæˆ–æ‰§è¡Œæ–¹æ³•xialuo.sayhi()æ—¶

ç°åœ¨è‡ªèº«å±æ€§å’Œæ–¹æ³•å¯»æ‰¾

æ‰¾ä¸åˆ°åˆ™è‡ªåŠ¨å»__ prototype__æŸ¥æ‰¾



###### åŸå‹é“¾

```js
console.log( Student.prototype.__proto__ )
console.log( People.prototype )
console.log( People.prototype === Student.prototype.__proto__ )
console.log( xiaoluo instanceof Arrary ) // false
```

###### æ‰‹ç”»å›¾

![image-20210905101939417](D:\front-end\study\MarkDown\0åŸºç¡€\img\åŸå‹é“¾.png)

é‡è¦æç¤ºï¼ï¼ï¼

classæ˜¯ES6è¯­æ³•è§„èŒƒï¼Œç”±ECMAå§”å‘˜ä¼šå‘å¸ƒ

ECMAåªè§„å®šè¯­æ³•è§„åˆ™ï¼Œå³æˆ‘ä»¬ä»£ç çš„ä¹¦å†™è§„èŒƒï¼Œä¸è§„å®šå¦‚ä½•å®ç°

ä»¥ä¸Šå®ç°æ–¹å¼éƒ½æ˜¯V8å¼•æ“çš„å®ç°æ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸»æµçš„





### 2.2ã€ã€Šä½œç”¨åŸŸå’Œé—­åŒ…ã€‹

#### é¢˜ç›®

thisçš„ä¸åŒåº”ç”¨åœºæ™¯ï¼Œå¦‚ä½•å–å€¼ï¼Ÿ

##### æ‰‹å†™bindå‡½æ•°â˜…â˜… or  call  apply 

```js
Function.prototype.bind1 = function (){
  // å°†å‚æ•°æ‹†è§£ä¸ºæ•°ç»„
  // ES5
  const args = Array.prototype.slice.call(arguments)
  // ES6
  // const args = [...arguments]
  // è·å–thisï¼ˆæ•°ç»„ç¬¬ä¸€é¡¹,å‰©ä½™çš„å°±æ˜¯ä¼ é€’çš„å‚æ•°ï¼‰
  const t = args.shift()
  // fn1.bindä¸­çš„fn1ï¼Œå½“å‰å‡½æ•°çš„this
  const self = this
  // è¿”å›ä¸€ä¸ªå‡½æ•° 
  return function (){
     return self.apply(t, args)
  }
}

function fn1(a, b, c){
  console.log('this', this)
  console.log(a, b, c)
  return 'this is fn1'
}

const fn2 = fn1.bind1({x:1}, 1,2,3)
fn2()
```

å®é™…å¼€å‘ä¸­é—­åŒ…çš„åº”ç”¨åœºæ™¯ï¼Œä¸¾ä¾‹è¯´æ˜

â€‹	**éšè—æ•°æ®**

â€‹	**åšä¸€ä¸ªç®€å•çš„cacheå·¥å…·**

```JS
// é—­åŒ…éšè—æ•°æ®ï¼Œåªæä¾›API
function createCache(){
  const data = {} // é—­åŒ…ä¸­çš„æ•°æ®ï¼Œè¢«éšè—ï¼Œä¸è¢«å¤–ç•Œè®¿é—®
  return {
      set: function(key, val){
         data[key] = val
      },
      get:function(){
         return data[key]
      }
  }
}
const c = createCache()
c.set('a', 100)
console.log(c.get)
```



åˆ›å»º10ä¸ªaæ ‡ç­¾ï¼Œç‚¹å‡»çš„æ—¶å€™å¼¹å‡ºæ¥å¯¹åº”åºå·

```js
// å…¨å±€ä½œç”¨åŸŸ
let i, a
for(i = 0; i < 10; i++){
  a = document.createElement('a')
  a.innerHTML = i + '<br>'
  a.addEventListener('click', function(e){
  	e.preventDefault()
  	alert(i)
  },)
  // ä¸Šæ ‘
  document.body.appendChild(a)
}
```



#### çŸ¥è¯†ç‚¹

##### ä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡

###### ä½œç”¨åŸŸ

â€‹	å…¨å±€ä½œç”¨åŸŸ

â€‹	å‡½æ•°ä½œç”¨åŸŸ

â€‹	å—çº§ä½œç”¨åŸŸï¼ˆES6æ–°å¢ï¼‰

###### è‡ªç”±å˜é‡

â€‹	**ä¸€ä¸ªå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸæ²¡æœ‰å®šä¹‰ï¼Œä½†è¢«ä½¿ç”¨äº†**

â€‹	å‘ä¸Šï¼ˆçˆ¶ï¼‰çº§ä½œç”¨åŸŸï¼Œä¸€å±‚ä¸€å±‚ä¾æ¬¡å¯»æ‰¾ï¼Œå…ˆæ‰¾åˆ°å…ˆç”¨ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢

â€‹	å¦‚æœåˆ°å…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æ‰¾åˆ°ï¼Œåˆ™æŠ¥é”™XX is not defined

![](D:\front-end\study\MarkDown\0åŸºç¡€\img\ä½œç”¨åŸŸé“¾.png)

##### é—­åŒ…â˜…(å®šä¹‰çš„åœ°æ–¹)

â€‹	ä½œç”¨åŸŸåº”ç”¨çš„ç‰¹æ®Šæƒ…å†µï¼Œæœ‰ä¸¤ç§è¡¨ç°

###### 		å‡½æ•°ä½œä¸ºå‚æ•°è¢«ä¼ é€’

```js
function print(fn){
  let a = 200
  fn()
}
let a = 100
function fn() {
  console.log(a)
}
print(fn)
```

###### 		å‡½æ•°ä½œä¸ºè¿”å›å€¼è¢«è¿”å›

```js
function create() {
  let a = 100
  return function(){
    console.log(a)
  }
}
let fn = create()
let a = 200
fn()
```

é—­åŒ…è‡ªç”±å˜é‡çš„æŸ¥æ‰¾ï¼Œæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„åœ°æ–¹ï¼Œå‘ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾ã€‚ä¸æ˜¯åœ¨æ‰§è¡Œçš„åœ°æ–¹



##### thisâ˜…â˜…â˜…ï¼ˆå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼‰

###### ä½œä¸ºæ™®é€šå‡½æ•°

```js
function fn1(){
  console.log(this)
}
fn1()
```



###### ä½¿ç”¨call apply bind

```js
fn1.call({ x: 100 })
// bindè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°
const fn2 = fn1.bind({ x: 200 })
fn2()
```



###### ä½œä¸ºå¯¹è±¡æ–¹æ³•è¢«è°ƒç”¨

```js
const zhangsan = {
  name: 'zhansan',
  sayHi{
  	//thiså³å½“å‰å¯¹è±¡
  	console.log(this)
  },
  wait(){
  	setTimeout( function() {
  	  // this === window
  	  console.log(this)
  	})
  }
}
```



###### åœ¨classæ–¹æ³•ä¸­è°ƒç”¨

```js
class People{
  constructor(name){
    this.name = name
    this.age = 20
  }
  sayHi(){
    // å®ä¾‹zhansan
    console.log(this)
  }
}
const zhangsan = new People('zhansan')
zhangsan.sayHi()
```



###### ç®­å¤´å‡½æ•°

```js
const zhangsan = {
  name: 'zhansan',
  sayHi{
  	//thiså³å½“å‰å¯¹è±¡
  	console.log(this)
  },
  waitAgain(){
    setTimeout( function() {
  	  // thiså³å½“å‰å¯¹è±¡
  	  console.log(this)
  	})
  }
}
```





### 2.3ã€ã€Šå¼‚æ­¥å’Œå•çº¿ç¨‹ã€‹

#### é¢˜ç›®

##### åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

â€‹	JSæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½åŒæ—¶åšä¸€ä»¶äº‹

â€‹	å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œï¼ŒåŒæ­¥ä¼š

##### æ‰‹å†™ç”¨PromiseåŠ è½½ä¸€å¼ å›¾ç‰‡

```js
function loadImg(src){
    return new Promise((resovle, reject) => {
        const img = document.createElement('img')
        img.onload = () => {
            resovle(img)
        }
        img.onerror = () =>{
            reject(new Error(`å›¾ç‰‡åŠ è½½å¤±è´¥${src}`))
        }
        im.src = src
    })
}

const url =''
const url2 =''
loadImg(url).then(img =>{
    console.log(img.width)
    return img // æ™®é€šå¯¹è±¡
}).then(img => {
    console.log(img.height)
    return loadImg(url2) // promiseå®ä¾‹
}).then(img2 => {
    console.log(img2.width)
    return img2
}).then(img2 => {
    console.log(img2.height)
}).catch(err => console.error(err))
```

##### å‰ç«¯ä½¿ç”¨å¼‚æ­¥çš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ

ç­‰å¾…çš„åœºæ™¯: ç½‘ç»œè¯·æ±‚å’Œå®šæ—¶ä»»åŠ¡

#### åœºæ™¯é¢˜

```js
// ç¬”è¯•é¢˜
function fn(){
    console.log(1)
    setTimeout(function() {
      console.log(2)
    }, 1000)
    console.log(3)
    setTimeout(function() {
      console.log(4)
    }, 0)
    console.log(5)
}
fn()
console.log(6)
// 135642
```



#### çŸ¥è¯†ç‚¹

##### å•çº¿ç¨‹å’Œå¼‚æ­¥

JSæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½åŒæ—¶åšä¸€ä»¶äº‹

æµè§ˆå™¨å’Œnodejså·²æ”¯æŒJSå¯åŠ¨**è¿›ç¨‹**ï¼Œå¦‚Web Worker

JSå’ŒDOMæ¸²æŸ“å…±ç”¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œå› ä¸ºJSå¯ä¿®æ”¹DOMç»“æ„

###### å¼‚æ­¥å’ŒåŒæ­¥

é‡åˆ°ç­‰å¾…(ç½‘ç»œè¯·æ±‚ï¼Œå®šæ—¶ä»»åŠ¡)ä¸èƒ½å¡ä½

å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œï¼ŒåŒæ­¥ä¼š

å›è°ƒcallbackå‡½æ•°å½¢å¼

```js
// å¼‚æ­¥
console.log(100)
setTimeout(function (){
  console.log(200)
}, 0)
console.log(300)

// åŒæ­¥
console.log(100)
// è¿™ä¸ªåœ°æ–¹éœ€è¦ç­‰å¾…
alert(200)
console.log(300)
```



#### åº”ç”¨åœºæ™¯

ç½‘ç»œè¯·æ±‚ï¼Œå¦‚ajaxå›¾ç‰‡åŠ è½½

```js
console.log('start')
$.get('./data1.json', function (data1){
  console.log(data1)
})
console.log('end')
```

```js
// å›¾ç‰‡åŠ è½½
console.log('start')
let img = document.createElement('img')
img.onload = function(){
  console.log('loaded')
}
img.src ='./xxx.png'
console.log('end')
```

å®šæ—¶ä»»åŠ¡ï¼Œå¦‚setTimeout/setInterval

```js
console.log(100)
setTimeout(function (){
  console.log(200)
}, 0)
console.log(300)
// å®šæ—¶ä»»åŠ¡
console.log(100)
setInterval(function (){
  console.log(200)
}, 0)
console.log(300)
```



##### callback hellå›è°ƒåœ°ç‹± å’Œ Promise

è§£å†³callback çš„è¯­æ³•åµŒå¥—é—®é¢˜

```js
//è·å–ç¬¬ä¸€ä»½æ•°æ®
$.get(url1, (data1) => {
  console.log(data1)
      // è·å–ç¬¬äºŒä»½æ•°æ®
      $.get(url2, (data2) => {
      console.log(data2)
  		  // è·å–ç¬¬ä¸‰ä»½æ•°æ®
          $.get(url3, (data3) => {
          console.log(data3)
          // è¿˜å¯èƒ½è·å–æ›´å¤šçš„æ•°æ®
		})
	})
})
```

```js
function getData(url){
  return new Promise((resolve, reject) => {
    $.ajax({
      url,
      success(data){
        resolve(data)
      },
      error(err){
        reject(err)
      }
    })
  })
}
const url = 'x1.json'
const url = 'x11.json'
const url = 'x111.json'
getData(url1).then(data1 => {
   console.log(data1)
   return getData(url2)
}).then(data2 => {
   console.log(data2)
   return getData(url3)
}).then(data3 => {
   console.log(data3)
}).catch(err =>{
   console.log(err)
})
```









### 2.4ã€ã€ŠJSå¼‚æ­¥-è¿›é˜¶ã€‹

#### é¢è¯•é¢˜

è¯·æè¿°event loopï¼ˆäº‹ä»¶å¾ªç¯/äº‹ä»¶è®ºè¯¢ï¼‰çš„æœºåˆ¶ï¼Œå¯ç”»å›¾

ä»€ä¹ˆæ˜¯å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

Promiseæœ‰å“ªä¸‰ç§çŠ¶æ€ï¼Ÿå¦‚ä½•å˜åŒ–ï¼Ÿ

#### åœºæ™¯é¢˜

##### promise thenå’Œcatchçš„è¿æ¥

```js
// ç¬¬ä¸€é¢˜
Promise.resolve().then(() => {
  console.log(1) // resolved
}).catch(() => {
  console.log(2)
}).then(() => {
  console.log(3) // resolved
})
// 13

// ç¬¬äºŒé¢˜
Promise.resolve().then(() => {
  console.log(1)
  throw new Error('error1')
}).catch(() => {
  console.log(2) // resolved
}).then(() => {
  console.log(3) // resolved
})
// 12 âœ–
// 123

// ç¬¬ä¸‰é¢˜
Promise.resolve().then(() => {
  console.log(1)
  throw new Error('error1')
}).catch(() => {
  console.log(2) // resolved
}).catch(() => {
  console.log(3)
})
// 12
```

##### async/awaitè¯­æ³•

```js
async function fn(){
 return 100
}
(async function(){
  // 100 âœ–
  // PromiseÂ {<fulfilled>: 100}  âœ”
  const a = fn() 
  
  const b = await fn() // 100 âœ”
})()

// æ‰§è¡Œå®Œæ¯•æ‰“å°å“ªäº›å†…å®¹
(async function(){
  console.log('start')
  const a = await 100
  console.log('a', a)
  const b = await Promise.resolve(200)
  console.log('b', b)
  const c = await Promise.reject(300)
  console.log('c', c)
  console.log('end')
})()
// start a 100 b 200 c 300 end âœ–
// start a 100 b 200 æŠ¥é”™
```

##### promiseå’ŒsetTimeoutçš„é¡ºåº

```JS
console.log(100)
setTimeout(() => {
  console.log(200)
}, 0)
Promise.resolve().then(() => {
  console.log(300)
})
console.log(400)
// 100 400 200 300 âœ–
// 100 400 300 200 âœ”
```

##### å¤–åŠ async/awaitçš„é¡ºåºé—®é¢˜

```js
async function async1(){
 console.log('async1 start')
 await async2()
 console.log('async1 end')
}
async function async2(){
 console.log('async2 start')
}
console.log('script start')

setTimeout(function () {
 console.log('setTimeout')
}, 0)

async1()

// åˆå§‹åŒ–promiseæ—¶ï¼Œä¼ å…¥çš„å‡½æ•°ä¼šç«‹åˆ»è¢«æ‰§è¡Œ
new Promise (function (resolve) {
 console.log('promise1')
 resolve()
}).then(function (){
 console.log('promise2')
})
console.log('script end')
// script start => script end => async1 start => async2 start => async1 end => setTimeout => promise1 => promise2 âœ–
// script start => async1 start => async2 start => promise1 => script end  => async1 end => promise2 => setTimeout âœ”
```



#### çŸ¥è¯†ç‚¹

##### event loopâ˜…â˜…â˜…

https://www.jianshu.com/p/de7aba994523

JSæ˜¯å•çº¿ç¨‹

å¼‚æ­¥è¦åŸºäºå›è°ƒæ¥å®ç°

event loopå°±æ˜¯JSå¼‚æ­¥å›è°ƒçš„å®ç°åŸç†



###### JSå¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ

ä»å‰åˆ°åï¼Œä¸€è¡Œä¸€è¡Œæ‰§è¡Œ

å¦‚æœæŸä¸€è¡Œæ‰§è¡ŒæŠ¥é”™ï¼Œåˆ™åœæ­¢ä¸‹é¢ä»£ç çš„æ‰§è¡Œ

å…ˆæŠŠåŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œå¼‚æ­¥



###### è¿‡ç¨‹

- åŒæ­¥ä»£ç ï¼Œä¸€è¡Œä¸€è¡Œçš„æ”¾åœ¨call stackæ‰§è¡Œ

- é‡åˆ°å¼‚æ­¥ï¼Œä¼šå…ˆâ€œè®°å½•â€ä¸‹ï¼Œç­‰å¾…æ—¶æœºï¼ˆå®šæ—¶ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰

- æ—¶æœºåˆ°äº†ï¼Œå°±ç§»åŠ¨åˆ°Callback Queue

- å¦‚æœCall Stackä¸ºç©ºï¼ˆå³åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼‰ï¼ŒEvent  Loopå¼€å§‹å·¥ä½œ

- è½®è¯¢æŸ¥æ‰¾Callback Queueï¼Œå¦‚æœ‰åˆ™ç§»åŠ¨åˆ°Call Stackæ‰§è¡Œ

- ç„¶åç»§ç»­è½®è¯¢æŸ¥æ‰¾ï¼ˆæ°¸åŠ¨æœºï¼‰



æŒ‰é’®èŠ‚æµå¤±æ•ˆ

###### DOMäº‹ä»¶ä¸event loop

DOMäº‹ä»¶ä¹Ÿä½¿ç”¨å›è°ƒï¼ŒåŸºäºevent loop





##### Promise

###### ä¸‰ç§çŠ¶æ€çš„è¡¨ç°å’Œå˜åŒ–

pending  resolved(fulfilled)  rejected

â€‹	å˜åŒ–ä¸å¯é€†

pending => resolved æˆ– pending => rejected

```js
// åˆšå®šä¹‰æ—¶ï¼ŒçŠ¶æ€é»˜è®¤ä¸º pending
const p1 = new Promise((resolve, reject) => {

})

// æ‰§è¡Œ resolve() åï¼ŒçŠ¶æ€å˜æˆ resolved
const p2 = new Promise((resolve, reject) => {
    setTimeout(() => {
        resolve()
    })
})

// æ‰§è¡Œ reject() åï¼ŒçŠ¶æ€å˜æˆ rejected
const p3 = new Promise((resolve, reject) => {
    setTimeout(() => {
        reject()
    })
})

const p4 = Promise.resolve(100)
p4.then(data => {
  console.log('data', data) //
}).catch(err => {
  console.log('err', err)
})

const p5 = Promise.reject('err')
p5.then(data => {
  console.log('data2', data)
}).catch(err => {
  console.log('err2', err) //
})
```

###### thenå’Œcatchå¯¹çŠ¶æ€çš„å½±å“

- thenæ­£å¸¸è¿”å›resolvedï¼Œé‡Œé¢æœ‰æŠ¥é”™åˆ™è¿”å›rejected

  ```js
  const p1 = Promise.resolve(100).then(()=>{
    return 100
  })
  p1.then(data => {
    console.log('data', data) //
  }).catch(err => {
    console.log('err', err)
  })
  
  const p2 = Promise.resolve().then(()=>{
    throw new Error('then error')
  })
  p2.then(data => {
    console.log('data', data)
  }).catch(err => {
    console.log('err', err) //
  })
  ```

- catchæ­£å¸¸è¿”å›resolvedï¼Œé‡Œé¢æœ‰æŠ¥é”™åˆ™è¿”å›rejected

  ```js
  const p1 = Promise.reject('my error').catch(err=>{
    // resolved
    console.error(err)
  })
  p1.then(data => {
    // resolved 
    console.log('data', data) // æ‰§è¡Œ
  }).catch(err => {  
    console.log('err', err) // ä¸æ‰§è¡Œ
  })
  
  const p2 = Promise.reject('my error').catch(()=>{
    // rejected
    throw new Error('then error')
  })
  p2.then(data => {
    console.log('data', data) // ä¸æ‰§è¡Œ
  }).catch(err => {
    // resolved
    console.log('err', err) // æ‰§è¡Œ
  })
  ```

çŠ¶æ€å˜åŒ–ä¼šè§¦å‘ then catch

- pending ä¸ä¼šè§¦å‘ä»»ä½• then catch å›è°ƒ
- çŠ¶æ€å˜ä¸º resolved ä¼šè§¦å‘åç»­çš„ then å›è°ƒ
- çŠ¶æ€å˜ä¸º rejected ä¼šè§¦å‘åç»­çš„ catch å›è°ƒ

then catch ä¼šç»§ç»­è¿”å› Promise ï¼Œ**æ­¤æ—¶å¯èƒ½ä¼šå‘ç”ŸçŠ¶æ€å˜åŒ–ï¼ï¼ï¼**

```js
// then() ä¸€èˆ¬æ­£å¸¸è¿”å› resolved çŠ¶æ€çš„ promise
Promise.resolve().then(() => {
    return 100
})

// then() é‡ŒæŠ›å‡ºé”™è¯¯ï¼Œä¼šè¿”å› rejected çŠ¶æ€çš„ promise
Promise.resolve().then(() => {
    throw new Error('err')
})

// catch() ä¸æŠ›å‡ºé”™è¯¯ï¼Œä¼šè¿”å› resolved çŠ¶æ€çš„ promise
Promise.reject().catch(() => {
    console.error('catch some error')
})

// catch() æŠ›å‡ºé”™è¯¯ï¼Œä¼šè¿”å› rejected çŠ¶æ€çš„ promise
Promise.reject().catch(() => {
    console.error('catch some error')
    throw new Error('err')
})
```







##### async/awaitâ˜…â˜…â˜…

å¼‚æ­¥å›è°ƒ callback hell

Promise then catch é“¾å¼è°ƒç”¨ï¼Œä½†ä¹Ÿæ˜¯åŸºäºå›è°ƒå‡½æ•°

async/awaitæ˜¯åŒæ­¥è¯­æ³•ï¼Œå½»åº•æ¶ˆç­å›è°ƒå‡½æ•°



###### è¯­æ³•ä»‹ç»

ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œç¼–å†™å¼‚æ­¥ã€‚

```js
function loadImg(src) {
    const promise = new Promise((resolve, reject) => {
        const img = document.createElement('img')
        img.onload = () => {
            resolve(img)
        }
        img.onerror = () => {
            reject(new Error(`å›¾ç‰‡åŠ è½½å¤±è´¥ ${src}`))
        }
        img.src = src
    })
    return promise
}

async function loadImg1() {
    const src1 = 'http://www.imooc.com/static/img/index/logo_new.png'
    const img1 = await loadImg(src1)
    return img1
}

async function loadImg2() {
    const src2 = 'https://avatars3.githubusercontent.com/u/9583120'
    const img2 = await loadImg(src2)
    return img2
}

(async function () {
    // æ³¨æ„ï¼šawait å¿…é¡»æ”¾åœ¨ async å‡½æ•°ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™
    try {
        // åŠ è½½ç¬¬ä¸€å¼ å›¾ç‰‡
        const img1 = await loadImg1()
        console.log(img1)
        // åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡
        const img2 = await loadImg2()
        console.log(img2)
    } catch (ex) {
        console.error(ex)
    }
})()
```



###### å’Œ Promise çš„å…³ç³»â˜…â˜…â˜…

- async å‡½æ•°è¿”å›ç»“æœéƒ½æ˜¯ Promise å¯¹è±¡ï¼ˆå¦‚æœå‡½æ•°å†…æ²¡è¿”å› Promise ï¼Œåˆ™è‡ªåŠ¨å°è£…ä¸€ä¸‹ï¼‰

  ```js
  async function fn1(){
      return 100
  }
  const res1 = fn1()
  console.log('res1', res1) // PromiseÂ {<fulfilled>: 100}
  res1.then(data => console.log(data)) 	
  ```

  

- awaitç›¸å½“äºPromiseçš„then

  - await åé¢è·Ÿ Promise å¯¹è±¡ï¼šä¼šé˜»æ–­åç»­ä»£ç ï¼Œç­‰å¾…çŠ¶æ€å˜ä¸º resolved ï¼Œæ‰è·å–ç»“æœå¹¶ç»§ç»­æ‰§è¡Œ

    ```js
    !(async function(){
      const p1 = Promise.resolve(300)
      const data = await p1
      console.log('data', data)
    })()
    ```

  - await åç»­è·Ÿé Promise å¯¹è±¡ï¼šä¼šç›´æ¥è¿”å›ï¼ˆå¦‚æœå‡½æ•°å†…æ²¡è¿”å› Promise ï¼Œåˆ™è‡ªåŠ¨å°è£…ä¸€ä¸‹ï¼‰

    ```js
    !(async function(){
      const p1 = 300
      const data = await p1
      console.log('data', data)
    })()
    ```

    

- try...catchå¯æ•è·å¼‚å¸¸ï¼Œä»£æ›¿äº†Promiseçš„catch

  ```js
  (async function () {
      const p4 = Promise.reject('some err')
      try {
          const res = await p4
          console.log(res)
      } catch (ex) {
          console.error(ex)
      }
  })()
  ```

æ€»ç»“æ¥çœ‹ï¼š

- async å°è£… Promise, è¿”å›Promise

- await å¤„ç† Promise æˆåŠŸ

- try...catch å¤„ç† Promise å¤±è´¥

  

###### å¼‚æ­¥deæœ¬è´¨

â€‹	async/awaitè¯­æ³•ç³–

â€‹	sayncä¸æ˜¯å¼‚æ­¥

â€‹    await æ˜¯åŒæ­¥å†™æ³•ï¼Œä½†æœ¬è´¨è¿˜æ˜¯å¼‚æ­¥è°ƒç”¨ã€‚

```js
async function async1 () {
  console.log('async1 start')
  // å…ˆå»æ‰§è¡Œasync2()ï¼Œå†å»æ‰§è¡Œawaitæ“ä½œ
  await async2()
  console.log('async1 end') // â˜…â˜…â˜…â˜…å…³é”®åœ¨è¿™ä¸€æ­¥ï¼Œå®ƒç›¸å½“äºæ”¾åœ¨ callback ä¸­ï¼Œæœ€åæ‰§è¡Œ
}

async function async2 () {
  console.log('async2')
}

console.log('script start')
async1()
console.log('script end')
// script start => async1 start => async2 => async1 end => async1 end => script end âœ–
// script start => async1 start => async2 => async1 end => script end => async1 end âœ”
```

â˜…â˜…â˜…â˜…å³ï¼Œåªè¦é‡åˆ°äº† **`await`** ï¼Œåé¢çš„ä»£ç éƒ½ç›¸å½“äºæ”¾åœ¨ `callback Queue`   é‡Œï¼Œå¼‚æ­¥å›è°ƒã€‚





###### for...of

for... in(froEach for) æ˜¯å¸¸è§„çš„åŒæ­¥éå†

å¸¸ç”¨äºå¼‚æ­¥çš„éå†

```js
// å®šæ—¶ç®—ä¹˜æ³•
function multi(num) {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve(num * num)
        }, 1000)
    })
}

// // ä½¿ç”¨ forEach ï¼Œæ˜¯ 1s ä¹‹åæ‰“å°å‡ºæ‰€æœ‰ç»“æœï¼Œå³ 3 ä¸ªå€¼æ˜¯ä¸€èµ·è¢«è®¡ç®—å‡ºæ¥çš„
// function test1 () {
//     const nums = [1, 2, 3];
//     nums.forEach(async x => {
//         const res = await multi(x);
//         console.log(res);
//     })
// }
// test1();

// ä½¿ç”¨ for...of ï¼Œå¯ä»¥è®©è®¡ç®—æŒ¨ä¸ªä¸²è¡Œæ‰§è¡Œ
async function test2 () {
    const nums = [1, 2, 3];
    for (let x of nums) {
        // åœ¨ for...of å¾ªç¯ä½“çš„å†…éƒ¨ï¼Œé‡åˆ° await ä¼šæŒ¨ä¸ªä¸²è¡Œè®¡ç®—
        const res = await multi(x)
        console.log(res)
    }
}
test2()
```







##### å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡

macroTaskå’ŒmicroTask

###### what isï¼Ÿ

- å¾®ä»»åŠ¡ï¼šPromise  async/awaitï¼ˆå¯¹äºå‰ç«¯æ¥è¯´ï¼‰
- å®ä»»åŠ¡ï¼šsetTimeout setInterval Ajax DOM äº‹ä»¶
- **å¾®ä»»åŠ¡æ¯”å®ä»»åŠ¡æ‰§è¡Œçš„æ›´æ—©**

```js
console.log(100)
setTimeout(() => {
    console.log(200)
})
Promise.resolve().then(() => {
    console.log(300)
})
console.log(400)
// 100 400 300 200
```



###### event loop å’ŒDOMæ¸²æŸ“

- å†æ¬¡å›é¡¾ event loop çš„è¿‡ç¨‹

  ![](D:\front-end\study\MarkDown\0åŸºç¡€\Event Loop\DOMæ¸²æŸ“.png)

- JSæ˜¯å•çº¿ç¨‹ï¼Œå’ŒDOMæ¸²æŸ“å…±ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸€æ¬¡ call stack ä»»åŠ¡ç»“æŸæ¸…ç©ºï¼Œéƒ½ä¼šå°è¯•è§¦å‘ DOM æ¸²æŸ“ï¼ˆä¸ä¸€å®šéå¾—æ¸²æŸ“ï¼Œå°±æ˜¯ç»™ä¸€æ¬¡ DOM æ¸²æŸ“çš„æœºä¼šï¼ï¼ï¼ï¼‰

- ç„¶åå†è¿›è¡Œ event loop

  ```js
  const $p1 = $('<p>ä¸€æ®µæ–‡å­—</p>')
  const $p2 = $('<p>ä¸€æ®µæ–‡å­—</p>')
  const $p3 = $('<p>ä¸€æ®µæ–‡å­—</p>')
  $('#container')
              .append($p1)
              .append($p2)
              .append($p3)
  
  console.log('length',  $('#container').children().length )
  
  alert('æœ¬æ¬¡ call stack ç»“æŸï¼ŒDOM ç»“æ„å·²æ›´æ–°ï¼Œä½†å°šæœªè§¦å‘æ¸²æŸ“')
  // ï¼ˆalert ä¼šé˜»æ–­ js æ‰§è¡Œï¼Œä¹Ÿä¼šé˜»æ–­ DOM æ¸²æŸ“ï¼Œä¾¿äºæŸ¥çœ‹æ•ˆæœï¼‰
  // åˆ°æ­¤ï¼Œå³æœ¬æ¬¡ call stack ç»“æŸåï¼ˆåŒæ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œäº†ï¼‰ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è§¦å‘æ¸²æŸ“ï¼Œä¸ç”¨ä»£ç å¹²é¢„
  
  // å¦å¤–ï¼ŒæŒ‰ç…§ event loop è§¦å‘ DOM æ¸²æŸ“æ—¶æœºï¼ŒsetTimeout æ—¶ alert ï¼Œå°±èƒ½çœ‹åˆ° DOM æ¸²æŸ“åçš„ç»“æœäº†
  setTimeout(function () {
      alert('setTimeout æ˜¯åœ¨ä¸‹ä¸€æ¬¡ Call Stack ï¼Œå°±èƒ½çœ‹åˆ° DOM æ¸²æŸ“å‡ºæ¥çš„ç»“æœäº†')
  })
  ```

  

###### åŒºåˆ«

- å®ä»»åŠ¡ï¼šDOM æ¸²æŸ“åå†è§¦å‘ï¼Œå¦‚setTimeout
- å¾®ä»»åŠ¡ï¼šDOM æ¸²æŸ“å‰ä¼šè§¦å‘ï¼Œå¦‚Promise

```js
// ä¿®æ”¹ DOM
const $p1 = $('<p>ä¸€æ®µæ–‡å­—</p>')
const $p2 = $('<p>ä¸€æ®µæ–‡å­—</p>')
const $p3 = $('<p>ä¸€æ®µæ–‡å­—</p>')
$('#container')
    .append($p1)
    .append($p2)
    .append($p3)

// å¾®ä»»åŠ¡ï¼šæ¸²æŸ“ä¹‹å‰æ‰§è¡Œï¼ˆDOM ç»“æ„å·²æ›´æ–°ï¼‰
Promise.resolve().then(() => {
    const length = $('#container').children().length
    alert(`micro task ${length}`)
})

// å®ä»»åŠ¡ï¼šæ¸²æŸ“ä¹‹åæ‰§è¡Œï¼ˆDOM ç»“æ„å·²æ›´æ–°ï¼‰
setTimeout(() => {
    const length = $('#container').children().length
    alert(`macro task ${length}`)
})
```

ä»event loopè§£é‡Šï¼Œä¸ºä»€ä¹ˆå¾®ä»»åŠ¡æ‰§è¡Œæ›´æ—©

å†æ·±å…¥æ€è€ƒä¸€ä¸‹ï¼šä¸ºä½•ä¸¤è€…ä¼šæœ‰ä»¥ä¸ŠåŒºåˆ«ï¼Œä¸€ä¸ªåœ¨æ¸²æŸ“å‰ï¼Œä¸€ä¸ªåœ¨æ¸²æŸ“åï¼Ÿ

- å¾®ä»»åŠ¡ï¼šES è¯­æ³•æ ‡å‡†è§„å®šä¹‹å†…ï¼ŒJS å¼•æ“æ¥ç»Ÿä¸€å¤„ç†ã€‚å³ï¼Œä¸ç”¨æµè§ˆå™¨æœ‰ä»»ä½•å…³äºï¼Œå³å¯ä¸€æ¬¡æ€§å¤„ç†å®Œï¼Œæ›´å¿«æ›´åŠæ—¶ã€‚
- å®ä»»åŠ¡ï¼šES è¯­æ³•æ²¡æœ‰,æµè§ˆå™¨è¯­æ³•è§„å®šçš„ï¼ŒJS å¼•æ“ä¸å¤„ç†ï¼Œæµè§ˆå™¨ï¼ˆæˆ– nodejsï¼‰å¹²é¢„å¤„ç†ã€‚

![](D:\front-end\study\MarkDown\0åŸºç¡€\Event Loop\why.png)



![](D:\front-end\study\MarkDown\0åŸºç¡€\Event Loop\why2.png)



###### æ€»ç»“

å®ä»»åŠ¡æœ‰å“ªäº›ï¼Ÿå¾®ä»»åŠ¡æœ‰å“ªäº›ï¼Ÿå¾®ä»»åŠ¡è§¦å‘æ—¶æœºæ›´æ—© 

å¾®ä»»åŠ¡ã€å®ä»»åŠ¡å’ŒDOMæ¸²æŸ“çš„å…³ç³»

å¾®ä»»åŠ¡ã€å®ä»»åŠ¡å’ŒDOMæ¸²æŸ“åœ¨ event loopçš„è¿‡ç¨‹





 

### 2.5ã€JS Web API

JSåŸºç¡€çŸ¥è¯†ï¼Œè§„å®šè¯­æ³• (ECMA262æ ‡å‡†)

JS Web APIï¼Œç½‘é¡µæ“ä½œçš„API (W3Cæ ‡å‡†)

å‰è€…æ˜¯åè€…çš„åŸºç¡€ï¼Œä¸¤è€…ç»“åˆæ‰èƒ½çœŸæ­£å®é™…åº”ç”¨



#### DOM

- Document Object Model

- vueå’ŒReactæ¡†æ¶åº”ç”¨å¹¿æ³›ï¼Œå°è£…äº†DOMæ“ä½œ

- ä½†DOMæ“ä½œä¸€ç›´éƒ½ä¼šå‰ç«¯å·¥ç¨‹å¸ˆçš„åŸºç¡€ã€å¿…å¤‡çŸ¥è¯†

- åªä¼švueè€Œä¸æ‡‚DOMæ“ä½œçš„å‰ç«¯ç¨‹åºå‘˜ï¼Œä¸ä¼šé•¿ä¹…

##### é¢è¯•é¢˜

- DOMæ˜¯å“ªç§æ•°æ®ç»“æ„ï¼Ÿ

- DOMæ“ä½œçš„å¸¸ç”¨APIï¼Ÿ

- attributeå’Œpropertyçš„åŒºåˆ«ï¼Ÿ

- ä¸€æ¬¡æ€§æ’å…¥å¤šä¸ªDOMèŠ‚ç‚¹ï¼Œè€ƒè™‘æ€§èƒ½ï¼Ÿ



##### çŸ¥è¯†ç‚¹

###### DOMçš„æœ¬è´¨

- JSæ“ä½œHTMLå’ŒCSSçš„æ¡¥æ¢ï¼ˆèŠ‚ç‚¹æ€ç»´ï¼‰, ç‰¹ç‚¹ï¼šå°†æ–‡æ¡£è¡¨ç¤ºä¸ºèŠ‚ç‚¹æ ‘ã€‚

- nodeTypeå¸¸ç”¨å±æ€§å€¼

  - **1**ï¼šå…ƒç´ èŠ‚ç‚¹<p>å’Œ<div>
  - **3**ï¼šæ–‡å­—èŠ‚ç‚¹
  - **8**ï¼šæ³¨é‡ŠèŠ‚ç‚¹
  - **9**ï¼šdocumentèŠ‚ç‚¹
  - **10**ï¼šDTDï¼ˆæ–‡æ¡£ç±»å‹å£°æ˜ï¼‰èŠ‚ç‚¹

  ![](D:\front-end\study\MarkDown\0åŸºç¡€\img\DOMèŠ‚ç‚¹æ ‘.png)



###### DOMèŠ‚ç‚¹æ“ä½œ

- è·å–DOMèŠ‚ç‚¹

  ```html
  <style>
    .container {
        border: 1px solid #ccc;
     }
     .red {
        color: red;
     }
  </style>
  <div id="div1" class="container">
     <p id="p1">ä¸€æ®µæ–‡å­— 1</p>
     <p>ä¸€æ®µæ–‡å­— 2</p>
     <p>ä¸€æ®µæ–‡å­— 3</p>
  </div>
  <div id="div2">
    <img src="https://img3.mukewang.com/5a9fc8070001a82402060220-100-100.jpg"/>
  </div>
  <ul id="list">
  </ul>
  ```

  ```js
  const div1 = document.getElementById('div1')
  console.log('div1', div1)
  
  const divList = document.getElementsByTagName('div') // é›†åˆ
  console.log('divList.length', divList.length)
  console.log('divList[1]', divList[1])
  
  const containerList = document.getElementsByClassName('container') // é›†åˆ
  console.log('containerList.length', containerList.length)
  console.log('containerList[1]', containerList[1])
  
  const pList = document.querySelectorAll('p')
  console.log('pList', pList)
  ```

  

- attribute

  ä½œç”¨åˆ°DOMç»“æ„èŠ‚ç‚¹å±æ€§ï¼Œä¿®æ”¹HTMLå±æ€§ï¼Œä¼šæ”¹å˜HTMLç»“æ„ï¼Œå°½é‡å°‘ç”¨ï¼Œå¾ˆå¤§å¯èƒ½ä¼šå¼•èµ·é‡æ–°æ¸²æŸ“

  ```js
  const pLists = document.querySelectorAll('p')
  const p1 = pLists[0]
  // attribute
  p1.setAttribute('data-name', 'imooc')
  console.log( p1.getAttribute('data-name') )
  p1.setAttribute('style', 'font-size: 50px;')
  console.log( p1.getAttribute('style') )
  ```

- property

  ä½œç”¨åˆ°JSå˜é‡å±æ€§ï¼Œä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œä¸ä¼šä½“ç°åˆ°HTMLç»“æ„ä¸­ï¼Œå¯ä»¥ç”¨ï¼Œå¾ˆå¯èƒ½ä¼šå¼•èµ·é‡æ–°æ¸²æŸ“ï¼ŒJSæœºåˆ¶ä¼šé¿å…DOMæ¸²æŸ“

  ```js
  const pLists = document.querySelectorAll('p')
  const p1 = pLists[0]
  // property å½¢å¼
  p1.style.width = '100px'
  console.log( p1.style.width )
  p1.className = 'red'
  console.log( p1.className )
  console.log(p1.nodeName)
  console.log(p1.nodeType) // 1
  ```

  

###### DOMç»“æ„æ“ä½œ

![](D:\front-end\study\MarkDown\0åŸºç¡€\img\èŠ‚ç‚¹çš„å…³ç³».png)

|  è€ƒè™‘æ‰€æœ‰èŠ‚ç‚¹   |      å…³ç³»      |     åªè€ƒè™‘å…ƒç´ èŠ‚ç‚¹     |
| :-------------: | :------------: | :--------------------: |
|   childNodes    |     å­èŠ‚ç‚¹     |        children        |
|   parentNode    |     çˆ¶èŠ‚ç‚¹     |       parentNode       |
|   fristChild    |  ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹  |   firstElementChild    |
|    lastChild    | æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ |    lastElementChild    |
| previousSibling | å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ | perviousElementSibling |
|   nextSibling   | åä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ |   nextElementSibling   |

**æ³¨æ„**ï¼šåœ¨DOMä¸­ï¼Œæ–‡æœ¬èŠ‚ç‚¹ä¹Ÿå±äºèŠ‚ç‚¹ã€‚åœ¨æ ‡å‡†çš„W3Cçš„è§„èŒƒä¸­ï¼Œç©ºç™½æ–‡æœ¬èŠ‚ç‚¹ä¹Ÿåº”è¯¥ç®—ä½œèŠ‚ç‚¹ï¼Œ

- æ–°å¢æ’å…¥èŠ‚ç‚¹ï¼Œç§»åŠ¨èŠ‚ç‚¹

  ```js
  const div1 = document.getElementById('div1')
  const div2 = document.getElementById('div2')
  // æ–°å»ºèŠ‚ç‚¹
  const newP = document.createElement('p')
  newP.innerHTML = 'this is newP'
  // æ’å…¥èŠ‚ç‚¹
  div1.appendChild(newP)
  // ç§»åŠ¨èŠ‚ç‚¹
  const p1 = document.getElementById('p1')
  div2.appendChild(p1)
  ```

  

- è·å–å­å…ƒç´ åˆ—è¡¨ï¼Œè·å–çˆ¶å…ƒç´ 

  ```js
  // è·å–çˆ¶å…ƒç´ 
  console.log( p1.parentNode )
  
  // è·å–å­å…ƒç´ åˆ—è¡¨
  const div1ChildNodes = div1.childNodes
  console.log( div1.childNodes )
  // è¿‡æ»¤æ–‡æœ¬èŠ‚ç‚¹
  const div1ChildNodesP = Array.prototype.slice.call(div1.childNodes).filter(child => {
      if (child.nodeType === 1) {
          return true
      }
      return false
  })
  console.log('div1ChildNodesP', div1ChildNodesP)
  ```

  

- åˆ é™¤å­å…ƒç´ ï¼ˆåªèƒ½å…¶çˆ¶å…ƒç´ æ“ä½œï¼‰

  ```js
  div1.removeChild( div1ChildNodesP[0] )
  ```

  

###### DOMæ€§èƒ½â˜…

- æ¸²æŸ“ä¼˜åŒ–

  - å‡å°‘ DOM å…ƒç´ æ•°é‡å’ŒåµŒå¥—å±‚çº§

  - å°½é‡é¿å…ä½¿ç”¨ table å¸ƒå±€ï¼Œç”¨å…¶ä»–æ ‡ç­¾ä»£æ›¿

  - table æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“è§£æçš„ï¼Œè¦ç­‰æ•´ä¸ªè¡¨æ ¼éƒ½è§£æå®Œæˆæ‰æ˜¾ç¤º

    

- é€‰æ‹©å™¨ä¼˜åŒ–

  - ä¼˜å…ˆä½¿ç”¨ id æ¥è·å–å•ä¸ªå…ƒç´ 

  - è·å–å¤šä¸ªå…ƒç´ æ—¶ï¼Œå°½é‡ç›´æ¥é€šè¿‡å…ƒç´ æœ¬èº«çš„ className è·å–

    ```js
    console.log(document.querySelectorAll('ul.list li.item')); // ä¸æ¨è
    console.log(document.getElementsByClassName('item')); // æ¨è
    console.log(document.querySelectorAll('.item')); // æ¨è
    ```



- å¯¹DOMæŸ¥è¯¢åšç¼“å­˜

- æ€»æ˜¯å°†é€‰æ‹©å™¨çš„é€‰æ‹©ç»“æœç¼“å­˜èµ·æ¥

  ```js
  // ä¸ç¼“å­˜DOMæŸ¥è¯¢ç»“æœ
  for(let = 0; i < document.getElementsByTagName('p').length; i++){
    // æ¯æ¬¡å¾ªç¯ï¼Œéƒ½ä¼šè®¡ç®—lengthï¼Œé¢‘ç¹è¿›è¡ŒDOMæŸ¥è¯¢
  }
  // ç¼“å­˜DOMæŸ¥è¯¢ç»“æœ
  const $list document.getElementsByTagName('p')
  const length = $list.length
  for(let i = 0; i < length; i++){
      // ç¼“å­˜lengthï¼Œåªè¿›è¡Œä¸€æ¬¡DOMæŸ¥è¯¢
  }
  ```

  

- é¿å…åœ¨å¾ªç¯ä¸­å¤šæ¬¡ä½¿ç”¨ innerHTMLï¼Œåœ¨å¾ªç¯ç»“æŸåä½¿ç”¨ä¸€æ¬¡

  ```js
  // å¤šæ¬¡ä½¿ç”¨innerHTMLï¼ˆä¸æ¨èï¼‰
  const todoDatas = ['æ´—è¡£æœ', 'åšé¥­', 'å†™ä»£ç '];
  for (const item of todoDatas) {
    $list.innerHTML += `<li class="item">${item}</li>`;
  }
  // ä¸€æ¬¡æ€§ä½¿ç”¨innerHTML ï¼ˆæ¨èï¼‰
  // é¿å…åœ¨å¾ªç¯ä¸­å¤šæ¬¡ä½¿ç”¨ innerHTMLï¼Œåœ¨å¾ªç¯ç»“æŸåä½¿ç”¨ä¸€æ¬¡
  let html = '';
  for (const item of todoDatas) {
    html += `<li class="item">${item}</li>`;
  }
  $list.innerHTML = html;
  ```

  

- å°†é¢‘ç¹æ“ä½œæ”¹ä¸ºä¸€æ¬¡æ€§æ“ä½œï¼Œä½¿ç”¨ DocumentFragment ä¼˜åŒ–å¤šæ¬¡çš„ appendChildæ–°åˆ›å»ºçš„å…ƒç´ ï¼Œå®Œæˆå¿…è¦æ“ä½œåå†æ·»åŠ åˆ°é¡µé¢ä¸­

  ```js
  // åˆ›å»ºå…ƒç´ æ–¹å¼ï¼ˆä¸æ¨èï¼‰
  const todoDatas = ['æ´—è¡£æœ', 'åšé¥­', 'å†™ä»£ç '];
  for (const item of todoDatas) {
    const $li = document.createElement('li');
    // æ–°åˆ›å»ºçš„å…ƒç´ ï¼Œå®Œæˆå¿…è¦æ“ä½œåå†æ·»åŠ åˆ°é¡µé¢ä¸­
    $li.className = 'item';
    $li.innerHTML = item;
    $list.appendChild($li);
  }
  // ä½¿ç”¨ DocumentFragment ä¼˜åŒ–å¤šæ¬¡çš„ appendChildï¼ˆæ¨èï¼‰
  const $liFragment = document.createDocumentFragment();
  for (const item of todoDatas) {
    const $li = document.createElement('li');
    $li.className = 'item';
    $li.innerHTML = item;
    $liFragment.appendChild($li);
  }
  $list.appendChild($liFragment);
  ```

  

- ä¸è¦ç›´æ¥é€šè¿‡ JS ä¿®æ”¹å…ƒç´ çš„ styleï¼Œé€šè¿‡æ·»åŠ ç§»é™¤ class ä¿®æ”¹å…ƒç´ æ ·å¼

  ```js
  const $box = document.getElementById('box');
  // let active = false;
  $box.addEventListener('click',() => {
      // if (!active) {
      //   active = true;
      //   // $box.style.width = '100px';
      //   // $box.style.height = '100px';
      //   // $box.style.backgroundColor = 'yellow';
      //   $box.classList.add('active');
      // } else {
      //   active = false;
      //   // $box.style.width = '200px';
      //   // $box.style.height = '200px';
      //   // $box.style.backgroundColor = 'red';
      //   $box.classList.remove('active');
      // }
      //ç®€åŒ–ç”¨toggleå°±è¡Œï¼Œä¸ç”¨åˆ¤æ–­
      $box.classList.toggle('active');
    },
    false
  );
  ```

  

- æ³¨æ„å¼ºåˆ¶å›æµ

- å½“è·å–çš„å±æ€§å€¼åŒ…æ‹¬ä½†ä¸é™äº offsetTopã€offsetLeftã€scrollTopã€clientTop è¿™äº›â€œå…¨å±€å±æ€§â€æ—¶ï¼Œéœ€è¦æ­¤æ—¶é¡µé¢ä¸Šçš„å…¶ä»–å…ƒç´ çš„å¸ƒå±€å’Œæ ·å¼å¤„äºæœ€æ–°çŠ¶æ€ï¼Œè¿™ä¼šå¼•èµ·å¤šæ¬¡çš„å›æµå’Œé‡ç»˜ã€‚è¿™æ ·çš„æ“ä½œç§°ä¸ºå¼ºåˆ¶å›æµ

  ```js
  const $backtop = document.getElementById('backtop');
  // æ³¨æ„å¼ºåˆ¶å›æµ
  let winHeight = window.innerHeight;
  // å½“æµè§ˆå™¨çš„çª—å£å¤§å°å˜åŒ–çš„æ—¶å€™ï¼Œå°†æµè§ˆå™¨çª—å£çš„é«˜åº¦èµ‹å€¼ä½¿ç”¨å‡å°‘å›æµ
  window.addEventListener(
    'resize',
    () => {
      winHeight = window.innerHeight;
    },
    false
  );
  window.addEventListener('scroll', scrollHandler, false);
  function scrollHandler() {
    // console.log('scroll');
    if (document.documentElement.scrollTop >= winHeight) {
      $backtop.classList.remove('none');
    } else {
      $backtop.classList.add('none');
    }
  
  ```



#### BOM

- Document Object Model

##### é¢è¯•é¢˜

å¦‚ä½•è¯†åˆ«æµè§ˆå™¨çš„ç±»å‹ï¼Ÿ

åˆ†ææ‹†è§£urlå„ä¸ªéƒ¨åˆ†

##### çŸ¥è¯†ç‚¹

###### navigator

```js
// æ˜¯å¦æ˜¯è°·æ­Œæµè§ˆå™¨
const ua = navigator.userAgent
const isChorme = ua.indexOf('Chrome')
console.log(isChorme)
```

###### screen

```js
console.log(screen.width)
console.log(screen.htight)
```

###### location

```js
// æ‹†è§£urlå„éƒ¨åˆ†
console.log(location.href)
// åè®®
console.log(location.protocol)
// 
console.log(location.host)
//
console.log(location.hash)
//
console.log(location.search)
// 
console.log(location.pathname)
```



###### history

```js
history.back()
history.go(-1)
history.forward()
```



#### äº‹ä»¶ç»‘å®š

##### é¢è¯•é¢˜

- æ‰‹å†™ç¼–å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ç›‘å¬å‡½æ•°
- æè¿°äº‹ä»¶å†’æ³¡çš„æµç¨‹â˜…
- æ— é™ä¸‹æ‹‰çš„å›¾ç‰‡åˆ—è¡¨ï¼Œå¦‚ä½•ç›‘å¬æ¯ä¸ªå›¾ç‰‡çš„ç‚¹å‡»ï¼Ÿ

##### çŸ¥è¯†ç‚¹

###### äº‹ä»¶ç»‘å®š

```js
const btn = document.getElementById('btn')
btn.addEventListener('click', event => {
    console.log(event.target) // è·å–è§¦å‘çš„å…ƒç´ 
    event.preventDeafult() // é˜»æ­¢é»˜è®¤è¡Œä¸º
  console.log('clicked')
})
```



###### äº‹ä»¶å†’æ³¡

```html
<div id="div1">
  <p id="p1">æ¿€æ´»</p>
  <p id="p2">å–æ¶ˆ</p>
  <p id="p3">å–æ¶ˆ</p>
  <p id="p4">å–æ¶ˆ</p>
</div>
<div id="div2">
  <p id="p5">å–æ¶ˆ</p>
  <p id="p6">å–æ¶ˆ</p>
</div>
```

```js
const p1 = document.getElementById('p1')
bindEvent(p1, 'click', event => {
    event.stopPropagation() // é˜»æ­¢å†’æ³¡
    console.log('æ¿€æ´»')
})
const body = document.body
bindEvent(body, 'click', event => {
    console.log('å–æ¶ˆ')
    // console.log(event.target)
})
const div2 = document.getElementById('div2')
bindEvent(div2, 'click', event => {
    console.log('div2 clicked')
    console.log(event.target)
})
```



###### äº‹ä»¶ä»£ç†ï¼ˆé¢è¯•å¿…è€ƒï¼‰

- ä»£ç ç®€æ´

- å‡å°‘æµè§ˆå™¨å†…å­˜å ç”¨

```html
<div id="div3">
  <a href="#">a1</a><br>
  <a href="#">a2</a><br>
  <a href="#">a3</a><br>
  <a href="#">a4</a><br>
  <button id="btn1">åŠ è½½æ›´å¤š...</button>
</div>
```

```js
function bindEvent(elem, type, selector, fn) {
    // å¦‚æœæ²¡æœ‰ä¼ é€’ç¬¬å››ä¸ªå‚æ•°ï¼Œå³ä¸ºæ™®é€šç»‘å®š
    if (fn == null) {
        fn = selector
        selector = null
    }
    elem.addEventListener(type, event => {
        // è·å–äº‹ä»¶å…ƒç´ 
        const target = event.target
        if (selector) {
            // ä»£ç†ç»‘å®š
            // ä½¿ç”¨matchesæ¥åˆ¤æ–­æ˜¯å¦æ˜¯è§¦å‘å…ƒç´ ï¼ˆæ˜¯å¦ç¬¦åˆCSSé€‰æ‹©å™¨ï¼‰
            // å¦‚æœå…ƒç´ è¢«æŒ‡å®šçš„é€‰æ‹©å™¨å­—ç¬¦ä¸²é€‰æ‹©ï¼ŒElement.matches()  æ–¹æ³•è¿”å›true; å¦åˆ™è¿”å›falseã€‚
            if (target.matches(selector)) {
                fn.call(target, event)
            }
        } else {
            // æ™®é€šç»‘å®š
            fn.call(target, event)
        }
    })
}
// æ™®é€šç»‘å®š
const btn1 = document.getElementById('btn1')
bindEvent(btn1, 'click', function (event) {
    // console.log(event.target) // è·å–è§¦å‘çš„å…ƒç´ 
    event.preventDefault() // é˜»æ­¢é»˜è®¤è¡Œä¸º
    alert(this.innerHTML)
})

// ä»£ç†ç»‘å®š
const div3 = document.getElementById('div3')
bindEvent(div3, 'click', 'a', function (event) {
    event.preventDefault()
    alert(this.innerHTML)
})
```



#### Ajax

##### é¢è¯•é¢˜

æ‰‹å†™ä¸€ä¸ªç®€æ˜“çš„ajax

```js
function ajax(url){
  const p = new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest()
    xhr.open('GET', url, true)
    xhr.onreadystatechange = function(){
      if(xhr.readyState === 4){
         if(xhr.status === 200){
           resolve(JSON.parse(xhr.responseText))
         } else if(xhr.status === 404){
         	reject(new Error('404 not found'))
         }
      }
    }
    xhr.send(null)
  })
  return p
}
```

è·¨åŸŸçš„å¸¸ç”¨å®ç°æ–¹å¼

JSONPçš„åŸç†

CORSæœåŠ¡ç«¯



##### çŸ¥è¯†ç‚¹

###### XMLHttpRequest

```js
// getè¯·æ±‚
const xhr = new XMLHttpRequest
xhr.open("GET","/api",true)
xhr.onreadystatechange = function(){
  // è¿™é‡Œçš„å‡½æ•°å¼‚æ­¥æ‰§è¡Œï¼Œå¯å‚è€ƒä¹‹å‰JSåŸºç¡€ä¸­çš„å¼‚æ­¥æ¨¡æ¿
  if(xhr.readyState === 4){
    if(xhr.status === 200){
      console.log(JSON.parse(xhr.responseText))
    }
  }
}
xhr.send(null)

// postè¯·æ±‚
xhr.open('POST', '/api', true)
const data ={
    username: 'xx',
    password: '12312312'
}
xhr.send(JSON.stringify(data))
```



###### çŠ¶æ€ç 

**readystatechange äº‹ä»¶ç›‘å¬ readyState è¿™ä¸ªçŠ¶æ€çš„å˜åŒ–**

å®ƒçš„å€¼ä» 0 ~ 4ï¼Œä¸€å…± 5 ä¸ªçŠ¶æ€

0ï¼šæœªåˆå§‹åŒ–ã€‚å°šæœªè°ƒç”¨ open()
1ï¼šå¯åŠ¨ã€‚å·²ç»è°ƒç”¨ open()ï¼Œä½†å°šæœªè°ƒç”¨ send()
2ï¼šå‘é€ã€‚å·²ç»è°ƒç”¨ send()ï¼Œä½†å°šæœªæ¥æ”¶åˆ°å“åº”
3ï¼šæ¥æ”¶ã€‚å·²ç»æ¥æ”¶åˆ°éƒ¨åˆ†å“åº”æ•°æ®
4ï¼šå®Œæˆã€‚å·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®ï¼Œè€Œä¸”å·²ç»å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨äº†

**HTTP çŠ¶æ€ç çš„è¯­ä¹‰**

100~199 æ¶ˆæ¯	ä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†

200~299 æˆåŠŸ

300~399 é‡å®šå‘

â€‹		http://www.jd.com/

â€‹		https://www.jd.com/

â€‹		301 Moved Permanently   æ°¸ä¹…é‡å®šå‘

â€‹		302 Move Temporarily   ä¸´æ—¶é‡å®šå‘

â€‹		304 Not Modified   èµ„æºæœªæ”¹å˜

400~499 è¯·æ±‚é”™è¯¯

â€‹		404 Not Found

500~599 æœåŠ¡å™¨é”™è¯¯

â€‹		500 Internal Server Error 



###### è·¨åŸŸï¼šåŒæºç­–ç•¥ï¼Œè·¨åŸŸè§£å†³æ–¹æ¡ˆ

**ä»€ä¹ˆæ˜¯è·¨åŸŸï¼ˆåŒæºç­–ç•¥ï¼‰**

ajaxè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨è¦æ±‚å½“å‰ç½‘é¡µå’Œserverå¿…é¡»åŒæºï¼ˆå®‰å…¨ï¼‰ 

åŒæºï¼šåè®®ã€åŸŸåã€ç«¯å£ã€ä¸‰è€…å¿…é¡»ä¸€è‡´

åŠ è½½å›¾ç‰‡cssï¼Œjså¯æ— è§†åŒæºç­–ç•¥ 

```html
<!-- å¯ä»¥ç”¨äºç»Ÿè®¡æ‰“ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»Ÿè®¡æœåŠ¡ -->
<img src=è·¨åŸŸçš„å›¾ç‰‡åœ°å€/>
<!-- å¯ä»¥ä½¿ç”¨CDN,CDNä¸€èˆ¬éƒ½æ˜¯å¤–åŸŸ -->
<link href=è·¨åŸŸçš„cssåœ°å€/>
<script src=è·¨åŸŸçš„jsåœ°å€>å¯ä»¥å®ç°JSONP<script>
```

æ‰€æœ‰çš„è·¨åŸŸï¼Œéƒ½å¿…é¡»ç»è¿‡serverç«¯å…è®¸å’Œé…åˆ

æœªç»serverç«¯å…è®¸å°±å®ç°è·¨åŸŸï¼Œè¯´æ˜æµè§ˆå™¨æœ‰æ¼æ´ï¼Œå±é™©ä¿¡å·



**JSONP**

- `<script>`å¯ä»¥ç»•è¿‡è·¨åŸŸé™åˆ¶

- æœåŠ¡å™¨å¯ä»¥ä»»æ„åŠ¨æ€æ‹¼æ¥æ•°æ®è¿”å›ï¼Œåªè¦ç¬¦å·htmlæ ¼å¼è¦æ±‚

- æ‰€ä»¥`<script>`å°±å¯ä»¥è·å¾—è·¨åŸŸçš„æ•°æ®ï¼Œ**åªè¦æœåŠ¡ç«¯æ„¿æ„è¿”å›**

- åªèƒ½ä½¿ç”¨getè¯·æ±‚ï¼Œä¸æ¨èä½¿ç”¨

  ```html
  <script>
  window.demo = function(data){
    // è¿™æ˜¯æˆ‘ä»¬è·¨åŸŸå¾—åˆ°çš„ä¿¡æ¯
    console.log(data)
  }
  </script>
  <script src="https://localhost:3000/getData.js?username=xxx&callback=demo"></script>
  <!-- å°†è¿”å›callback({ x: 100, y: 200}) -->  
  ```

  getData.js

  ```js
  callback(
  {
   name: 'abctext' 
  })
  ```

  - jQueryå®ç°jsonp

    ```js
    $.ajax({
      url: 'http://localhost:8882/x-origin.json',
      dataType: 'jsonp',
      jsonpCallback: 'callback',
      success: function(data){
        console.log(data)
      }
    })
    ```

    

###### **CORS(æœåŠ¡ç«¯æ”¯æŒ)**

æœåŠ¡å™¨è®¾ç½®http header

```js
// ç¬¬äºŒä¸ªå‚æ•°å¡«å†™å…è®¸è·¨åŸŸçš„åŸŸåç§°ï¼Œä¸å»ºè®®ç›´æ¥å†™â˜…
response.setHeader("Access-Control-Allow-Origin", "http://localhost:8000");
response.setHeader("Access-Control-Allow-Headers", "X-Requested-With");
response.setHeader("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS");

//æ¥æ”¶è·¨åŸŸçš„cookie
response.setHeader("Access-Control-Allow-Credentials", "true");
```





#### å­˜å‚¨

##### é¢è¯•é¢˜

- æè¿°cookie localStorage sessionStorageåŒºåˆ«

  å®¹é‡

  APIæ˜“ç”¨æ€§

  å­˜å‚¨æ—¶é—´

  æ˜¯å¦è·Ÿéšhttpè¯·æ±‚å‘é€å‡ºå»

##### çŸ¥è¯†ç‚¹

###### cookie

- name:cookieåç§°
- domain:cookieç”Ÿæ•ˆçš„åŸŸå
- path:cookieç”Ÿæ•ˆçš„è·¯å¾„
- expires:cookieè¿‡æœŸæ—¶é—´
- HttpOnly:ç”¨æˆ·ç«¯ä¸å¯æ›´æ”¹

æœ¬èº«ç”¨äºæµè§ˆå™¨çš„serveré€šè®¯

è¢«â€œå€Ÿç”¨â€åˆ°æœ¬åœ°å­˜å‚¨æ¥

å¯ç”¨document.cookie = '...' æ¥ä¿®æ”¹

```js
// ä¸€èˆ¬åç§°ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œä¸è¦ç”¨ä¸­æ–‡ï¼Œå€¼å¯ä»¥ç”¨ä¸­æ–‡ï¼Œä½†æ˜¯è¦ç¼–ç 
document.cookie = `username=${encodeURIComponent('å¼ ä¸‰')}`;
document.cookie = `${encodeURIComponent('ç”¨æˆ·å')}=${encodeURIComponent(
  'å¼ ä¸‰'
)}`;
```

**ç¼ºç‚¹**

å­˜å‚¨å¤§å°ï¼Œæœ€å¤§4KB

httpè¯·æ±‚æ—¶éœ€è¦å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå¢åŠ è¯·æ±‚æ•°æ®é‡

åªèƒ½ç”¨document.cookie= â€˜...â€™æ¥ä¿®æ”¹ï¼Œå¤ªè¿‡ç®€é™‹



###### localStorageå’ŒsessionStorage

- HTML5ä¸“é—¨ä¸ºå­˜å‚¨è€Œè®¾è®¡ï¼Œæœ€å¤§å¯å¯¸5M

- APIç®€å•æ˜“ç”¨setItem, getItem

- ä¸ä¼šéšç€httpè¯·æ±‚è¢«å‘é€å‡ºå»

localStorageæ•°æ®ä¼šæ°¸ä¹…å­˜å‚¨ï¼Œé™¤éä»£ç æˆ–æ‰‹åŠ¨åˆ é™¤

sesiionStorageæ•°æ®åªå­˜åœ¨äºå½“å‰ä¼šè¯ï¼Œæµè§ˆå™¨å…³é—­æ¸…ç©º

ä¸€èˆ¬ç”¨localStorageä¼šæ›´å¤šä¸€äº›







## 3ã€HTTP

### é¢è¯•é¢˜

- httpå¸¸è§çš„çŠ¶æ€ç æœ‰å“ªäº›ï¼Ÿ

- httpå¸¸è§çš„headeræœ‰å“ªäº›ï¼Ÿ

- ä»€ä¹ˆæ˜¯Restful API

- æè¿°ä¸€ä¸‹httpçš„ç¼“å­˜æœºåˆ¶â˜…â˜…â˜…

### çŸ¥è¯†ç‚¹

#### httpçŠ¶æ€ç 

##### çŠ¶æ€ç åˆ†ç±»

100~199 æ¶ˆæ¯	ä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†

200~299 æˆåŠŸ

300~399 é‡å®šå‘

â€‹		http://www.jd.com/

â€‹		https://www.jd.com/

â€‹		301 Moved Permanently   æ°¸ä¹…é‡å®šå‘

â€‹		302 Move Temporarily   ä¸´æ—¶é‡å®šå‘

â€‹		304 Not Modified   èµ„æºæœªæ”¹å˜

400~499 è¯·æ±‚é”™è¯¯

â€‹		404 Not Found

500~599 æœåŠ¡å™¨é”™è¯¯

â€‹		500 Internal Server Error

 

##### å¸¸è§çŠ¶æ€ç 

- 200æˆåŠŸ

- 301æ°¸ä¹…é‡å®šå‘ï¼ˆé…åˆlocationï¼Œæµè§ˆå™¨è‡ªåŠ¨å¤„ç†ï¼‰

- 302ä¸´æ—¶é‡å®šå‘ï¼ˆé…åˆlocationï¼Œæµè§ˆå™¨è‡ªåŠ¨å¤„ç†ï¼‰
  - çŸ­ç½‘å€ï¼ˆä¾‹å¦‚ç™¾åº¦æœç´¢ä¸­çš„ç»“æœï¼‰

- 304èµ„æºæœªè¢«ä¿®æ”¹

- 403æ²¡æœ‰æƒé™
- 404èµ„æºæœªæ‰¾åˆ°
- 500æœåŠ¡å™¨é”™è¯¯
- 504ç½‘å…³è¶…æ—¶



#### http methods

ä¼ ç»Ÿçš„methods

- getè·å–æœåŠ¡å™¨çš„æ•°æ®
- postå‘æœåŠ¡å™¨æäº¤æ•°æ®

ç°åœ¨çš„methods

- getè·å–æ•°æ®
- postæ–°å»ºæ•°æ®
- patch/putæ›´æ–°æ•°æ®
- deleteåˆ é™¤æ•°æ®



##### Restful API

å·²æ¨å¹¿çš„APIè®¾è®¡æ–¹æ³•

###### ä¼ ç»ŸAPIè®¾è®¡

â€‹		**æŠŠæ¯ä¸ªurlå½“åšä¸€ä¸ªåŠŸèƒ½â˜…â˜…â˜…**

###### Restful APIè®¾è®¡

â€‹		**æŠŠæ¯ä¸ªurlå½“åšä¸€ä¸ªå”¯ä¸€çš„èµ„æºâ˜…â˜…â˜…**

###### å¦‚ä½•è®¾è®¡æˆä¸€ä¸ªèµ„æº

- å°½é‡ä¸ç”¨urlå‚æ•°
  - ä¼ ç»ŸAPIè®¾è®¡ï¼š/api/list?pageIndex=2
  - Restful APIè®¾è®¡ï¼š/api/list/2

- ç”¨**method**è¡¨ç¤º**æ“ä½œç±»å‹**
  - ä¼ ç»ŸAPIè®¾è®¡
    - å¢åŠ  => /api/create-blog   
    - æ›´æ–° => /api/update-blog?id = 100 
    - è·å¾— => /api/get-blog?id = 100
  - Restful APIè®¾è®¡
    - post => /api/blog
    - patch => /api/blog/100
    - get => /api/blog/100



#### http headers

æµè§ˆå™¨F12

##### å¸¸è§çš„Request Headers

- Acceptæµè§ˆå™¨å¯æ¥æ”¶çš„æ•°æ®æ ¼å¼
- Accept-Encodingæµè§ˆå™¨å¯æ¥æ”¶çš„å‹ç¼©ç®—æ³•ï¼Œå¦‚gzip
- Accept-Languangeæµè§ˆå™¨å¯æ¥æ”¶çš„è¯­è¨€ï¼Œå¦‚zh-CN
- Connectionï¼škeep-aliveä¸€æ¬¡TCPè¿æ¥é‡å¤ä½¿ç”¨
- cookie
- Host
- User-Agentï¼ˆç®€ç§°UAï¼‰æµè§ˆå™¨ä¿¡æ¯
- Content-typeå‘é€æ•°æ®çš„æ ¼å¼ï¼Œå¦‚application/json

##### å¸¸è§çš„Response Headers

- Content-typeè¿”å›æ•°æ®çš„æ ¼å¼ï¼Œå¦‚application/json
- Content-lengthè¿”å›æ•°æ®çš„å¤§å°ï¼Œå¤šå°‘å­—èŠ‚
- Content-Encodingè¿”å›æ•°æ®çš„å‹ç¼©ç®—æ³•ï¼Œå¦‚gzip
- Set-Cookie



##### è‡ªå®šä¹‰header

```js
// 'headers' are custom headers to be sent
headers: {'X-Requested-With' : 'XMLHttpRequest'}
```



##### ç¼“å­˜ç›¸å…³çš„headers

- Cache-Control  **Expires**

- Last-Modified  **If-Modified-Since**

- Etag  **If-None-Match**





#### httpç¼“å­˜

##### å…³äºç¼“å­˜

æŠŠæ²¡æœ‰å¿…è¦é‡æ–°å†æ¬¡ä¸‹è½½çš„èµ„æºä¿å­˜èµ·æ¥

- ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ

- å“ªäº›èµ„æºå¯ä»¥è¢«ç¼“å­˜ï¼Ÿ

  - é™æ€èµ„æºï¼ˆjs css imgï¼‰

    ```js
    entry: path.join(__dirname, 'src', 'index'),
    output: {
      // contenthashä¿è¯æ–‡ä»¶ç¼“å­˜ï¼Œå¦‚æœæ–‡ä»¶å˜äº†ï¼Œç¼“å­˜å°±æ›¿æ¢äº†
      filename: 'bundle.[contenthash].js',
      path: path.join(__dirname, 'dist')
    }
    ```

    

##### httpç¼“å­˜ç­–ç•¥

###### å¼ºåˆ¶ç¼“å­˜

![](D:\front-end\study\MarkDown\0åŸºç¡€\http\å¼ºåˆ¶ç¼“å­˜.png)

![](D:\front-end\study\MarkDown\0åŸºç¡€\http\ç¼“å­˜è¿‡æœŸ.png)

Cahce-Control 

- åœ¨**Response Header**ä¸­

  ![image-20210909200510334](D:\front-end\study\MarkDown\0åŸºç¡€\http\responseHeaders.png)

- æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„é€»è¾‘

- ç¼“å­˜ä¸€å¹´æ—¶é—´ => Cahce-Controlï¼šmax-age=31536000s

  ![image-20210909200254008](D:\front-end\study\MarkDown\0åŸºç¡€\http\diskCache.png)



- å€¼
  - max-age => è®¾ç½®æ—¶é—´
  - no-cache => æµè§ˆå™¨ä¸å¤„ç†ï¼Œäº¤ç»™æœåŠ¡ç«¯
  - no-store =>  æµè§ˆå™¨ä¸å¤„ç†ï¼ŒæœåŠ¡å™¨å¼ºåˆ¶è¿”å›ç»™æµè§ˆå™¨
  - private => æœ€ç»ˆç”¨æˆ·ç¼“å­˜
  - public => è·¯ç”±ä»£ç†å¯ä»¥ç¼“å­˜

- expireså·²ç»è¢«Cahce-Controlä»£æ›¿

  

###### åå•†ï¼ˆå¯¹æ¯”ï¼‰ç¼“å­˜

![](D:\front-end\study\MarkDown\0åŸºç¡€\http\åå•†ç¼“å­˜.png)

- æœåŠ¡ç«¯ç¼“å­˜ç­–ç•¥

- æœåŠ¡ç«¯åˆ¤æ–­å®¢æˆ·ç«¯èµ„æºï¼Œæ˜¯å¦å’ŒæœåŠ¡ç«¯èµ„æºä¸€æ ·

- ä¸€è‡´åˆ™è¿”å›**304**ï¼Œå¦åˆ™è¿”å›**200**å’Œæœ€æ–°çš„èµ„æºã€èµ„æºæ ‡è¯†

- èµ„æºæ ‡è¯†

  - åœ¨Response Headersä¸­ï¼Œæœ‰ä¸¤ç§

    - Last-Modified**èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´**ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰

    ![](D:\front-end\study\MarkDown\0åŸºç¡€\http\Last-Modified.png)

    

    - Etag**èµ„æºçš„å”¯ä¸€æ ‡è¯†**ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç±»ä¼¼äººç±»çš„æŒ‡çº¹ï¼Œ**ä¼˜å…ˆä½¿ç”¨**ï¼Œèµ„æºè¢«é‡å¤ç”Ÿæˆï¼Œè€Œå†…å®¹ä¸å˜ï¼Œåˆ™Etagæ›´ç²¾å‡†ï¼‰

      ![](D:\front-end\study\MarkDown\0åŸºç¡€\http\Etag.png)

    - ç¤ºä¾‹

      ![image-20210909205207372](D:\front-end\study\MarkDown\0åŸºç¡€\http\headersç¤ºä¾‹.png)

###### æ‰‹å†™ç»¼è¿°

![image-20210909205902440](D:\front-end\study\MarkDown\0åŸºç¡€\http\ç»¼è¿°.png)

ä¸‰ç§åˆ·æ–°æ“ä½œ

- å±æ€§æ“ä½œæ–¹å¼ï¼Œå¯¹ç¼“å­˜çš„å½±å“

  - æ­£æ“æ“ä½œï¼šåœ°å€æ è¾“å…¥urlï¼Œè·³è½¬é“¾æ¥ï¼Œå‰è¿›åé€€ç­‰
    - å¼ºåˆ¶ç¼“å­˜æœ‰æ•ˆï¼Œåå•†ç¼“å­˜æœ‰æ•ˆ

  - æ‰‹åŠ¨åˆ·æ–°ï¼šF5ï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œå³å‡»èœå•åˆ·æ–°
    - å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåå•†ç¼“å­˜æœ‰æ•ˆ
  - å¼ºåˆ¶åˆ·æ–°ï¼šctrl + F5
    - å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåå•†ç¼“å­˜å¤±æ•ˆ







## 4ã€å…³äºå¼€å‘ç¯å¢ƒ

é¢è¯•å®˜æƒ³é€šè¿‡å¼€å‘ç¯å¢ƒäº†è§£å€™é€‰äººçš„å®é™…å·¥ä½œæƒ…å†µ

å¼€å‘ç¯å¢ƒå¾—åˆ°å·¥å…·ï¼Œèƒ½ä½“ç°å·¥ä½œäº§å‡ºçš„æ•ˆç‡

ä¼šä»¥èŠå¤©å½¢å¼ä¸ºä¸»ï¼Œä¸ä¼šé—®å…·ä½“çš„é—®é¢˜



### å¼€å‘ç¯å¢ƒ

#### git

æœ€å¸¸ç”¨çš„ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·

å¤§å‹é¡¹ç›®éœ€è¦å¤šäººåä½œå¼€å‘ï¼Œå¿…é¡»ç†Ÿç»ƒä½¿ç”¨git

gitæœåŠ¡ç«¯å¸¸è§çš„æœ‰ github coding.netç­‰

##### å¸¸ç”¨gitå‘½ä»¤

git add .

git checkout xxx

git commit -m 'xxx'

git push origin master

git pull origin master

git branch

git checkout -b xxx/ git checkout xxx

git merge xxx

1ã€æ“ä½œæœªåˆ‡æ¢åˆ†æ”¯æ–°å»ºä»£ç é”™è¯¯
git stash
git status
åˆ‡æ¢æ–°å»ºåˆ†æ”¯
git checkout -b feature-logout
git stash pop
git add .
git commit -m 'xxx'



#### è°ƒè¯•å·¥å…·

##### chromeè°ƒè¯•å·¥å…·

- Elements

- Console

- Source

  - debugger

    ![image-20210824214140961](D:\front-end\study\MarkDown\0åŸºç¡€\debugger\debugger.png)

- Network

- Application



#### æŠ“åŒ…ï¼ˆH5é¡µï¼‰

æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œéœ€è¦ç”¨å·¥å…·æŠ“åŒ…

win => fiddler

mac => charles

æ‰‹æœºå’Œç”µè„‘è¿åŒä¸€ä¸ªå±€åŸŸç½‘

å°†æ‰‹æœºä»£ç†åˆ°ç”µè„‘ä¸Š

æ‰‹æœºæµè§ˆå™¨ç½‘é¡µï¼Œå³å¯æŠ“åŒ…

æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

ç½‘å€ä»£ç†

https



#### webpackå’Œbabel

ES6æ¨¡å—åŒ–ï¼Œæµè§ˆå™¨æš‚ä¸æ”¯æŒ

ES6è¯­æ³•ï¼Œæµè§ˆå™¨å¹¶ä¸å®Œå…¨æ”¯æŒ

å‹ç¼©ä»£ç ï¼Œæ•´åˆä»£ç ï¼Œä»¥è®©ç½‘é¡µåŠ è½½æ›´å¿«

##### package.json

```json
{
  "name": "webpack-demo",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "build": "webpack --config webpack.prod.js",
    "dev": "webpack-dev-server"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@babel/core": "^7.6.2",
    "@babel/preset-env": "^7.6.2",
    "babel-loader": "^8.0.6",
    "html-webpack-plugin": "^3.2.0",
    "webpack": "^4.41.0",
    "webpack-cli": "^3.3.9",
    "webpack-dev-server": "^3.8.1"
  }
}
```

##### .babelrc

```json
{
    "presets": ["@babel/preset-env"],
    "plugins": []
}
```

##### webpack.config.js

```js
const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
    // mode å¯é€‰ development æˆ– production ï¼Œé»˜è®¤ä¸ºåè€…
    // production ä¼šé»˜è®¤å‹ç¼©ä»£ç å¹¶è¿›è¡Œå…¶ä»–ä¼˜åŒ–ï¼ˆå¦‚ tree shakingï¼‰
    mode: 'development',
    entry: path.join(__dirname, 'src', 'index'),
    output: {
        filename: 'bundle.js',
        path: path.join(__dirname, 'dist')
    },
    module: {
        rules: [
            {
                test: /\.js$/,
                loader: ['babel-loader'],
                include:  path.join(__dirname, 'src'),
                exclude: /node_modules/
            },
        ]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: path.join(__dirname, 'src', 'index.html'),
            filename: 'index.html'
        })
    ],
    devServer: {
        port: 3000,
        contentBase: path.join(__dirname, 'dist'),  // æ ¹ç›®å½•
        open: true,  // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    }
}
```



##### ES6æ¨¡å—åŒ–è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿ

```js
// export function fn() {
//     console.log('fn')
// }
// export const name = 'b'

export default function aabbcc(){
    return 'aabbcc'
}

function fn() {
    console.log('fn')
}
const name = 'b'

export {  // æ³¨æ„è¿™é‡Œä¸èƒ½æœ‰ default ï¼ï¼ï¼
    fn as fnfn,
    name
}
```

```js
// å¯¼å…¥
import aabbcc, { fnfn , name } from './fn'
fnfn()
```



##### é…ç½®webpackç”Ÿäº§ç¯å¢ƒ

webpack.prod.js

```js
const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
    mode: 'production',
    entry: path.join(__dirname, 'src', 'index'),
    output: {
        // hashå€¼æ ¡éªŒæ–‡ä»¶åæ˜¯å¦å˜åŒ–
        filename: 'bundle.[contenthash].js',
        path: path.join(__dirname, 'dist')
    },
    module: {
        rules: [
            {
                test: /\.js$/,
                loader: ['babel-loader'],
                include:  path.join(__dirname, 'src'),
                exclude: /node_modules/
            },
        ]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: path.join(__dirname, 'src', 'index.html'),
            filename: 'index.html'
        })
    ]
}
```



#### linuxå¸¸ç”¨å‘½ä»¤

æµ‹è¯•æœºéœ€è¦å’Œçº¿ä¸Šæœºå™¨ä¿æŒä¸€è‡´ï¼Œç”¨linux

æµ‹è¯•æœºæˆ–è€…çº¿ä¸Šæœºå™¨å‡ºäº†é—®é¢˜ï¼Œæœ¬åœ°åˆä¸èƒ½å¤ç°ï¼Œéœ€è¦å»æ’æŸ¥

è¿œç¨‹ç™»å½• => ssh username@192.168.2.23

æŸ¥çœ‹æ–‡ä»¶æ’åˆ— => ls -la

æŸ¥çœ‹åˆ—è¡¨ =>  ll

æ¸…å± =>  clear

åˆ›å»ºæ–‡ä»¶å¤¹ => mkdir dirname

åˆ é™¤æ–‡ä»¶å¤¹ => rm -rf dirname

ç›®å½•åˆ‡æ¢ => cd dirname

ä¿®æ”¹æ–‡ä»¶ =>  mv index.html  index.php

ç§»åŠ¨æ–‡ä»¶ =>  mv index.html  ../index.html

æ‹·è´æ–‡ä»¶ =>  cp a.js  b.js

åˆ é™¤æ–‡ä»¶ =>  rm b.js

æ–°å»ºæ–‡ä»¶ =>  touch c.js

æ–°å»ºå¹¶ç¼–è¾‘æ–‡ä»¶ => vi d.js

Insertç¼–è¾‘

â€‹	:wqé€€å‡ºå¹¶ä¿å­˜

æŸ¥çœ‹æ–‡ä»¶å†…å®¹ => cat c.js

â€‹	head c.js

â€‹	tail c.js

æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ => grep â€œbabelâ€ c.js







## 5ã€è¿è¡Œç¯å¢ƒ

è¿è¡Œç¯å¢ƒå³æµè§ˆå™¨ï¼ˆserverç«¯æœ‰nodejsï¼‰

ä¸‹è½½ç½‘é¡µä»£ç ï¼Œæ¸²æŸ“å‡ºé¡µé¢ï¼ŒæœŸé—´ä¼šæ‰§è¡Œè‹¥å¹²JS

è¦ä¿è¯ä»£ç å†æµè§ˆå™¨ä¸­ï¼šç¨³å®šä¸”é«˜æ•ˆ



### ç½‘é¡µåŠ è½½è¿‡ç¨‹

#### é¢˜ç›®

ä»urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹

window.onloadå’ŒDOMContentLoadedçš„åŒºåˆ«

#### çŸ¥è¯†ç‚¹

##### åŠ è½½èµ„æºçš„å½¢å¼

- htmlä»£ç 

- åª’ä½“æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘

- javascript css

##### åŠ è½½èµ„æºçš„è¿‡ç¨‹

- URLè§£æ
- DNSè§£æï¼šåŸŸå => IPåœ°å€
  - DNS-prefetchç¼“å­˜èµ·æ¥
- æµè§ˆå™¨æ ¹æ®IPåœ°å€å‘æœåŠ¡å™¨å‘èµ·httpè¯·æ±‚
- æœåŠ¡å™¨å¤„ç†httpè¯·æ±‚ï¼Œå¹¶è¿”å›ç»™æµè§ˆå™¨

##### æ¸²æŸ“é¡µé¢çš„è¿‡ç¨‹

- æ ¹æ®HTMLä»£ç ç”ŸæˆDOMæ ‘

- æ ¹æ®CSSä»£ç ç”ŸæˆCSSOM

- å°†DOMæ ‘å’ŒCSSOMæ•´åˆå½¢æˆRender Tree

- æ ¹æ®Render Tree æ¸²æŸ“é¡µé¢

- é‡åˆ°<script>åˆ™æš‚åœæ¸²æŸ“ï¼Œä¼˜å…ˆåŠ è½½å¹¶æ‰§è¡ŒJSä»£ç ï¼Œå®Œæˆå†ç»§ç»­

  ```js
  document.getElementById('app').innerHTML = 'update'
  ```

  ```html
  <body>
      <div id=â€œappâ€>default</div>
      <script src="index.js"></script>
      <p>test</p>
  </body>
  ```

  

- ç›´è‡³æŠŠRender treeæ¸²æŸ“å®Œæˆ



ä¸ºä½•å»ºè®®æŠŠCSSæ”¾åœ¨headä¸­ï¼Ÿ

- DOMæ ‘ç”Ÿæˆä¹‹å‰åŠ è½½å®Œï¼Œå’ŒCSSDOMæ•´åˆå½¢æˆRender Treeä¸€æ¬¡æ¸²æŸ“å®Œ

ä¸ºä½•å»ºè®®æŠŠJSæ”¾åœ¨bodyæœ€åï¼Ÿ

- å…ˆå°½é‡æ¸²æŸ“ï¼Œå†æ‰§è¡ŒJS

åª’ä½“èµ„æºä¸ä¼šé˜»å¡DOMæ¸²æŸ“



window.onloadå’ŒDOMContentLoaded

```js
window.addEventListener('load', function(){
  // é¡µé¢çš„å…¨éƒ¨èµ„æºåŠ è½½å®Œæ‰ä¼šæ‰§è¡Œï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è§†é¢‘ç­‰
})
document.addEventListener('DOMContentLoaded', function(){
  // DOMæ¸²æŸ“å®Œå³å¯æ‰§è¡Œï¼Œæ­¤æ—¶å›¾ç‰‡ã€è§†é¢‘è¿˜å¯èƒ½æ²¡æœ‰åŠ è½½å®Œ 
})
```



ç¤ºä¾‹

```html
<body>
    <p>test1</p>
    <p>test2</p>
    <p>test3</p>
    <img id="img1" src="https://tse1-mm.cn.bing.net/th/id/R-C.8c372fd892b3bd371eb3a1df8bd7fc88?rik=4KxekfOQD28FKA&riu=http%3a%2f%2fwww.desktx.com%2fd%2ffile%2fwallpaper%2fscenery%2f20170303%2fdfe53a7300794009a029131a062836d5.jpg&ehk=6ayU5y%2fwtGnzhu7g%2bJimm2REgEbHGczl9Mkbg3I1%2b5I%3d&risl=&pid=ImgRaw&r=0"/>
    <script type="text/javascript">
      const img1 = document.getElementById('img1')
      img1.onload = function(){
        console.log('img loaded')
      }
      window.addEventListener('load', function(){
  		// é¡µé¢çš„å…¨éƒ¨èµ„æºåŠ è½½å®Œæ‰ä¼šæ‰§è¡Œï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è§†é¢‘ç­‰
        console.log('window loaded')
	  })
	  document.addEventListener('DOMContentLoaded', function(){
  		// DOMæ¸²æŸ“å®Œå³å¯æ‰§è¡Œï¼Œæ­¤æ—¶å›¾ç‰‡ã€è§†é¢‘è¿˜å¯èƒ½æ²¡æœ‰åŠ è½½å®Œ
        console.log('DOMContentLoaded loaded')
	  })
    </script>
</body>
```



### æ€§èƒ½ï¼ˆä½“éªŒï¼‰ä¼˜åŒ–

æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå¤ªå¤šæ¡ˆä¾‹äº†

#### åŸåˆ™ï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰

- å¤šä½¿ç”¨å†…å­˜ã€ç¼“å­˜æˆ–å…¶ä»–æ–¹æ³•

- å‡å°‘CPUè®¡ç®—é‡ï¼Œå‡å°‘ç½‘ç»œåŠ è½½è€—æ—¶



#### ä»ä½•å…¥æ‰‹

- è®©åŠ è½½æ›´å¿«

  - å‡å°‘èµ„æºä½“ç§¯ï¼šå‹ç¼©ä»£ç 

  - å‡å°‘è®¿é—®æ¬¡æ•°ï¼šåˆå¹¶ä»£ç ï¼ŒSSRæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œç¼“å­˜

    ```html
    <script src="a.js"></script>
    <script src="b.js"></script>
    <script src="c.js"></script>
    <!-- åˆå¹¶ä»£ç å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•° -->
    <script src="abc.js"></script>
    ```

    ç¼“å­˜ï¼šé™æ€èµ„æºåŠ hashåç¼€ï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—hash

    æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™hashä¸å˜ï¼Œåˆ™urlä¸å˜

    urlå’Œæ–‡ä»¶ä¸å˜ï¼Œåˆ™ä¼šè‡ªåŠ¨è§¦å‘httpç¼“å­˜æœºåˆ¶ï¼Œè¿”å›304

    ```js
    module.exports = {
        mode: 'production',
        entry: path.join(__dirname, 'src', 'index'),
        output: {
            // hashå€¼æ ¡éªŒæ–‡ä»¶åæ˜¯å¦å˜åŒ–
            filename: 'bundle.[contenthash].js',
            path: path.join(__dirname, 'dist')
        },
    ```

    SSRï¼šæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼šå°†ç½‘é¡µå’Œæ•°æ®ä¸€èµ·åŠ è½½ï¼Œä¸€èµ·æ¸²æŸ“

    éSSRï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰ï¼šå…ˆåŠ è½½ç½‘é¡µï¼Œå†åŠ è½½æ•°æ®ï¼Œå†æ¸²æŸ“æ•°æ®

  - ä½¿ç”¨æ›´å¿«çš„ç½‘ç»œï¼šCDN

    ![](D:\front-end\study\MarkDown\0åŸºç¡€\good\CDN.png)

    

- è®©æ¸²æŸ“æ›´å¿«

  - CSSæ”¾åœ¨headï¼ŒJSæ”¾åœ¨bodyæœ€ä¸‹é¢
  - å°½æ—©å¼€å§‹æ‰§è¡ŒJSï¼Œç”¨DOMContentLoadedè§¦å‘
  - æ‡’åŠ è½½å’Œé¢„åŠ è½½ï¼ˆå›¾ç‰‡æ‡’åŠ è½½ï¼Œä¸Šæ»‘åŠ è½½æ›´å¤šï¼‰
  - å¯¹DOMæŸ¥è¯¢è¿›è¡Œç¼“å­˜
  - å¤šæ¬¡DOMæ“ä½œï¼Œåˆå¹¶åˆ°ä¸€èµ·æ’å…¥DOMç»“æ„
  - é˜²æŠ–debounceå’ŒèŠ‚æµthrottle



#### æ‰‹å†™é˜²æŠ–

ç›‘å¬ä¸€ä¸ªè¾“å…¥æ¡†çš„ï¼Œæ–‡å­—å˜åŒ–åçš„è§¦å‘changeäº‹ä»¶

ç›´æ¥ç”¨keyupäº‹ä»¶ï¼Œåˆ™ä¼šé¢‘ç¹è§¦å‘changeäº‹ä»¶

é˜²æŠ–ï¼šç”¨æˆ·è¾“å…¥ç»“æŸåæš‚åœæ—¶ä¸€æ®µæ—¶é—´ï¼Œæ‰ä¼šè§¦å‘changeäº‹ä»¶

```html
<body>
  <input type="text" id="input1"/>
  <script>
    const input1 = document.getElementById('input1')
    function debounce(fn, miliseconds = 500){
        let timer = null
        return function(){
          if(timer) clearTimeout(timer)
          timer = setTimeout(() => {
            fn()
            timer = null
          }, miliseconds)
        }
    }
    function check(){
      console.log(input1.value) 
    }
    input1.addEventListener('keyup', debounce(check))
  </script>
</body>
```



#### æ‰‹å†™èŠ‚æµ

æ‹–æ‹½ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¦éšæ—¶æ‹¿åˆ°è¯¥å…ƒç´ è¢«æ‹–æ‹½çš„ä½ç½®

ç›´æ¥ç”¨dragäº‹ä»¶ï¼Œåˆ™ä¼šé¢‘ç¹è§¦å‘ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´å¡é¡¿

æ— è®ºæ‹–æ‹½é€Ÿåº¦å¤šå¿«ï¼Œéƒ½ä¼šæ¯éš”100msè§¦å‘ä¸€æ¬¡

```html
<body>
  <div id="div1" draggable="true" style="border: 1px solid #ccc; width: 200px; height: 200px;">å¯ä»¥æ‹–æ‹½</div>
  <script>
    const div1 = document.getElementById('div1')
    function throttle(fn, miliseconds = 500){
        let timer = null
        return function(){
          if(timer) return
          timer = setTimeout(() => {
            // æ¥æ”¶e
            fn.apply(this, arguments)
            timer = null
          }, miliseconds)
        }
    }
    div1.addEventListener('drag', throttle(function(e){
	  console.log(e.offsetX, e.offsetY) 
	}))
  </script>
</body>
```



### å®‰å…¨

å¸¸è§çš„webå‰ç«¯æ”»å‡»æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

#### XSSè·¨ç«™è¯·æ±‚æ”»å‡»

ä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œæˆ‘å‘è¡¨ä¸€ç¯‡åšå®¢ï¼Œå…¶ä¸­åµŒå…¥<script>è„šæœ¬

è„šæœ¬å†…å®¹ï¼šè·å–cookieï¼Œå‘é€åˆ°æˆ‘çš„æœåŠ¡å™¨ï¼ˆæœåŠ¡å™¨é…åˆè·¨åŸŸï¼‰

å‘å¸ƒè¿™ç¯‡åšå®¢ï¼Œæœ‰äººæŸ¥çœ‹å®ƒï¼Œæˆ‘è½»æ¾æ”¶å‰²è®¿é—®è€…çš„cookie

##### XSSé¢„é˜² 

```shell
npm i xss
```

æ›¿æ¢ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚<å˜ä¸º&lt ;  >å˜ä¸º&gt ;

- `<script>`å˜ä¸º&lt ;script&gt ;ç›´æ¥æ˜¾ç¤ºï¼Œè€Œä¸ä¼šä½œä¸ºè„šæœ¬æ‰§è¡Œ
- å‰ç«¯è¦æ›¿æ¢ï¼Œåç«¯ä¹Ÿè¦æ›¿æ¢

#### XSRFè·¨ç«™è¯·æ±‚ä¼ªé€ 

ä½ æ­£åœ¨è´­ç‰©ï¼Œçœ‹ä¸­äº†æŸä¸ªå•†å“ï¼Œå•†å“idæ˜¯100

ä»˜è´¹æ¥å£æ˜¯xxx.com/pay?id=100, ä½†æ²¡æœ‰ä»»ä½•éªŒè¯

æˆ‘æ˜¯æ”»å‡»è€…ï¼Œæˆ‘çœ‹ä¸­äº†ä¸€ä¸ªå•†å“ï¼Œidæ˜¯200

æˆ‘å‘ä½ å‘é€ä¸€å°ç”µå­é‚®ä»¶ï¼Œé‚®ä»¶æ ‡é¢˜å¾ˆå¸å¼•äºº

ä½†é‚®ä»¶æ­£æ–‡éšè—ç€<img src=xxx.com/pay?id=200 />

ä½ ä¸€æŸ¥çœ‹é‚®ä»¶ï¼Œå°±å¸®æˆ‘è´­ä¹°äº†idæ˜¯200çš„å•†å“

##### XSRFé¢„é˜² 

ä½¿ç”¨postæ¥å£

å¢åŠ éªŒè¯ï¼Œä¾‹å¦‚å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ã€æŒ‡çº¹ç­‰

